(this.webpackJsonpcapensis=this.webpackJsonpcapensis||[]).push([[0],{112:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);n(86);var c=n(1),s=n.n(c),r=n(24),a=n.n(r),i=(n(91),n(3)),o=(n(92),n(8)),l=n.n(o),j=n(47),u=n(11),d=(n(112),n(80)),b=n(0);function h(e){var t=e.iconOnly;return Object(b.jsxs)("div",{className:"loading",children:[Object(b.jsx)(d.a,{animation:"border",variant:"primary",role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:e.children})}),!t&&e.children&&Object(b.jsx)("p",{children:e.children})]})}var O=n(41),m=n(83),f=n(44),x=n(43),p=n(10);n(122),n(123);function v(e){var t=e.className,n=e.hareOnly,c=e.scale||1,s=n?48:65,r=77*c,a=s*c;return Object(b.jsx)("div",{className:t,children:Object(b.jsxs)("svg",{viewBox:"0 0 ".concat(77," ").concat(s),width:"".concat(r,"px"),height:"".concat(a,"px"),children:[Object(b.jsx)("path",{d:"m 57.361851,0.00779235 c -4.01701,0.004 -8.06578,0.19957 -11.98118,1.16335995 -4.78258,0.8796 -9.74801,1.1765 -14.25797,3.14795 -3.09877,1.19352 -6.29356,2.46094 -8.7127,4.81844 -2.7705,2.2294797 -5.60536,4.3862397 -8.32466,6.6743997 -1.40146,0.78769 -2.99375,1.2529 -4.2156301,2.33883 -2.65423,1.86781 -5.22584,4.00714 -6.91635,6.82183 -1.19926,1.11653 -1.52069,3.39482 -0.0633,4.4392 1.14,0.81447 2.47709,1.30863 3.83306,1.62628 2.01304,-0.11472 4.0149701,-0.36991 6.0275101,-0.49143 1.77655,2.23261 3.04142,4.80663 4.40433,7.29772 0.64946,1.21874 -0.25521,2.46118 -1.51411,2.6308 -1.64442,0.46517 -3.28844,-0.29321 -4.92681,-0.42153 -3.3331601,-0.54907 -7.0894401,-0.42228 -9.88205011,1.70372 -1.35316,0.52871 -0.94367,2.25694 0.42280001,2.36933 1.81457,0.30455 3.54713,1.40282 5.44632,1.02542 4.9009101,-0.12947 9.8662201,-0.034 14.6694601,-1.16597 2.42444,0.0281 4.83772,0.38118 7.26575,0.26066 5.15597,-0.0215 10.30789,0.40165 15.46354,0.25118 1.0775,-0.38501 2.03638,0.0291 2.72619,0.86285 2.2857,1.65921 5.2125,2.0065 7.95871,2.07466 2.36194,-0.10072 4.72233,-0.61928 6.85706,-1.64948 0.54924,-0.79125 1.47448,-0.83249 2.33141,-0.69274 3.00451,0.0239 6.19737,0.20899 8.95937,-1.18298 1.73172,-0.95122 3.00509,-2.71784 3.21745,-4.69904 0.4238,-2.23848 0.65319,-4.81244 -0.73532,-6.77443 -1.154,-0.73141 -2.65814,0.0563 -3.88979,0.25806 -0.7944,0.20144 -1.42317,1.18492 -1.91994,1.44538 -1.97553,-1.86041 -3.65461,-4.28702 -6.35613,-5.14173 -3.70559,-1.50739 -7.49919,-3.18272 -11.5784,-3.16668 -4.4822,-0.17203 -9.12094,0.0336 -13.32085,1.74874 -1.15076,0.53642 -1.80113,1.99815 -3.22896,1.81025 -0.98667,0.0139 -2.1518,0.48663 -2.51515,-0.74805 -1.14654,-1.4998 -2.85301,-2.52208 -4.6766,-2.96616 1.89085,-1.73694 4.5842,-1.85861 6.99555,-2.19144 3.94803,-0.27759 7.40536,-2.38347 10.79623,-4.22948 1.84268,-1.04937 3.83523,-1.79162 5.67607,-2.84334 3.18858,-1.66937 6.32016,-3.45256 9.32789,-5.42998 1.38248,-0.78013 3.01035,-0.89313 4.56019,-0.83627 0.80497,-0.005 3.14619,-0.068 2.31047,-1.3126997 -0.85229,-0.56304 -1.87789,-0.84804 -2.86493,-1.09406 -2.92585,-0.61054 -5.92423,-0.20053 -8.88318,-0.33529 -1.33872,0.33717 -0.13302,-1.40167 0.0578,-1.98966 0.96719,-1.89075 2.61018,-3.31646 4.32477,-4.51316995 0.45331,-1.25911 -1.45856,-0.79823 -2.20669,-0.89482 -0.22039,-2e-5 -0.44086,7.9e-4 -0.66118,0.001 z m -1.84718,1.52054995 c -2.07027,1.58057 -3.34944,4.00999 -3.92327,6.51519 -2.26634,0.71083 -4.65987,0.83327 -6.97211,1.3363 -3.50647,0.50854 -7.04454,1.0347697 -10.37484,2.2950497 -3.79102,1.19153 -7.28448,3.33446 -10.00061,6.24259 -0.96349,0.91609 -2.0655,1.70665 -2.84949,2.79563 0.82199,0.75625 2.3656,0.4527 3.25073,0.11744 2.36241,-1.91581 4.35696,-4.29008 7.00151,-5.84978 4.38352,-2.72918 9.52375,-3.90235 14.59819,-4.48859 3.13754,-0.5661197 6.26336,-1.2223397 9.41382,-1.7015397 2.00829,-0.0865 4.02412,0.0118 6.01563,0.28352 -1.66207,0.30713 -3.47483,0.51521 -4.76802,1.7211997 -3.39045,2.23193 -6.98134,4.14837 -10.58296,6.00746 -3.92449,1.47143 -7.21317,4.45604 -11.40713,5.22587 -2.88723,0.39207 -5.81743,0.81946 -8.51264,1.98241 -0.82909,0.65003 -2.74272,1.42207 -2.21036,2.66804 0.82435,0.54629 1.89909,0.53577 2.7622,1.04115 1.29249,0.5971 2.43576,1.58348 3.0745,2.87022 1.01644,0.71336 2.32989,0.16624 3.47565,0.28809 1.72819,-0.0996 3.53372,0.11044 5.19353,-0.45158 1.1247,-0.74386 1.86716,-2.08433 3.27201,-2.369 2.78981,-1.16397 5.86948,-0.70111 8.80272,-0.67326 3.97674,0.24988 7.59229,2.07977 11.19225,3.62042 1.73863,1.14374 3.14838,2.6984 4.5137,4.2502 0.29847,0.96488 -0.11625,2.09014 -0.73993,2.83665 -1.11832,1.33001 -2.22119,2.67487 -3.24344,4.08081 -1.38246,-1.27382 -1.87513,-3.20964 -3.23085,-4.51269 -1.913,-2.27026 -3.94119,-4.49018 -6.38898,-6.1968 -0.99529,-0.46795 -3.21539,-0.78062 -3.22995,0.79238 0.0888,1.48717 1.08473,3.05195 0.26477,4.4924 -1.21004,1.31607 -2.95718,1.96683 -4.51226,2.78964 -1.21562,0.74771 -2.59063,1.23989 -4.03129,1.24509 -3.12787,-0.0112 -6.33407,0.096 -9.3557,-0.85714 -1.48665,-0.44939 -2.87612,-1.14683 -4.23652,-1.88379 -0.83777,-0.47921 -1.79459,-0.32288 -2.67529,-0.0958 -0.6819,0.0251 -1.25028,0.58275 -0.83676,1.20625 -0.31002,1.82039 -1.99921,3.09189 -3.73103,3.44583 -4.30082,1.31904 -8.84919,0.8659 -13.2780201,0.98997 -1.26633,-0.0872 -2.39871,-0.7235 -3.61751,-1.01452 1.04829,-0.78244 2.37176,-1.63369 3.732,-1.18219 3.4993601,0.52572 7.1927501,1.30556 10.6380201,0.0811 1.18583,-0.61006 2.72924,-1.26239 2.96032,-2.7459 -0.46526,-2.52759 -2.26556,-4.47764 -3.34839,-6.73783 -0.90275,-1.44498 -1.81697,-2.8873 -2.86469,-4.23303 -1.41655,-0.22397 -2.74882,0.53257 -3.80994,1.38872 -1.5909901,0.83692 -3.3855201,-0.0286 -4.8210501,-0.79279 -1.10258,-0.47242 -0.97964,-1.92798 -0.1981,-2.63597 1.57739,-2.42276 3.53709,-4.63764 5.9903601,-6.20103 1.45991,-1.04578 2.96079,-2.0997 4.68625,-2.65728 2.23358,-1.78108 4.34572,-3.7157 6.68929,-5.35658 2.46401,-1.9284097 4.75177,-4.2598997 7.7968,-5.2545997 4.28821,-1.91026 8.87702,-3.12162 13.54568,-3.59989 3.46805,-0.5604 6.9352,-1.36469 10.46951,-1.26038 0.0996,0.0212 0.9521,-0.16887 0.41169,0.14231 z m 17.36865,33.3068697 c 0.0367,2.30536 0.3497,4.86675 -1.08692,6.85558 -1.03919,1.30947 -2.73655,2.20449 -4.43547,1.93817 -0.77409,-0.0357 -2.35655,0.006 -2.63063,-0.31995 1.44068,-0.682 1.91811,-2.3697 3.11885,-3.33132 1.65015,-1.74184 3.51339,-3.27865 5.03417,-5.14248 z m -18.65857,1.63553 c 1.89376,1.84451 3.36743,4.07325 4.60172,6.39918 1.14731,0.66685 0.28648,1.98917 -0.58412,2.41876 -1.7177,0.90563 -3.75229,0.60871 -5.54983,0.13333 -1.57252,-0.41737 -3.28366,-1.11929 -4.12892,-2.59456 -0.60015,-1.22762 -0.006,-2.8826 1.30953,-3.34283 1.45745,-0.81343 3.27245,-1.63389 3.7069,-3.41383 -0.0339,-0.51019 0.49391,0.38559 0.64472,0.39995 z"}),Object(b.jsx)("path",{d:"m 12.329021,22.078982 c -1.53898,-0.19975 -2.9326201,0.99592 -3.4488701,2.37371 1.03832,0.74091 2.3559401,-0.0447 3.5171501,0.20167 1.10195,-0.23557 1.81943,-1.32642 2.49593,-2.09479 -0.19378,-1.02995 -1.86981,-0.23781 -2.56421,-0.48059 z"}),!n&&Object(b.jsx)("path",{d:"m 41.320781,53.934512 c -1.40125,0.78499 -1.74836,2.50759 -2.81328,3.61549 -0.54628,0.52518 -1.12113,2.32572 -1.85898,1.1312 -0.99802,-1.0459 -1.42941,-2.52936 -2.47688,-3.51771 -1.05875,-0.45875 -2.22973,-0.60244 -3.30927,-1.01111 -1.00454,0.34948 -1.46107,1.68494 -2.24136,2.43888 -0.72305,0.77802 -1.3659,2.08327 -2.17983,2.50056 -1.28091,-0.86629 -2.00461,-2.27914 -3.01922,-3.40477 -1.53291,-0.42713 -3.13117,-0.52765 -4.71406,-0.58619 -1.23892,0.37568 -0.78236,2.05893 -1.65531,2.82457 -0.53006,0.56784 -1.25698,1.56753 -1.88229,1.65653 -1.04478,-1.21346 -1.77582,-2.71889 -3.09471,-3.67928 -1.55435,-0.14566 -3.0901001,-0.46848 -4.6527101,-0.52851 -0.95407,0.82512 -1.33418,2.16121 -2.4715,2.81253 -1.24373,0.96895 -2.76247,1.45994 -4.21143001,2.02862 -0.52278,0.89239 1.31170001,0.81997 1.89302001,1.01211 2.36823,0.30118 4.73041,-0.52072 6.74571,-1.71431 1.0553301,1.08072 1.8212801,2.49002 3.1791401,3.24085 1.97214,0.13451 4.01717,-0.0199 5.87244,-0.73258 1.0757,-0.53612 1.81234,-1.53666 2.82566,-2.1632 1.13214,0.76403 1.84709,1.96098 2.79884,2.91321 1.8464,1.09668 4.1529,0.17238 5.62525,-1.13985 0.89454,-0.36716 1.6536,-1.38208 2.27333,-1.7991 1.96495,1.67864 4.53365,2.97082 7.18297,2.61568 1.7278,-0.57505 2.8921,-2.07087 3.97931,-3.44579 1.10633,0.83674 2.06865,2.1019 3.55441,2.21905 1.94462,0.78768 4.06283,0.29677 6.08162,0.20851 0.64608,-0.41299 1.55284,-2.06258 2.1616,-0.69412 1.18284,1.41226 3.19601,1.18788 4.84478,1.18443 1.32356,-0.094 2.76166,0.29071 3.98817,-0.36572 0.93274,-0.6761 1.95892,-1.22012 2.90053,-1.8892 1.21219,1.00965 2.47732,1.96052 3.82504,2.78277 1.46934,-0.28286 3.02681,-0.0991 4.43605,-0.67576 0.0567,-1.06956 -1.55488,-1.28159 -2.13541,-2.05824 -1.44175,-1.16132 -2.76005,-2.63955 -3.21549,-4.47847 0.14008,-1.18198 -1.39882,-0.37674 -2.05677,-0.47105 -1.14293,0.0913 -2.30712,-0.0929 -3.43396,0.17663 -0.59929,2.03753 -1.93267,4.01717 -3.9945,4.77686 -0.92214,-0.59454 -1.28493,-1.90533 -1.80722,-2.87819 -0.34563,-1.29888 -1.6878,-1.39474 -2.78254,-1.63421 -1.08069,-0.2315 -2.18366,-0.4016 -3.29198,-0.36773 -0.27593,0.98221 0.72671,2.3642 -0.66327,2.90621 -0.91095,0.58095 -2.25552,1.95606 -3.08972,0.60435 -1.09768,-1.02434 -2.11666,-2.14674 -2.9248,-3.41632 -1.13714,-0.26061 -2.30091,-0.40997 -3.39498,-0.83283 -0.26022,-0.0762 -0.52479,-0.14653 -0.7964,-0.1648 z"})]})})}function g(e){var t=e.username,n=e.handleLogout;return Object(b.jsx)(f.a,{className:"navbar",variant:"dark",expand:"sm",children:Object(b.jsxs)(m.a,{children:[Object(b.jsx)(O.LinkContainer,{to:"/schedule",children:Object(b.jsx)(f.a.Brand,{href:"/",children:Object(b.jsx)(v,{className:"nav-logo",scale:"0.75"})})}),Object(b.jsx)(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(b.jsxs)(f.a.Collapse,{id:"basic-navbar-nav",children:[Object(b.jsxs)(x.a,{className:"me-auto",children:[Object(b.jsx)(O.LinkContainer,{to:"/schedule",children:Object(b.jsx)(x.a.Link,{children:"Schedule"})}),Object(b.jsx)(O.LinkContainer,{to:"/projects",children:Object(b.jsx)(x.a.Link,{children:"Projects"})}),Object(b.jsx)(O.LinkContainer,{to:"/sessions",children:Object(b.jsx)(x.a.Link,{children:"Sessions"})}),Object(b.jsx)(O.LinkContainer,{to:"/reports",children:Object(b.jsx)(x.a.Link,{children:"Reports"})})]}),Object(b.jsxs)(f.a.Text,{children:[Object(b.jsxs)("span",{className:"me-2",children:["Logged in as ",t]}),Object(b.jsx)(p.a,{onClick:n,children:"Logout"})]})]})]})})}n(126);function N(e){var t=e.currentSession,n=e.projects,c=!n,s=t&&n&&n[t.project_id];return Object(b.jsxs)("div",{className:"statusBar ".concat(s?"bg-success text-light":s?void 0:"bg-secondary text-light"),children:[c&&"Loading...",s&&"Currently tracking ".concat(n[t.project_id].title),t&&!n[t.project_id]&&"ERROR: Trying to track project ID ".concat(t.project_id,", but it was not found."),!t&&"Not currently tracking"]})}var S=n(2);function w(e){var t=Object(c.useState)(e),n=Object(i.a)(t,2),s=n[0],r=n[1];return[s,function(e){e.preventDefault(),r((function(t){var n=Object(S.a)({},t);return n[e.target.id]=e.target.value,n}))},r]}var k=n(14);function y(e){var t=e.login,n=w({formLoginUsername:"",formLoginPassword:""}),c=Object(i.a)(n,2),s=c[0],r=c[1];return Object(b.jsxs)(k.a,{className:"loginForm",children:[Object(b.jsx)("h4",{children:"Login"}),Object(b.jsxs)(k.a.Group,{className:"mb-3",controlId:"formLoginUsername",children:[Object(b.jsx)(k.a.Label,{children:"Username"}),Object(b.jsx)(k.a.Control,{onChange:r,type:"text",placeholder:"Username"})]}),Object(b.jsxs)(k.a.Group,{className:"mb-3",controlId:"formLoginPassword",children:[Object(b.jsx)(k.a.Label,{children:"Password"}),Object(b.jsx)(k.a.Control,{onChange:r,type:"password",placeholder:"Password"})]}),Object(b.jsx)(p.a,{variant:"success",type:"submit",onClick:function(e){e.preventDefault();var n=s.formLoginUsername,c=s.formLoginPassword;l.a.post("/api/auth/login",{username:n,rawPassword:c}).then((function(e){return t(e.data.username)}))},children:"Submit"})]})}function C(e){var t=e.login,n=w({formRegisterUsername:"",formRegisterPassword:""}),c=Object(i.a)(n,2),s=c[0],r=c[1];return Object(b.jsxs)(k.a,{className:"registerForm",children:[Object(b.jsx)("h4",{children:"Register"}),Object(b.jsxs)(k.a.Group,{className:"mb-3",controlId:"formRegisterUsername",children:[Object(b.jsx)(k.a.Label,{children:"Username"}),Object(b.jsx)(k.a.Control,{onChange:r,type:"text",placeholder:"Username"})]}),Object(b.jsxs)(k.a.Group,{className:"mb-3",controlId:"formRegisterPassword",children:[Object(b.jsx)(k.a.Label,{children:"Password"}),Object(b.jsx)(k.a.Control,{onChange:r,type:"password",placeholder:"Password"})]}),Object(b.jsx)(p.a,{variant:"success",type:"submit",onClick:function(e){e.preventDefault();var n=s.formRegisterUsername,c=s.formRegisterPassword;l.a.post("/api/users",{username:n,rawPassword:c}).then((function(e){return t(e.data.username)}))},children:"Create account"})]})}n(127);function D(e){var t=e.login,n=Object(c.useState)(!0),s=Object(i.a)(n,2),r=s[0],a=s[1],o=r?Object(b.jsx)(y,{login:t}):Object(b.jsx)(C,{login:t}),l=r?"Don't have an account yet?":"Already have a Capensis account?",j=r?"Sign up":"Sign in";return Object(b.jsx)("div",{className:"Authentication",children:Object(b.jsxs)("div",{id:"Authentication_background",children:[Object(b.jsxs)("div",{id:"Authentication_welcome",children:[Object(b.jsx)(v,{className:"auth-logo",hareOnly:!0,scale:2}),Object(b.jsx)("p",{className:"appName",children:"Capensis"}),Object(b.jsx)("p",{className:"welcomeMessage",children:"A super simple scheduler and time-tracker."})]}),o,Object(b.jsxs)("div",{className:"Authentication_switch",children:[Object(b.jsx)("p",{children:l}),Object(b.jsx)(p.a,{variant:"primary",size:"sm",onClick:function(e){e.preventDefault(),document.activeElement.blur(),a(!r)},children:j})]})]})})}var E=n(68),M=n.n(E),L=n(85),_=n(35),T=864e5;function I(e){var t=e.getDay(),n=T*t,c=e.valueOf()-n;return new Date(c)}function A(e){var t=new Date(e);return[t.getHours(),t.getMinutes()]}function P(){var e=Array.from(arguments).map((function(e){return 0===e?12:e>12?e-12:e}));return 1===e.length?e[0]:e}function H(e,t){return 60*e+t}function U(e){var t=e.values,n=e.block;return t?function(e){var t=Number(e.startHour)+Number(e.startAMPM),n=Number(e.startMinute),c=Number(e.endHour)+Number(e.endAMPM),s=Number(e.endMinute);return[H(t,n),H(c,s)]}(t):n?function(e){var t=new Date(e.start_time),n=new Date(e.end_time);return[H(t.getHours(),t.getMinutes()),H(n.getHours(),n.getMinutes())]}(n):void 0}function R(e,t){var n=new Date(e),c=new Date(t),s=c.getHours()-n.getHours();return(c.getMinutes()-n.getMinutes()+60*s)/15}function B(e,t){return new Date(e.start_time).getDate()===t.getDate()}var G={LANGUAGES:{EN_US:"EN_US"}};function F(e){if(5===e.length){var t=e.split(":"),n=t[0]>=12?"pm":"am";return t[0]-=t[0]>12?12:0,"".concat(t.join(":")," ").concat(n)}return new Date(e).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function z(e){return new Date(e).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit"})}function W(e,t){return e&&t?new Date(t).toLocaleDateString(e,{weekday:"long"}):""}function Y(e,t){return e&&t?new Date(t).toLocaleDateString(e,{month:"long",year:"numeric",day:"numeric"}):""}function V(e,t){if(!e||!t)return"";var n=I(t),c=function(e){var t=6-e.getDay(),n=T*t,c=e.valueOf()+n;return new Date(c)}(t),s=n.toLocaleDateString(e,{month:"long",day:"numeric"}),r=c.toLocaleDateString(e,{month:"long",day:"numeric"});return"".concat(s," \u2013 ").concat(r)}function J(e){return e<12?"am":"pm"}function K(e,t){var n,c,s=A(e),r=Object(i.a)(s,2),a=r[0],o=r[1],l=A(t),j=Object(i.a)(l,2),u=j[0],d=j[1],b=(c=u,J(n=a)===J(c)?["",J(n)]:["am","pm"]),h=Object(i.a)(b,2),O=h[0],m=h[1],f=P(a,u),x=Object(i.a)(f,2),p=x[0],v=x[1],g="".concat(p).concat(o?":"+o:"").concat(O),N="".concat(v).concat(d?":"+d:"").concat(m);return"".concat(g," \u2013 ").concat(N)}var q={EN_US:{TAG:"EN-US",NEW_BLOCK_VALIDATION:{conflict:function(e){var t=e.block,n=t.title,c=t.start_time,s=t.end_time,r=F(c),a=F(s);return"This time conflicts with another block: ".concat(n,", ").concat(r," - ").concat(a)},noProject:function(){return"You must select a project."},endBeforeStart:function(){return"That block would end on or before its start time."}}}};function Q(e){var t=e.show,n=e.handleClose,s=e.currentDay,r=e.projects,a=e.blocks,o=e.refreshData,j=w({project:"",startHour:"6",startMinute:"00",startAMPM:"0",endHour:"6",endMinute:"00",endAMPM:"0"}),u=Object(i.a)(j,2),d=u[0],h=u[1],O=function(e,t,n){var s=Object(c.useState)({}),r=Object(i.a)(s,2),a=r[0],o=r[1],l=Object(c.useState)(!1),j=Object(i.a)(l,2),u=j[0],d=j[1];return Object(c.useEffect)((function(){var c=U({values:e}),s=Object(i.a)(c,2),r=s[0],a=s[1],l=t&&t.filter((function(e){return B(e,n)})).map((function(e){var t=U({block:e}),n=Object(i.a)(t,2),c=n[0],s=n[1];return{block:e,start:r>=c&&r<s,end:a>c&&a<=s}})).filter((function(e){return e.start||e.end}))[0],j={};e.project||(j.noProject=!0),r>=a&&(j.endBeforeStart=!0),l&&(j.conflict=l),o(j)}),[e,t,n]),Object(c.useEffect)((function(){var e=0===Object.values(a).length;d(e)}),[a]),[a,u]}(d,a,s),m=Object(i.a)(O,2),f=m[0],x=m[1],v=Object(c.useState)(!1),g=Object(i.a)(v,2),N=g[0],S=g[1],k=G.LANGUAGES.EN_US,y=s&&s.toDateString(),C=r&&Object.values(r).reverse().map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.title},e.id)})),D=function(){for(var e=[],t=1;t<=12;t++)e.push(Object(b.jsx)("option",{value:12===t?0:t,children:t},12===t?0:t));return e}(),E=Object.keys(f).map((function(e){return Object(b.jsx)("li",{children:q[k].NEW_BLOCK_VALIDATION[e](f[e])},e)})),T=function(){var e=Object(L.a)(M.a.mark((function e(t){var c,r,a,j,u,b,h,O;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),x?(S(!1),c=U({values:d}),r=Object(i.a)(c,2),a=r[0],j=r[1],u=new Date(s),b=new Date(s),u.setHours(0,a),b.setHours(0,j),h=u.toISOString(),O=b.toISOString(),l.a.post("/api/blocks",{startTime:h,endTime:O,project:d.project}).then(o).then(n)):S(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(_.a,{show:t,onHide:n,children:[Object(b.jsx)(_.a.Header,{closeButton:!0,children:Object(b.jsx)(_.a.Title,{children:"Schedule a new Block"})}),Object(b.jsxs)(_.a.Body,{children:["Date: ",Object(b.jsx)("strong",{children:y}),Object(b.jsxs)("form",{onSubmit:T,children:[Object(b.jsxs)("div",{className:"row row-cols-sm-auto g-5 align-items-center",children:[Object(b.jsx)("label",{htmlFor:"project",children:"Project"}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)("select",{className:"form-select",name:"project",id:"project",value:d.project,onChange:h,children:[Object(b.jsx)("option",{value:"",children:"Select a project"}),C]})})]}),Object(b.jsxs)("div",{className:"row row-cols-lg-auto g-2 mt-1 align-items-center",children:[Object(b.jsx)("label",{htmlFor:"startHour",children:"Starting at:"}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsx)("select",{className:"form-select",name:"startHour",id:"startHour",value:d.startHour,onChange:h,children:D})}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)("select",{className:"form-select",name:"startMinute",id:"startMinute",value:d.startMinute,onChange:h,children:[Object(b.jsx)("option",{children:"00"}),Object(b.jsx)("option",{children:"15"}),Object(b.jsx)("option",{children:"30"}),Object(b.jsx)("option",{children:"45"})]})}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)("select",{className:"form-select",name:"startAMPM",id:"startAMPM",value:d.startAMPM,onChange:h,children:[Object(b.jsx)("option",{value:"0",children:"AM"}),Object(b.jsx)("option",{value:"12",children:"PM"})]})}),N&&f.conflict&&f.conflict.start&&Object(b.jsx)("small",{id:"passwordHelpBlock",className:"form-text text-muted",children:"That start time conflicts with an existing Block!"})]}),Object(b.jsxs)("div",{className:"row row-cols-lg-auto g-2 mt-1 align-items-center",children:[Object(b.jsx)("label",{children:"Ending at:"}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsx)("select",{className:"form-select",name:"endHour",id:"endHour",value:d.endHour,onChange:h,children:D})}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)("select",{className:"form-select",name:"endMinute",id:"endMinute",value:d.endMinute,onChange:h,children:[Object(b.jsx)("option",{children:"00"}),Object(b.jsx)("option",{children:"15"}),Object(b.jsx)("option",{children:"30"}),Object(b.jsx)("option",{children:"45"})]})}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)("select",{className:"form-select",name:"endAMPM",id:"endAMPM",value:d.endAMPM,onChange:h,children:[Object(b.jsx)("option",{value:"0",children:"AM"}),Object(b.jsx)("option",{value:"12",children:"PM"})]})}),N&&f.conflict&&f.conflict.end&&Object(b.jsx)("small",{id:"passwordHelpBlock",className:"form-text text-muted",children:"That end time conflicts with an existing Block!"})]})]})]}),N&&0!==E.length&&Object(b.jsx)(_.a.Footer,{children:Object(b.jsx)("ul",{children:E})}),Object(b.jsxs)(_.a.Footer,{children:[Object(b.jsx)(p.a,{variant:"secondary",onClick:n,children:"Close"}),Object(b.jsx)(p.a,{variant:"primary",onClick:T,children:"Submit"})]})]})})}n(129),n(130),n(131);var X=n(5),Z=n.n(X);function $(e){var t=e.id,n=e.title,c=e.project_id,s=e.length,r=e.start_time,a=e.end_time,i=K(r,a),o=-1===c,l=o?"1rem":"".concat(s,"rem"),j=Z()("block","list-group-item",{spacer:o,project:!o,short:1===s,"hour-end":o&&0===A(a)[1],"hour-start":o&&0===A(r)[1]});return Object(b.jsx)("li",{id:t,className:j,style:{height:l},projectid:c,children:!o&&Object(b.jsxs)("div",{className:"block-body",children:[Object(b.jsx)("p",{children:n}),Object(b.jsx)("span",{className:"text-muted",children:i})]})})}function ee(e){var t=e.blocks,n=e.day,s=t&&n&&t.map((function(e){return Object(c.createElement)($,Object(S.a)(Object(S.a)({},e),{},{key:e.id,length:R(e.start_time,e.end_time)}))}));return Object(b.jsx)("ul",{className:"blockList list-group list-group-flush",children:s})}n(132);function te(e){var t,n,c=function(e){var t=e.hour;return Object(b.jsxs)("li",{className:"ScheduleBarSection list-group-item text-muted",children:[P(t),J(t)]},t)};return Object(b.jsx)("ul",{className:"ScheduleBar list-group list-group-flush",children:(t=0,n=24,new Array(n-t).fill(void 0).map((function(e,n){return Object(b.jsx)(c,{hour:t+n},n)})))})}function ne(e){var t=q[G.LANGUAGES.EN_US].TAG,n=e.blocks,s=e.day,r=e.goToTomorrow,a=e.goToYesterday,o=e.showForm,l=Object(c.useState)([]),j=Object(i.a)(l,2),u=j[0],d=j[1],h=W(t,s),O=Y(t,s);return Object(c.useEffect)((function(){var e=[],t=new Date(s);t.setHours(0);var c=new Date(s);for(c.setHours(23,59),n.forEach((function(n){for(var c=new Date(n.start_time);t<c;){var s={id:"p".concat(t.getHours()).concat(t.getMinutes()||"00"),title:F(t),project_id:-1,start_time:t.toISOString()};t.setMinutes(t.getMinutes()+15),s.end_time=t.toISOString(),e.push(s)}e.push(n),t=new Date(n.end_time)}));t<c;){var r={id:"p".concat(t.getHours()).concat(t.getMinutes()||"00"),title:F(t),project_id:-1,start_time:t.toISOString()};t.setMinutes(t.getMinutes()+15),r.end_time=t.toISOString(),e.push(r)}d(e)}),[n,s]),Object(b.jsxs)("div",{className:"daySchedule",children:[Object(b.jsxs)("div",{className:"dayScheduleHeader p-1",children:[Object(b.jsxs)("div",{className:"dayScheduleHeader_internal",children:[Object(b.jsx)(p.a,{variant:"info",onClick:a,children:"<"}),Object(b.jsx)(p.a,{variant:"info",onClick:r,children:">"}),Object(b.jsxs)("div",{className:"dayScheduleHeader_date",children:[Object(b.jsx)("h3",{children:h}),Object(b.jsx)("small",{className:"text-muted",children:O})]})]}),Object(b.jsx)(p.a,{variant:"primary",onClick:o,children:"New Block"})]}),Object(b.jsxs)("div",{className:"dayScheduleInternal mt-1",children:[Object(b.jsx)(te,{}),Object(b.jsx)(ee,{blocks:u,day:s})]})]})}function ce(e){return Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"WeekSchedule component"})})}var se=n(7);function re(e){var t=e.id,n=e.title,c=e.selected,s=e.onEditClick,r=e.onCancelClick,a=e.onSubmit,i=e.formValue,o=e.handleChange;return Object(b.jsxs)("li",{className:"list-group-item d-flex justify-content-between bg-light",children:[Object(b.jsx)("span",{children:Object(b.jsx)("strong",{children:n})}),c&&Object(b.jsxs)("form",{className:"row row-cols-sm-auto g-3 align-items-center",onSubmit:a,children:[Object(b.jsxs)("div",{className:"col-12",children:[Object(b.jsx)("label",{className:"visually-hidden",htmlFor:"newName",children:"New name: "}),Object(b.jsx)("input",{type:"text",className:"form-control form-control-sm",id:"newName",value:i,onChange:o})]}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsx)("button",{className:"btn btn-sm btn-secondary",children:"Submit"})}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsx)("button",{className:"btn btn-sm btn-danger",onClick:r,children:"Cancel"})})]}),!c&&Object(b.jsx)("button",{className:"btn btn-sm btn-info",onClick:s,children:"Rename"})]},t)}function ae(e){var t=e.projects,n=e.setProjects,s=Object(c.useState)(null),r=Object(i.a)(s,2),a=r[0],o=r[1],j=Object(c.useState)(null),u=Object(i.a)(j,2),d=u[0],h=u[1],O=Object(c.useState)(!1),m=Object(i.a)(O,2),f=m[0],x=m[1],p=Object(c.useState)(""),v=Object(i.a)(p,2),g=v[0],N=v[1],w=function(e){e.preventDefault(),o(null)},k=function(e){h(e.target.value)},y=t&&Object.values(t).map((function(e){return Object(b.jsx)(re,Object(S.a)(Object(S.a)({},e),{},{selected:e.id===a,onEditClick:function(){return o(e.id)},onCancelClick:w,onSubmit:function(c){return function(e,c){e.preventDefault();var s=null!==d?d:t[c].title;o(null),h(null);var r=Object(S.a)(Object(S.a)({},t[c]),{},{title:s});n((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(se.a)({},c,r))})),l.a.patch("/api/projects/".concat(c),{title:s})}(c,e.id)},handleChange:k,formValue:null===d?e.title:d}))}));return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h3",{children:"My Projects"}),Object(b.jsx)("ul",{className:"list-group",children:y}),Object(b.jsxs)("div",{className:"newProject",children:[!f&&Object(b.jsx)("button",{className:"btn btn-primary",onClick:function(){return x(!0)},children:"Add a Project"}),f&&Object(b.jsxs)("form",{className:"row row-cols-lg-auto g-3",onSubmit:function(e){e.preventDefault(),l.a.post("/api/projects",{projectTitle:g}).then((function(e){var t=e.data;n((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(se.a)({},t.id,t))}))})).then((function(){N(""),x(!1)}))},children:[Object(b.jsxs)("div",{className:"col-12",children:[Object(b.jsx)("label",{className:"visually-hidden",htmlFor:"newProject",children:"New project name:"}),Object(b.jsx)("input",{className:"form-control",type:"text",id:"newProject",value:g,onChange:function(e){N(e.target.value)}})]}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsx)("button",{className:"btn btn-success",type:"submit",children:"Submit"})}),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsx)("button",{className:"btn btn-danger",type:"button",onClick:function(e){e.preventDefault(),N(""),x(!1)},children:"Cancel"})})]})]})]})}n(133);var ie=n(61);function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return new Promise((function(n,c){setTimeout((function(){n(e())}),t)}))}var le=n(57),je={STABLE:"stable",EDITING:"editing",SUBMITTING:"submitting",DELETING:"deleting",CONFIRM:"confirm",SUCCESS:"success",FAILURE:"failure"};n(134);function ue(e){return Object(b.jsx)("div",{className:"success-icon",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Success!"})})}n(135);var de="EN-US";function be(e,t){var n=e.status,s=e.id,r=e.title,a=e.start,o=e.end,l=e.refDay,j=e.changeTimes,u=e.submit,d=e.deleteItem,O=e.setStatus,m=Object(c.useRef)(null),f=Object(c.useRef)(null);Object(c.useImperativeHandle)(t,(function(){return{focusTime:function(){f.current.focus()},scroll:function(){m.current.scrollIntoView(!1)}}})),Object(c.useEffect)((function(){document.activeElement.blur(),n===je.EDITING&&f.current.focus()}),[n]);var x=function(e,t){var n=e.split(":").map((function(e){return Number(e)})),c=Object(i.a)(n,2),s=c[0],r=c[1],a=t.split(":").map((function(e){return Number(e)})),o=Object(i.a)(a,2),l=o[0]-s,j=o[1]-r;return j<0&&(l--,j+=60),(l?"".concat(l,"h "):"")+"".concat(j,"m")}(a,o),v=W(de,l),g=Y(de,l),N={stable:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p.a,{variant:"outline-secondary",size:"sm",onClick:function(){return O(je.EDITING)},children:"Edit"}),Object(b.jsx)(p.a,{variant:"outline-danger",size:"sm",onClick:d,children:"Delete"})]}),editing:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p.a,{onClick:u,variant:"success",size:"sm",type:"submit",children:"Save"}),Object(b.jsx)(p.a,{onClick:function(){return O(je.STABLE)},variant:"danger",size:"sm",children:"Cancel"})]}),submitting:Object(b.jsx)(h,{iconOnly:!0,children:"Saving..."}),deleting:"",success:Object(b.jsx)(ue,{}),failure:"Submit failed."};return Object(b.jsxs)(le.a,{as:"a",href:"#".concat(s),className:"session-item ".concat(n),children:[Object(b.jsxs)("div",{ref:m,className:"session-item-content",children:[r&&Object(b.jsx)("strong",{className:"session-item-title",children:r}),Object(b.jsxs)("div",{className:"session-item-date",children:[Object(b.jsx)("strong",{children:v}),Object(b.jsx)("span",{className:"text-muted",children:g})]}),Object(b.jsx)("div",{className:"session-item-time",children:n===je.EDITING?Object(b.jsxs)("form",{children:[Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"start",children:"Start"}),Object(b.jsx)("input",{ref:f,id:"start",type:"time",onChange:j,value:a})]}),Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"end",children:"End"}),Object(b.jsx)("input",{id:"end",type:"time",onChange:j,value:o}),Object(b.jsxs)("span",{className:"text-muted",children:["(",x,")"]})]})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("span",{children:[F(a)," to ",F(o)]}),Object(b.jsxs)("span",{className:"text-muted",children:["(",x,")"]})]})})]}),Object(b.jsx)("div",{className:"session-item-status ".concat(n),children:N[n]})]})}var he=be=Object(c.forwardRef)(be);function Oe(e){var t=e.id,n=e.start_time,s=e.end_time,r=e.refreshData,a=Object(c.useState)(je.STABLE),o=Object(i.a)(a,2),j=o[0],u=o[1],d=w({start:z(n),end:z(s)}),h=Object(i.a)(d,2),O=h[0],m=h[1],f=Object(c.useRef)(null);return Object(c.useEffect)((function(){console.log(j),j===je.SUCCESS&&setTimeout((function(){return u(je.STABLE)}),2500)}),[j]),Object(b.jsx)(he,{status:j,refDay:n,start:O.start,end:O.end,changeTimes:m,submit:function(e){return function(e,t){e.preventDefault();var c=O.start.split(":"),s=Object(i.a)(c,2),a=s[0],o=s[1],j=O.end.split(":"),d=Object(i.a)(j,2),b=d[0],h=d[1],m=new Date(n),x=new Date(n);m.setHours(a,o),x.setHours(b,h),m<x&&(u((function(){return je.SUBMITTING})),l.a.patch("/api/sessions/".concat(t),{start_time:m.toISOString(),end_time:x.toISOString()}).then((function(){return oe(r)})).then((function(){return f.current.scroll()})).then((function(){return u(je.SUCCESS)})).catch((function(){return u(je.ERROR)})))}(e,t)},deleteItem:function(e){return function(e,t){e.preventDefault(),l.a.delete("/api/sessions/".concat(t)).then((function(){return u(je.DELETING)})).then((function(){return oe(r)})).catch((function(){return u(je.ERROR)}))}(e,t)},setStatus:u,id:t,ref:f})}function me(e){var t=e.title,n=e.sessions,s=e.refreshData,r=n.map((function(e){return Object(c.createElement)(Oe,Object(S.a)(Object(S.a)({},e),{},{key:e.id,refreshData:s}))}));return Object(b.jsxs)(ie.a,{className:"session-list",children:[Object(b.jsx)(ie.a.Item,{className:"session-item header",children:t}),r.length?r:Object(b.jsx)(ie.a.Item,{className:"session-item empty",children:"No time tracked for this project!"})]})}n(136);function fe(e){var t=e.day,n=e.sessions,c=void 0===n?[]:n,s=e.projects,r=void 0===s?[]:s,a=e.refreshData,i=e.lastWeek,o=e.nextWeek,l=Object.values(r).map((function(e){return Object(b.jsx)(me,{title:e.title,sessions:c.filter((function(t){return t.project_id===e.id})),refreshData:a})}));return Object(b.jsxs)("section",{className:"sessions",children:[Object(b.jsxs)("header",{children:[Object(b.jsxs)("nav",{children:[Object(b.jsx)(p.a,{variant:"info",onClick:i,children:"<"}),Object(b.jsx)(p.a,{variant:"info",onClick:o,children:">"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Sessions"}),Object(b.jsx)("span",{className:"text-muted",children:V("EN-US",t)})]})]}),l]})}n(137),n(79),n(138);function xe(e){var t=e.color,n=e.style,c=e.percent,s=e.overfilled,r=t.clone();r.alpha=.25;var a={backgroundColor:"".concat(r.toString())},i={backgroundColor:t.toString(),width:c};return Object(b.jsx)("div",{className:"progressbar-outer ".concat(n," ").concat(s),style:a,children:Object(b.jsx)("div",{className:"progressbar-inner ".concat(n," ").concat(s),style:i})})}var pe=n(42),ve={RED:new pe.a("#ff0000"),GREEN:new pe.a("#00ff00"),BLUE:new pe.a("#0000ff"),PURPLE:new pe.a("#ff00ff"),EGYPT_BLUE:new pe.a("#1034A6")};function ge(e,t){var n=e/t*100;return Math.round(10*n)/10}function Ne(e){var t,n=e.color,c=void 0===n?ve.EGYPT_BLUE:n,s=e.title,r=e.progress,a=e.goal,i=c.lightness>30?"light":"dark",o=r>a,l=o?"overfilled":"",j=o?ge(a,r):ge(r,a),u="".concat((t=j)<1?1:100===t?101:t,"%"),d=o?u:"100%",h=o?"100%":u,O={backgroundColor:c.toString()};return Object(b.jsxs)("div",{className:"report-item ".concat(i," ").concat(l),children:[Object(b.jsxs)("div",{className:"report-item-header",style:{width:d},children:[Object(b.jsx)("p",{className:"report-item-project ".concat(i),style:O,children:Object(b.jsx)("strong",{children:s})}),Object(b.jsx)("p",{className:"report-item-goal",children:Object(b.jsxs)("small",{children:[Object(b.jsx)("strong",{children:"Goal:"})," ",a," hours"]})})]}),Object(b.jsx)(xe,{color:c,overfilled:l,style:i,percent:u}),Object(b.jsx)("p",{className:"report-item-footer",style:{width:h},children:Object(b.jsxs)("small",{children:[Object(b.jsx)("strong",{children:"Tracked:"})," ",Math.round(100*r)/100," hours"]})})]})}function Se(e){var t=e.projects,n=e.day,s=e.lastWeek,r=e.nextWeek,a=Object(c.useState)([]),o=Object(i.a)(a,2),j=o[0],u=o[1],d=Object(c.useState)(!0),O=Object(i.a)(d,2),m=O[0],f=O[1],x=Object(c.useState)(),v=Object(i.a)(x,2),g=v[0],N=v[1];Object(c.useEffect)((function(){l.a.get("/api/reports/week?date=".concat(n.toISOString())).then((function(e){return u(e.data)})).catch((function(e){return N(e)})).finally((function(){return f(!1)}))}),[t,n]);var S=j.map((function(e){var n=e.project_id,c=e.sessions_total,s=e.blocks_total,r=t[n]&&t[n].title,a=1/3600,i=c*a||0,o=s*a||0;return Object(b.jsx)(Ne,{title:r,progress:i,goal:o},n)}));return Object(b.jsxs)("div",{className:"report",children:[Object(b.jsxs)("div",{class:"report-header",children:[Object(b.jsx)(p.a,{variant:"info",onClick:s,children:"<"}),Object(b.jsx)(p.a,{variant:"info",onClick:r,children:">"}),Object(b.jsx)("h3",{children:V("EN-US",n)}),Object(b.jsx)("span",{className:"text-muted",children:n.getFullYear()})]}),m&&Object(b.jsx)(h,{children:"Loading report..."}),!m&&g&&Object(b.jsx)("p",{children:g.message}),!m&&!g&&j.length>0&&Object(b.jsx)("ul",{children:S}),!m&&!g&&!j.length&&Object(b.jsx)("div",{className:"report-empty",children:Object(b.jsx)("p",{children:"You don't have anything scheduled this week!"})})]})}function we(){return Object(b.jsxs)("div",{className:"Footer",children:["Created by Paul Ladd. Check out the project on ",Object(b.jsx)("a",{href:"https://github.com/itspladd/capensis",children:"GitHub"}),"!"]})}function ke(){var e=function(){var e,t=new Date;(e=t).setHours(12),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);var n=Object(c.useState)(t),s=Object(i.a)(n,2),r=s[0],a=s[1];return[r,function(e){var t=864e5*e,n=new Date(r.valueOf()+t);a(n)}]}(),t=Object(i.a)(e,2),n=t[0],s=t[1],r=function(e){var t=Object(c.useState)(I(e).valueOf()),n=Object(i.a)(t,2),s=n[0],r=n[1];return Object(c.useEffect)((function(){r(I(e).valueOf())}),[e]),[s]}(n),a=Object(i.a)(r,1)[0],o=function(){var e=Object(c.useState)(!0),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),a=Object(i.a)(r,2),o=a[0],j=a[1];return Object(c.useEffect)((function(){console.log("authenticating"),l.a.post("/api/auth").then((function(e){j(e.data.username),s(!1)}))}),[]),[n,o,function(e){j(e)},function(e){e.preventDefault(),l.a.post("/api/auth/logout").then((function(e){return j(e.data.username)}))}]}(),d=Object(i.a)(o,4),O=d[0],m=d[1],f=d[2],x=d[3],p=function(e,t){var n=Object(c.useState)([]),s=Object(i.a)(n,2),r=s[0],a=s[1],o=Object(c.useState)([]),j=Object(i.a)(o,2),u=j[0],d=j[1],b=function(){var e=new Date(t).toISOString();console.log("loading weekly data..."),console.log("sundayStr is:",e),l.a.get("/api/blocks/week?date=".concat(e)).then((function(e){return a(e.data)})),l.a.get("/api/sessions/week?date=".concat(e)).then((function(e){return d(e.data)}))};return Object(c.useEffect)(b,[e,t]),[r,u,b]}(m,a),v=Object(i.a)(p,3),S=v[0],w=v[1],k=v[2],y=function(e,t){var n=Object(c.useState)(null),s=Object(i.a)(n,2),r=s[0],a=s[1];return Object(c.useEffect)((function(){l.a.get("/api/sessions/current").then((function(e){e.data[0]&&a(e.data[0])}))}),[e]),[r,function(e){var n=e.target.closest(".block");if(n){var c=Number(n.getAttribute("projectid"));r&&l.a.patch("/api/sessions",{session_id:r.id}).then(t),r&&c===r.project_id?a(null):l.a.post("/api/sessions",{project_id:c}).then((function(e){return a(e.data)}))}}]}(m,k),C=Object(i.a)(y,2),E=C[0],M=C[1],L=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1];return[function(){return s(!0)},function(){return s(!1)},n]}(),_=Object(i.a)(L,3),T=_[0],A=_[1],P=_[2],H=Object(c.useState)({}),U=Object(i.a)(H,2),R=U[0],G=U[1];return Object(c.useEffect)((function(){l.a.get("/api/projects").then((function(e){var t={};e.data.projects.forEach((function(e){return t[e.id]=e})),G(t)}))}),[m]),Object(b.jsxs)("div",{className:"App",onClick:M,children:[O&&Object(b.jsx)(h,{children:"Loading..."}),!O&&!m&&Object(b.jsx)(D,{login:f}),!O&&m&&Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(j.BrowserRouter,{basename:"/capensis",children:[Object(b.jsx)(g,{username:m,handleLogout:x,currentSession:E}),Object(b.jsx)(N,{currentSession:E,projects:R}),Object(b.jsx)(Q,{show:P,handleClose:A,currentDay:n,projects:R,blocks:S,refreshData:k}),Object(b.jsx)("div",{className:"App-body mt-1",children:Object(b.jsxs)(u.g,{children:[Object(b.jsx)(u.d,{exact:!0,path:["/","/schedule"],children:Object(b.jsx)(ne,{blocks:S.filter((function(e){return B(e,n)})),day:n,goToTomorrow:function(){return s(1)},goToYesterday:function(){return s(-1)},showForm:T})}),Object(b.jsx)(u.d,{exact:!0,path:"/week",children:Object(b.jsx)(ce,{})}),Object(b.jsx)(u.d,{exact:!0,path:"/projects",children:Object(b.jsx)(ae,{projects:R,setProjects:G})}),Object(b.jsx)(u.d,{exact:!0,path:"/sessions",children:Object(b.jsx)(fe,{sessions:w,projects:R,day:n,lastWeek:function(){return s(-7)},nextWeek:function(){return s(7)},refreshData:k})}),Object(b.jsx)(u.d,{exact:!0,path:"/reports",children:Object(b.jsx)(Se,{projects:R,day:n,lastWeek:function(){return s(-7)},nextWeek:function(){return s(7)}})})]})})]})}),Object(b.jsx)(we,{})]})}l.a.defaults.baseURL="https://capensis-api.herokuapp.com",l.a.defaults.withCredentials=!0,a.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(ke,{})}),document.getElementById("root"))},79:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){}},[[139,1,2]]]);
//# sourceMappingURL=main.503ac32c.chunk.js.map