(this.webpackJsonpcapensis=this.webpackJsonpcapensis||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"check",(function(){return qe})),n.d(c,"login",(function(){return $e})),n.d(c,"logout",(function(){return et}));var r={};n.r(r),n.d(r,"add",(function(){return tt}));var s={};n.r(s),n.d(s,"get",(function(){return nt})),n.d(s,"getWeek",(function(){return ct})),n.d(s,"add",(function(){return rt})),n.d(s,"edit",(function(){return st})),n.d(s,"del",(function(){return at}));var a={};n.r(a),n.d(a,"get",(function(){return it})),n.d(a,"getWeek",(function(){return ot})),n.d(a,"getActive",(function(){return lt})),n.d(a,"add",(function(){return ut})),n.d(a,"stop",(function(){return jt})),n.d(a,"edit",(function(){return dt})),n.d(a,"del",(function(){return bt}));var i={};n.r(i),n.d(i,"get",(function(){return Ot})),n.d(i,"add",(function(){return ht})),n.d(i,"edit",(function(){return ft}));var o={};n.r(o),n.d(o,"get",(function(){return mt})),n.d(o,"getWeek",(function(){return pt}));n(86);var l=n(1),u=n.n(l),j=n(24),d=n.n(j),b=(n(91),n(92),n(47)),O=n(9),h=(n(93),n(80)),f=n(0);function m(e){var t=e.iconOnly;return Object(f.jsxs)("div",{className:"loading",children:[Object(f.jsx)(h.a,{animation:"border",variant:"primary",role:"status",children:Object(f.jsx)("span",{className:"visually-hidden",children:e.children})}),!t&&e.children&&Object(f.jsx)("p",{children:e.children})]})}var p=n(39),x=n(83),v=n(43),g=n(42),S=n(13),E=(n(103),n(2)),N=(n(104),n(3));function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],c=Object(N.a)(t,2),r=c[0],s=c[1],a=t.map((function(t){return t*e})),i=Object(N.a)(a,2),o=i[0],l=i[1],u=Object(N.a)(n,2),j=u[0],d=u[1],b="".concat(j," ").concat(d," ").concat(r," ").concat(s),O="".concat(o,"px"),h="".concat(l,"px");return{viewBox:b,width:O,height:h}}function T(e){var t=e.className,n=e.hareOnly,c=e.scale,r=k(void 0===c?1:c,[77,n?48:65]);return Object(f.jsx)("div",{className:t,children:Object(f.jsxs)("svg",Object(E.a)(Object(E.a)({},r),{},{children:[Object(f.jsx)("path",{d:"m 57.361851,0.00779235 c -4.01701,0.004 -8.06578,0.19957 -11.98118,1.16335995 -4.78258,0.8796 -9.74801,1.1765 -14.25797,3.14795 -3.09877,1.19352 -6.29356,2.46094 -8.7127,4.81844 -2.7705,2.2294797 -5.60536,4.3862397 -8.32466,6.6743997 -1.40146,0.78769 -2.99375,1.2529 -4.2156301,2.33883 -2.65423,1.86781 -5.22584,4.00714 -6.91635,6.82183 -1.19926,1.11653 -1.52069,3.39482 -0.0633,4.4392 1.14,0.81447 2.47709,1.30863 3.83306,1.62628 2.01304,-0.11472 4.0149701,-0.36991 6.0275101,-0.49143 1.77655,2.23261 3.04142,4.80663 4.40433,7.29772 0.64946,1.21874 -0.25521,2.46118 -1.51411,2.6308 -1.64442,0.46517 -3.28844,-0.29321 -4.92681,-0.42153 -3.3331601,-0.54907 -7.0894401,-0.42228 -9.88205011,1.70372 -1.35316,0.52871 -0.94367,2.25694 0.42280001,2.36933 1.81457,0.30455 3.54713,1.40282 5.44632,1.02542 4.9009101,-0.12947 9.8662201,-0.034 14.6694601,-1.16597 2.42444,0.0281 4.83772,0.38118 7.26575,0.26066 5.15597,-0.0215 10.30789,0.40165 15.46354,0.25118 1.0775,-0.38501 2.03638,0.0291 2.72619,0.86285 2.2857,1.65921 5.2125,2.0065 7.95871,2.07466 2.36194,-0.10072 4.72233,-0.61928 6.85706,-1.64948 0.54924,-0.79125 1.47448,-0.83249 2.33141,-0.69274 3.00451,0.0239 6.19737,0.20899 8.95937,-1.18298 1.73172,-0.95122 3.00509,-2.71784 3.21745,-4.69904 0.4238,-2.23848 0.65319,-4.81244 -0.73532,-6.77443 -1.154,-0.73141 -2.65814,0.0563 -3.88979,0.25806 -0.7944,0.20144 -1.42317,1.18492 -1.91994,1.44538 -1.97553,-1.86041 -3.65461,-4.28702 -6.35613,-5.14173 -3.70559,-1.50739 -7.49919,-3.18272 -11.5784,-3.16668 -4.4822,-0.17203 -9.12094,0.0336 -13.32085,1.74874 -1.15076,0.53642 -1.80113,1.99815 -3.22896,1.81025 -0.98667,0.0139 -2.1518,0.48663 -2.51515,-0.74805 -1.14654,-1.4998 -2.85301,-2.52208 -4.6766,-2.96616 1.89085,-1.73694 4.5842,-1.85861 6.99555,-2.19144 3.94803,-0.27759 7.40536,-2.38347 10.79623,-4.22948 1.84268,-1.04937 3.83523,-1.79162 5.67607,-2.84334 3.18858,-1.66937 6.32016,-3.45256 9.32789,-5.42998 1.38248,-0.78013 3.01035,-0.89313 4.56019,-0.83627 0.80497,-0.005 3.14619,-0.068 2.31047,-1.3126997 -0.85229,-0.56304 -1.87789,-0.84804 -2.86493,-1.09406 -2.92585,-0.61054 -5.92423,-0.20053 -8.88318,-0.33529 -1.33872,0.33717 -0.13302,-1.40167 0.0578,-1.98966 0.96719,-1.89075 2.61018,-3.31646 4.32477,-4.51316995 0.45331,-1.25911 -1.45856,-0.79823 -2.20669,-0.89482 -0.22039,-2e-5 -0.44086,7.9e-4 -0.66118,0.001 z m -1.84718,1.52054995 c -2.07027,1.58057 -3.34944,4.00999 -3.92327,6.51519 -2.26634,0.71083 -4.65987,0.83327 -6.97211,1.3363 -3.50647,0.50854 -7.04454,1.0347697 -10.37484,2.2950497 -3.79102,1.19153 -7.28448,3.33446 -10.00061,6.24259 -0.96349,0.91609 -2.0655,1.70665 -2.84949,2.79563 0.82199,0.75625 2.3656,0.4527 3.25073,0.11744 2.36241,-1.91581 4.35696,-4.29008 7.00151,-5.84978 4.38352,-2.72918 9.52375,-3.90235 14.59819,-4.48859 3.13754,-0.5661197 6.26336,-1.2223397 9.41382,-1.7015397 2.00829,-0.0865 4.02412,0.0118 6.01563,0.28352 -1.66207,0.30713 -3.47483,0.51521 -4.76802,1.7211997 -3.39045,2.23193 -6.98134,4.14837 -10.58296,6.00746 -3.92449,1.47143 -7.21317,4.45604 -11.40713,5.22587 -2.88723,0.39207 -5.81743,0.81946 -8.51264,1.98241 -0.82909,0.65003 -2.74272,1.42207 -2.21036,2.66804 0.82435,0.54629 1.89909,0.53577 2.7622,1.04115 1.29249,0.5971 2.43576,1.58348 3.0745,2.87022 1.01644,0.71336 2.32989,0.16624 3.47565,0.28809 1.72819,-0.0996 3.53372,0.11044 5.19353,-0.45158 1.1247,-0.74386 1.86716,-2.08433 3.27201,-2.369 2.78981,-1.16397 5.86948,-0.70111 8.80272,-0.67326 3.97674,0.24988 7.59229,2.07977 11.19225,3.62042 1.73863,1.14374 3.14838,2.6984 4.5137,4.2502 0.29847,0.96488 -0.11625,2.09014 -0.73993,2.83665 -1.11832,1.33001 -2.22119,2.67487 -3.24344,4.08081 -1.38246,-1.27382 -1.87513,-3.20964 -3.23085,-4.51269 -1.913,-2.27026 -3.94119,-4.49018 -6.38898,-6.1968 -0.99529,-0.46795 -3.21539,-0.78062 -3.22995,0.79238 0.0888,1.48717 1.08473,3.05195 0.26477,4.4924 -1.21004,1.31607 -2.95718,1.96683 -4.51226,2.78964 -1.21562,0.74771 -2.59063,1.23989 -4.03129,1.24509 -3.12787,-0.0112 -6.33407,0.096 -9.3557,-0.85714 -1.48665,-0.44939 -2.87612,-1.14683 -4.23652,-1.88379 -0.83777,-0.47921 -1.79459,-0.32288 -2.67529,-0.0958 -0.6819,0.0251 -1.25028,0.58275 -0.83676,1.20625 -0.31002,1.82039 -1.99921,3.09189 -3.73103,3.44583 -4.30082,1.31904 -8.84919,0.8659 -13.2780201,0.98997 -1.26633,-0.0872 -2.39871,-0.7235 -3.61751,-1.01452 1.04829,-0.78244 2.37176,-1.63369 3.732,-1.18219 3.4993601,0.52572 7.1927501,1.30556 10.6380201,0.0811 1.18583,-0.61006 2.72924,-1.26239 2.96032,-2.7459 -0.46526,-2.52759 -2.26556,-4.47764 -3.34839,-6.73783 -0.90275,-1.44498 -1.81697,-2.8873 -2.86469,-4.23303 -1.41655,-0.22397 -2.74882,0.53257 -3.80994,1.38872 -1.5909901,0.83692 -3.3855201,-0.0286 -4.8210501,-0.79279 -1.10258,-0.47242 -0.97964,-1.92798 -0.1981,-2.63597 1.57739,-2.42276 3.53709,-4.63764 5.9903601,-6.20103 1.45991,-1.04578 2.96079,-2.0997 4.68625,-2.65728 2.23358,-1.78108 4.34572,-3.7157 6.68929,-5.35658 2.46401,-1.9284097 4.75177,-4.2598997 7.7968,-5.2545997 4.28821,-1.91026 8.87702,-3.12162 13.54568,-3.59989 3.46805,-0.5604 6.9352,-1.36469 10.46951,-1.26038 0.0996,0.0212 0.9521,-0.16887 0.41169,0.14231 z m 17.36865,33.3068697 c 0.0367,2.30536 0.3497,4.86675 -1.08692,6.85558 -1.03919,1.30947 -2.73655,2.20449 -4.43547,1.93817 -0.77409,-0.0357 -2.35655,0.006 -2.63063,-0.31995 1.44068,-0.682 1.91811,-2.3697 3.11885,-3.33132 1.65015,-1.74184 3.51339,-3.27865 5.03417,-5.14248 z m -18.65857,1.63553 c 1.89376,1.84451 3.36743,4.07325 4.60172,6.39918 1.14731,0.66685 0.28648,1.98917 -0.58412,2.41876 -1.7177,0.90563 -3.75229,0.60871 -5.54983,0.13333 -1.57252,-0.41737 -3.28366,-1.11929 -4.12892,-2.59456 -0.60015,-1.22762 -0.006,-2.8826 1.30953,-3.34283 1.45745,-0.81343 3.27245,-1.63389 3.7069,-3.41383 -0.0339,-0.51019 0.49391,0.38559 0.64472,0.39995 z"}),Object(f.jsx)("path",{d:"m 12.329021,22.078982 c -1.53898,-0.19975 -2.9326201,0.99592 -3.4488701,2.37371 1.03832,0.74091 2.3559401,-0.0447 3.5171501,0.20167 1.10195,-0.23557 1.81943,-1.32642 2.49593,-2.09479 -0.19378,-1.02995 -1.86981,-0.23781 -2.56421,-0.48059 z"}),!n&&Object(f.jsx)("path",{d:"m 41.320781,53.934512 c -1.40125,0.78499 -1.74836,2.50759 -2.81328,3.61549 -0.54628,0.52518 -1.12113,2.32572 -1.85898,1.1312 -0.99802,-1.0459 -1.42941,-2.52936 -2.47688,-3.51771 -1.05875,-0.45875 -2.22973,-0.60244 -3.30927,-1.01111 -1.00454,0.34948 -1.46107,1.68494 -2.24136,2.43888 -0.72305,0.77802 -1.3659,2.08327 -2.17983,2.50056 -1.28091,-0.86629 -2.00461,-2.27914 -3.01922,-3.40477 -1.53291,-0.42713 -3.13117,-0.52765 -4.71406,-0.58619 -1.23892,0.37568 -0.78236,2.05893 -1.65531,2.82457 -0.53006,0.56784 -1.25698,1.56753 -1.88229,1.65653 -1.04478,-1.21346 -1.77582,-2.71889 -3.09471,-3.67928 -1.55435,-0.14566 -3.0901001,-0.46848 -4.6527101,-0.52851 -0.95407,0.82512 -1.33418,2.16121 -2.4715,2.81253 -1.24373,0.96895 -2.76247,1.45994 -4.21143001,2.02862 -0.52278,0.89239 1.31170001,0.81997 1.89302001,1.01211 2.36823,0.30118 4.73041,-0.52072 6.74571,-1.71431 1.0553301,1.08072 1.8212801,2.49002 3.1791401,3.24085 1.97214,0.13451 4.01717,-0.0199 5.87244,-0.73258 1.0757,-0.53612 1.81234,-1.53666 2.82566,-2.1632 1.13214,0.76403 1.84709,1.96098 2.79884,2.91321 1.8464,1.09668 4.1529,0.17238 5.62525,-1.13985 0.89454,-0.36716 1.6536,-1.38208 2.27333,-1.7991 1.96495,1.67864 4.53365,2.97082 7.18297,2.61568 1.7278,-0.57505 2.8921,-2.07087 3.97931,-3.44579 1.10633,0.83674 2.06865,2.1019 3.55441,2.21905 1.94462,0.78768 4.06283,0.29677 6.08162,0.20851 0.64608,-0.41299 1.55284,-2.06258 2.1616,-0.69412 1.18284,1.41226 3.19601,1.18788 4.84478,1.18443 1.32356,-0.094 2.76166,0.29071 3.98817,-0.36572 0.93274,-0.6761 1.95892,-1.22012 2.90053,-1.8892 1.21219,1.00965 2.47732,1.96052 3.82504,2.78277 1.46934,-0.28286 3.02681,-0.0991 4.43605,-0.67576 0.0567,-1.06956 -1.55488,-1.28159 -2.13541,-2.05824 -1.44175,-1.16132 -2.76005,-2.63955 -3.21549,-4.47847 0.14008,-1.18198 -1.39882,-0.37674 -2.05677,-0.47105 -1.14293,0.0913 -2.30712,-0.0929 -3.43396,0.17663 -0.59929,2.03753 -1.93267,4.01717 -3.9945,4.77686 -0.92214,-0.59454 -1.28493,-1.90533 -1.80722,-2.87819 -0.34563,-1.29888 -1.6878,-1.39474 -2.78254,-1.63421 -1.08069,-0.2315 -2.18366,-0.4016 -3.29198,-0.36773 -0.27593,0.98221 0.72671,2.3642 -0.66327,2.90621 -0.91095,0.58095 -2.25552,1.95606 -3.08972,0.60435 -1.09768,-1.02434 -2.11666,-2.14674 -2.9248,-3.41632 -1.13714,-0.26061 -2.30091,-0.40997 -3.39498,-0.83283 -0.26022,-0.0762 -0.52479,-0.14653 -0.7964,-0.1648 z"})]}))})}var A=Object(l.createContext)(null),y=Object(l.createContext)(null);function C(){var e=Object(l.useContext)(A),t=Object(l.useContext)(y);return Object(f.jsx)(v.a,{className:"navbar",variant:"dark",expand:"sm",children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(p.LinkContainer,{to:"/schedule",children:Object(f.jsx)(v.a.Brand,{href:"/",children:Object(f.jsx)(T,{className:"nav-logo",scale:"0.75"})})}),Object(f.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(f.jsxs)(v.a.Collapse,{id:"basic-navbar-nav",children:[Object(f.jsxs)(g.a,{className:"me-auto",children:[Object(f.jsx)(p.LinkContainer,{to:"/schedule",children:Object(f.jsx)(g.a.Link,{children:"Schedule"})}),Object(f.jsx)(p.LinkContainer,{to:"/projects",children:Object(f.jsx)(g.a.Link,{children:"Projects"})}),Object(f.jsx)(p.LinkContainer,{to:"/sessions",children:Object(f.jsx)(g.a.Link,{children:"Sessions"})}),Object(f.jsx)(p.LinkContainer,{to:"/reports",children:Object(f.jsx)(g.a.Link,{children:"Reports"})})]}),Object(f.jsxs)(v.a.Text,{children:[Object(f.jsxs)("span",{className:"me-2",children:["Logged in as ",e.user.username]}),Object(f.jsx)(S.a,{onClick:function(e){e.preventDefault(),t.auth.logout()},children:"Logout"})]})]})]})})}n(107);function w(){var e=Object(l.useContext)(A),t=e.trackedSession,n=e.projects,c=e.loaded.data.tracking,r=t&&n[t.project_id],s=r&&n[t.project_id].title;return Object(f.jsxs)("div",{className:"statusBar ".concat(t?"bg-success text-light":t?void 0:"bg-secondary text-light"),children:[!c&&"Loading...",t&&r&&"Currently tracking ".concat(s),t&&!r&&"ERROR: Trying to track project ID ".concat(t.project_id,", but it was not found."),!t&&"Not currently tracking"]})}function D(e){var t=Object(l.useState)(e),n=Object(N.a)(t,2),c=n[0],r=n[1];return[c,function(e){e.preventDefault(),r((function(t){var n=Object(E.a)({},t);return n[e.target.id]=e.target.value,n}))},r]}var L=n(12);function M(){var e=Object(l.useContext)(y).auth.login,t=D({formLoginUsername:"",formLoginPassword:""}),n=Object(N.a)(t,2),c=n[0],r=n[1];return Object(f.jsxs)(L.a,{className:"loginForm",children:[Object(f.jsx)("h4",{children:"Login"}),Object(f.jsxs)(L.a.Group,{className:"mb-3",controlId:"formLoginUsername",children:[Object(f.jsx)(L.a.Label,{children:"Username"}),Object(f.jsx)(L.a.Control,{onChange:r,type:"text",placeholder:"Username"})]}),Object(f.jsxs)(L.a.Group,{className:"mb-3",controlId:"formLoginPassword",children:[Object(f.jsx)(L.a.Label,{children:"Password"}),Object(f.jsx)(L.a.Control,{onChange:r,type:"password",placeholder:"Password"})]}),Object(f.jsx)(S.a,{variant:"success",type:"submit",onClick:function(t){t.preventDefault();var n=c.formLoginUsername,r=c.formLoginPassword;e(n,r)},children:"Submit"})]})}function _(){var e=Object(l.useContext)(y).auth.register,t=D({formRegisterUsername:"",formRegisterPassword:""}),n=Object(N.a)(t,2),c=n[0],r=n[1];return Object(f.jsxs)(L.a,{className:"registerForm",children:[Object(f.jsx)("h4",{children:"Register"}),Object(f.jsxs)(L.a.Group,{className:"mb-3",controlId:"formRegisterUsername",children:[Object(f.jsx)(L.a.Label,{children:"Username"}),Object(f.jsx)(L.a.Control,{onChange:r,type:"text",placeholder:"Username"})]}),Object(f.jsxs)(L.a.Group,{className:"mb-3",controlId:"formRegisterPassword",children:[Object(f.jsx)(L.a.Label,{children:"Password"}),Object(f.jsx)(L.a.Control,{onChange:r,type:"password",placeholder:"Password"})]}),Object(f.jsx)(S.a,{variant:"success",type:"submit",onClick:function(t){t.preventDefault();var n=c.formRegisterUsername,r=c.formRegisterPassword;e(n,r)},children:"Create account"})]})}n(108);function I(){var e=Object(l.useState)(!0),t=Object(N.a)(e,2),n=t[0],c=t[1],r=n?Object(f.jsx)(M,{}):Object(f.jsx)(_,{}),s=n?"Don't have an account yet?":"Already have a Capensis account?",a=n?"Make one!":"Sign in!";return Object(f.jsxs)("div",{className:"authentication",children:[Object(f.jsxs)("div",{id:"auth_welcome",children:[Object(f.jsxs)("div",{className:"app_name",children:[Object(f.jsx)(T,{className:"auth-logo",hareOnly:!0,scale:2}),Object(f.jsx)("p",{children:"Capensis"})]}),Object(f.jsx)("p",{id:"app_description",children:"A super simple scheduler and time-tracker."})]}),Object(f.jsxs)("section",{id:"auth_body",children:[r,Object(f.jsxs)("div",{className:"authentication_switch",children:[Object(f.jsx)("p",{className:"text-muted",children:s}),Object(f.jsx)("button",{onClick:function(e){e.preventDefault(),document.activeElement.blur(),c(!n)},children:a})]})]})]})}n(109),n(110);function R(e){var t=e.nav,n=e.back,c=e.forward,r=e.title,s=e.subtitle,a=e.actions,i=Object.keys(a).map((function(e){return Object(f.jsx)(S.a,{size:"sm",onClick:a[e],children:e},e)}));return Object(f.jsxs)("header",{className:"page_header p-1",children:[Object(f.jsxs)("div",{children:[t&&Object(f.jsxs)("nav",{children:[Object(f.jsx)(S.a,{variant:"info",onClick:n,children:"<"}),Object(f.jsx)(S.a,{variant:"info",onClick:c,children:">"})]}),Object(f.jsxs)("div",{className:"page_header_title",children:[Object(f.jsx)("h3",{children:r}),s&&Object(f.jsx)("small",{className:"text-muted",children:s})]})]}),Object(f.jsx)("div",{className:"page_header_actions",children:0!==i.length&&i})]})}R.defaultProps={title:"Untitled Page",actions:{}};var P=R,U=(n(111),n(112),n(5)),B=n.n(U),G=864e5;function H(e){var t=e.getDay(),n=G*t,c=e.valueOf()-n;return new Date(c)}function F(e){var t=new Date(e);return[t.getHours(),t.getMinutes()]}function W(e,t){var n,c,r=new Date(e),s=r.getHours();return n=J(s),c=r.getMinutes(),t&&0===s?[0,c,0]:t&&12===s?[0,c,12]:[n,c,s>12?12:0]}function J(){var e=Array.from(arguments).map((function(e){return 0===e?12:e>12?e-12:e}));return 1===e.length?e[0]:e}function V(e,t){return 60*e+t}function Z(e){var t=e.values,n=e.block;return t?function(e){var t=Number(e.startHour)+Number(e.startAMPM),n=Number(e.startMinute),c=Number(e.endHour)+Number(e.endAMPM),r=Number(e.endMinute);return[V(t,n),V(c,r)]}(t):n?function(e){var t=new Date(e.start_time),n=new Date(e.end_time);return[V(t.getHours(),t.getMinutes()),V(n.getHours(),n.getMinutes())]}(n):void 0}function Y(e,t){var n=new Date(e),c=new Date(t),r=c.getHours()-n.getHours();return(c.getMinutes()-n.getMinutes()+60*r)/15}function z(e,t){return new Date(e.start_time).getDate()===t.getDate()}function Q(e,t){return new Date(e).valueOf()-new Date(t).valueOf()}var X={EN_US:{TAG:"EN-US",NEW_BLOCK_VALIDATION:{conflicts:function(e){var t=e.map((function(e){var t=e.block,n=t.title,c=t.start_time,r=t.end_time,s=q(c),a=q(r);return"".concat(n,", ").concat(s," - ").concat(a)}));return t.length&&t.unshift("That time conflicts with other block(s):"),t},noProject:function(){return"You must select a project."},endBeforeStart:function(){return"That block would end on or before its start time."}},FORM_VALID:"Looks good!",FORM_ERRORS:"The following errors were found:",FORM_EDITING:"Edit Block",FORM_NEW:"Schedule New Block"}};function K(e){return e.split(" ").join(String.fromCharCode(160))}function q(e){if(5===e.length){var t=e.split(":"),n=Number(t[0]),c=n>=12?"pm":"am";return 0===n&&(t[0]=12),n>12&&(t[0]=n-12),"".concat(t.join(":")," ").concat(c)}return new Date(e).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function $(e){return e=e||Date.now(),new Date(e).toLocaleTimeString([],{hourCycle:"h23",hour:"2-digit",minute:"2-digit"})}function ee(e,t){return e&&t?new Date(t).toLocaleDateString(e,{weekday:"long"}):""}function te(e,t){return e&&t?new Date(t).toLocaleDateString(e,{month:"long",year:"numeric",day:"numeric"}):""}function ne(e,t){if(!e||!t)return"";var n=H(t),c=function(e){var t=6-e.getDay(),n=G*t,c=e.valueOf()+n;return new Date(c)}(t),r=n.toLocaleDateString(e,{month:"long",day:"numeric"}),s=c.toLocaleDateString(e,{month:"long",day:"numeric"});return"".concat(K(r)," \u2013 ").concat(K(s))}function ce(e){return e<12?"am":"pm"}function re(e,t){var n,c,r=F(e),s=Object(N.a)(r,2),a=s[0],i=s[1],o=F(t),l=Object(N.a)(o,2),u=l[0],j=l[1],d=(c=u,ce(n=a)===ce(c)?["",ce(n)]:["am","pm"]),b=Object(N.a)(d,2),O=b[0],h=b[1],f=J(a,u),m=Object(N.a)(f,2),p=m[0],x=m[1],v="".concat(p).concat(i?":"+i:"").concat(O),g="".concat(x).concat(j?":"+j:"").concat(h);return"".concat(v," \u2013 ").concat(g)}n(113);function se(e){var t=e.fill,n=e.dimensions,c=e.offset,r=e.scale,s=void 0===r?1:r,a=e.onClick,i=e.children,o=k(s,n,c);return Object(f.jsx)("button",{className:"icon-button",onClick:a,children:Object(f.jsx)("svg",Object(E.a)(Object(E.a)({fill:t},o),{},{children:i}))})}function ae(e){var t=e.id,n=e.title,c=e.spacer,r=e.length,s=e.start_time,a=e.end_time,i=e.toggle,o=e.edit,l=e.deleteBlock,u=re(s,a),j=c?"1rem":"".concat(r,"rem"),d=B()("block","list-group-item",{spacer:c,project:!c,tiny:1===r,short:2===r,"hour-end":c&&0===W(a)[1],"hour-start":c&&0===W(s)[1]}),b=c?function(e){e.preventDefault()}:i;return Object(f.jsx)("li",{id:t,className:d,style:{height:j},onClick:b,children:!c&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"block-body",children:[Object(f.jsx)("p",{children:n}),Object(f.jsx)("span",{className:"text-muted",children:u})]}),Object(f.jsxs)("div",{className:"block-controls",children:[Object(f.jsx)(se,{fill:"green",dimensions:[24,24],onClick:function(e){e.preventDefault(),e.stopPropagation(),o()},children:Object(f.jsx)("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})}),Object(f.jsx)(se,{fill:"red",dimensions:[24,24],onClick:function(e){e.preventDefault(),e.stopPropagation(),l(t)},children:Object(f.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})]})]})})}function ie(e){var t=e.blocks,n=e.day,c=e.toggleSession,r=e.editBlock,s=e.dataActions,a=t&&n&&t.map((function(e){return Object(l.createElement)(ae,Object(E.a)(Object(E.a)({},e),{},{edit:function(){return r(e)},key:e.id,spacer:-1===e.project_id,toggle:function(){return c(e.project_id)},length:Y(e.start_time,e.end_time),deleteBlock:s.deleteBlock}))}));return Object(f.jsx)("div",{className:"blockList",children:Object(f.jsx)("ul",{className:"list-group list-group-flush",children:a})})}n(114);function oe(e){var t,n,c=function(e){var t=e.hour;return Object(f.jsxs)("li",{className:"ScheduleBarSection list-group-item text-muted",children:[J(t),ce(t)]},t)};return Object(f.jsx)("ul",{className:"ScheduleBar list-group list-group-flush",children:(t=0,n=24,new Array(n-t).fill(void 0).map((function(e,n){return Object(f.jsx)(c,{hour:t+n},n)})))})}var le=n(67),ue=n.n(le),je=n(85);function de(e){return!!e&&(Array.isArray(e)?e.length>0:"object"!==typeof e||Object.values(e).length>0)}var be={project:"",startHour:"6",startMinute:"00",startAMPM:"0",endHour:"6",endMinute:"00",endAMPM:"0"};function Oe(e,t,n){var c=Object(l.useState)(!1),r=Object(N.a)(c,2),s=r[0],a=r[1],i=Object(l.useState)(null),o=Object(N.a)(i,2),u=o[0],j=o[1],d=Object(l.useState)(!1),b=Object(N.a)(d,2),O=b[0],h=b[1],f=D(be),m=Object(N.a)(f,3),p=m[0],x=m[1],v=m[2],g=function(e,t,n,c){var r=Object(l.useState)({}),s=Object(N.a)(r,2),a=s[0],i=s[1],o=Object(l.useState)(!1),u=Object(N.a)(o,2),j=u[0],d=u[1];return Object(l.useEffect)((function(){var r=Z({values:e}),s=Object(N.a)(r,2),a=s[0],o=s[1],l=t.filter((function(e){return z(e,n)})).filter((function(e){return e.id!==c})).map((function(e){var t=Z({block:e}),n=Object(N.a)(t,2),c=n[0],r=n[1];return{block:e,start:a>=c&&a<r,end:o>c&&o<=r}})).filter((function(e){return e.start||e.end})),u={noProject:!e.project,endBeforeStart:a>=o,conflicts:l};i(u)}),[e,t,n,c]),Object(l.useEffect)((function(){var e=0===Object.values(a).filter(de).length;d(e)}),[a]),[a,j]}(p,e,t,u),S=Object(N.a)(g,2),E=S[0],k=S[1],T=function(){return a(!0)},A=function(){return a(!1)};return[{show:s,values:p,errors:E,showErrors:O,editing:!!u,valid:k},{new:function(){v(be),j(null),T()},edit:function(e){var t=e.id,n=e.start_time,c=e.end_time,r=e.project_id,s=W(n,!0),a=Object(N.a)(s,3),i=a[0],o=a[1],l=a[2],u=W(c,!0),d=Object(N.a)(u,3),b=d[0],O=d[1],h=d[2];v({startHour:i,startMinute:o,startAMPM:l,endHour:b,endMinute:O,endAMPM:h,project:r}),j(t),T()},close:A,change:x,submit:function(){var e=Object(je.a)(ue.a.mark((function e(c){var r,s,a,i,o,l,j,d,b;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.preventDefault(),k?(h(!1),r=Z({values:p}),s=Object(N.a)(r,2),a=s[0],i=s[1],o=new Date(t),l=new Date(t),o.setHours(0,a),l.setHours(0,i),j=o.toISOString(),d=l.toISOString(),b={startTime:j,endTime:d,project:p.project},u&&(b.id=u),(u?n.editBlock:n.scheduleBlock)(b).then(A)):h(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]}var he=n(40),fe={LANGUAGES:{EN_US:"EN_US"}};function me(e,t){return Object(f.jsx)("li",{className:"form-text text-muted",children:Object(f.jsx)("small",{children:e})},"e".concat(t))}var pe=function(){var e=0,t=function t(n,c,r){return Object(f.jsxs)(l.Fragment,{children:[!r&&Object(f.jsx)("small",{children:c}),r&&me(c),Object(f.jsx)("ul",{className:"error_list",children:n.map((function(e,n){return Array.isArray(e)?t(e.slice(1),e[0],!0):me(e,n)}))})]},e++)};return function(e,n){return t(e,n)}}();n(116),n(117);var xe=fe.LANGUAGES.EN_US;function ve(e){var t=e.currentDay,n=e.projects,c=void 0===n?{}:n,r=e.state,s=e.actions,a=r||{},i=a.errors,o=void 0===i?{}:i,l=a.show,u=a.showErrors,j=a.valid,d=a.values,b=void 0===d?{}:d,O=a.editing,h=s||{},m=h.submit,p=h.close,x=h.change,v=t&&t.toDateString(),g=Object.keys(o).filter((function(e){return de(o[e])})).map((function(e){return t=e,n=o[e],X[xe].NEW_BLOCK_VALIDATION[t](n);var t,n})),E=pe(g,X[xe].FORM_ERRORS),N=function(e){return Object.values(e).reverse().map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.title},e.id)}))}(c),k=function(){for(var e=[],t=1;t<=12;t++)e.push(Object(f.jsx)("option",{value:12===t?0:t,children:t},12===t?0:t));return e}(),T=O?X[xe].FORM_EDITING:X[xe].FORM_NEW;return Object(f.jsxs)(he.a,{className:"block_form_modal",show:l,onHide:p,centered:!0,children:[Object(f.jsx)(he.a.Header,{closeButton:!0,children:Object(f.jsx)(he.a.Title,{children:T})}),Object(f.jsx)(he.a.Body,{children:Object(f.jsxs)("form",{className:"block_form",onSubmit:m,children:[Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("legend",{children:"Date:"}),Object(f.jsx)("strong",{children:v})]}),Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("legend",{children:"Project:"}),Object(f.jsx)("label",{className:"visually-hidden",htmlFor:"project",children:"Project:"}),Object(f.jsxs)("select",{className:"form-select",name:"project",id:"project",value:b.project,onChange:x,children:[Object(f.jsx)("option",{value:"",children:"Select a project"}),N]})]}),Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("legend",{children:"Starting at:"}),Object(f.jsxs)("ul",{children:[Object(f.jsx)("label",{className:"visually-hidden",htmlFor:"startHour",children:"Start hour"}),Object(f.jsx)("select",{className:"form-select",name:"startHour",id:"startHour",value:b.startHour,onChange:x,children:k}),Object(f.jsx)("label",{className:"visually-hidden",htmlFor:"startMinute",children:"Start minute"}),Object(f.jsxs)("select",{className:"form-select",name:"startMinute",id:"startMinute",value:b.startMinute,onChange:x,children:[Object(f.jsx)("option",{children:"00"}),Object(f.jsx)("option",{children:"15"}),Object(f.jsx)("option",{children:"30"}),Object(f.jsx)("option",{children:"45"})]}),Object(f.jsx)("label",{className:"visually-hidden",htmlFor:"startAMPM",children:"Start AM/PM"}),Object(f.jsxs)("select",{className:"form-select",name:"startAMPM",id:"startAMPM",value:b.startAMPM,onChange:x,children:[Object(f.jsx)("option",{value:"0",children:"AM"}),Object(f.jsx)("option",{value:"12",children:"PM"})]})]})]}),Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("legend",{children:"Ending at:"}),Object(f.jsxs)("ul",{children:[Object(f.jsx)("label",{className:"visually-hidden",htmlFor:"endHour",children:"End hour"}),Object(f.jsx)("select",{className:"form-select",name:"endHour",id:"endHour",value:b.endHour,onChange:x,children:k}),Object(f.jsx)("label",{className:"visually-hidden",htmlFor:"endMinute",children:"End minute"}),Object(f.jsxs)("select",{className:"form-select",name:"endMinute",id:"endMinute",value:b.endMinute,onChange:x,children:[Object(f.jsx)("option",{children:"00"}),Object(f.jsx)("option",{children:"15"}),Object(f.jsx)("option",{children:"30"}),Object(f.jsx)("option",{children:"45"})]}),Object(f.jsx)("label",{className:"visually-hidden",htmlFor:"endAMPM",children:"End AM/PM"}),Object(f.jsxs)("select",{className:"form-select",name:"endAMPM",id:"endAMPM",value:b.endAMPM,onChange:x,children:[Object(f.jsx)("option",{value:"0",children:"AM"}),Object(f.jsx)("option",{value:"12",children:"PM"})]})]})]}),u&&Object(f.jsx)("section",{children:j?Object(f.jsx)("small",{children:X[xe].FORM_VALID}):E})]})}),Object(f.jsxs)(he.a.Footer,{children:[Object(f.jsx)(S.a,{variant:"secondary",onClick:p,children:"Close"}),Object(f.jsx)(S.a,{variant:"primary",onClick:m,children:"Submit"})]})]})}function ge(e){var t=X[fe.LANGUAGES.EN_US].TAG,n=Object(l.useContext)(A),c=Object(l.useContext)(y),r=Object(l.useState)([]),s=Object(N.a)(r,2),a=s[0],i=s[1],o=Oe(n.blocks,n.day,c.data),u=Object(N.a)(o,2),j=u[0],d=u[1],b=ee(t,n.day),O=te(t,n.day);Object(l.useEffect)((function(){var e=[],t=new Date(n.day);t.setHours(0);var c=new Date(n.day);for(c.setHours(23,59),n.blocks.filter((function(e){return z(e,n.day)})).forEach((function(n){for(var c=new Date(n.start_time);t<c;){var r={id:"p".concat(t.getHours()).concat(t.getMinutes()||"00"),title:q(t),project_id:-1,start_time:t.toISOString()};t.setMinutes(t.getMinutes()+15),r.end_time=t.toISOString(),e.push(r)}e.push(n),t=new Date(n.end_time)}));t<c;){var r={id:"p".concat(t.getHours()).concat(t.getMinutes()||"00"),title:q(t),project_id:-1,start_time:t.toISOString()};t.setMinutes(t.getMinutes()+15),r.end_time=t.toISOString(),e.push(r)}i(e)}),[n.blocks,n.day]);var h={"New Block":d.new};return Object(f.jsxs)("div",{className:"daySchedule",children:[Object(f.jsx)(ve,{state:j,actions:d,currentDay:n.day,projects:n.projects}),Object(f.jsx)(P,{nav:!0,back:function(){return c.date.changeDay(-1)},forward:function(){return c.date.changeDay(1)},title:b,subtitle:O,actions:h}),Object(f.jsxs)("div",{className:"dayScheduleInternal mt-1",children:[Object(f.jsx)(oe,{}),Object(f.jsx)(ie,{blocks:a,day:n.day,toggleSession:c.data.toggleSession,dataActions:c.data,editBlock:d.edit})]})]})}function Se(e){return Object(f.jsx)("div",{children:Object(f.jsx)("p",{children:"WeekSchedule component"})})}function Ee(e){var t=e.id,n=e.title,c=e.selected,r=e.onEditClick,s=e.onCancelClick,a=e.onSubmit,i=e.formValue,o=e.handleChange;return Object(f.jsxs)("li",{className:"list-group-item d-flex justify-content-between bg-light",children:[Object(f.jsx)("span",{children:Object(f.jsx)("strong",{children:n})}),c&&Object(f.jsxs)("form",{className:"row row-cols-sm-auto g-3 align-items-center",onSubmit:a,children:[Object(f.jsxs)("div",{className:"col-12",children:[Object(f.jsx)("label",{className:"visually-hidden",htmlFor:"newName",children:"New name: "}),Object(f.jsx)("input",{type:"text",className:"form-control form-control-sm",id:"newName",value:i,onChange:o})]}),Object(f.jsx)("div",{className:"col-12",children:Object(f.jsx)("button",{className:"btn btn-sm btn-secondary",children:"Submit"})}),Object(f.jsx)("div",{className:"col-12",children:Object(f.jsx)("button",{className:"btn btn-sm btn-danger",onClick:s,children:"Cancel"})})]}),!c&&Object(f.jsx)("button",{className:"btn btn-sm btn-info",onClick:r,children:"Rename"})]},t)}n(118);function Ne(){var e=Object(l.useContext)(A),t=Object(l.useContext)(y),n=e.projects,c=Object(l.useState)(null),r=Object(N.a)(c,2),s=r[0],a=r[1],i=Object(l.useState)(null),o=Object(N.a)(i,2),u=o[0],j=o[1],d=Object(l.useState)(!1),b=Object(N.a)(d,2),O=b[0],h=b[1],m=Object(l.useState)(""),p=Object(N.a)(m,2),x=p[0],v=p[1],g=function(e){e.preventDefault(),a(null)},S=function(e){j(e.target.value)},k=n&&Object.values(n).map((function(e){return Object(l.createElement)(Ee,Object(E.a)(Object(E.a)({},e),{},{key:e.id,selected:e.id===s,onEditClick:function(){return a(e.id)},onCancelClick:g,onSubmit:function(c){return function(e,c){e.preventDefault();var r=null!==u?u:n[c].title;t.data.updateProject({id:c,title:r}).then((function(){a(null),j(null)}))}(c,e.id)},handleChange:S,formValue:null===u?e.title:u}))})),T={"New Project":function(){h(!0)}};return Object(f.jsxs)("div",{className:"projects",children:[Object(f.jsx)(P,{title:"Projects",actions:T}),Object(f.jsx)("ul",{className:"list-group",children:k}),Object(f.jsx)("div",{className:"newProject",children:O&&Object(f.jsxs)("form",{className:"row row-cols-lg-auto g-3",onSubmit:function(e){e.preventDefault(),t.data.addProject({title:x}).then((function(){v(""),h(!1)}))},children:[Object(f.jsxs)("div",{className:"col-12",children:[Object(f.jsx)("label",{className:"visually-hidden",htmlFor:"newProject",children:"New project name:"}),Object(f.jsx)("input",{className:"form-control",type:"text",id:"newProject",value:x,onChange:function(e){v(e.target.value)}})]}),Object(f.jsx)("div",{className:"col-12",children:Object(f.jsx)("button",{className:"btn btn-success",type:"submit",children:"Submit"})}),Object(f.jsx)("div",{className:"col-12",children:Object(f.jsx)("button",{className:"btn btn-danger",type:"button",onClick:function(e){e.preventDefault(),v(""),h(!1)},children:"Cancel"})})]})})]})}var ke=n(7),Te=(n(119),n(68));function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return new Promise((function(n,c){setTimeout((function(){n(e())}),t)}))}var ye=n(57),Ce={NEW:"new",ACTIVE:"active",STABLE:"stable",EDITING:"editing",LOADING:"loading",DELETING:"deleting",CONFIRM:"confirm",SUCCESS:"success",FAILURE:"failure",PROJECT:"project"};n(120);function we(e){return Object(f.jsx)(S.a,Object(E.a)(Object(E.a)({className:"tab"},e),{},{children:e.children}))}n(121);function De(e){return Object(f.jsx)("div",{className:"success-icon",children:Object(f.jsx)("span",{className:"visually-hidden",children:"Success!"})})}n(122);var Le="EN-US";function Me(e,t){var n,c=e.status,r=e.title,s=e.project,a=e.active,i=e.start,o=e.end,u=e.refDay,j=e.onChange,d=e.submit,b=e.deleteItem,O=e.setStatus,h=e.handleToggle,p=Object(l.useRef)(null),x=Object(l.useRef)(null);Object(l.useImperativeHandle)(t,(function(){return{focusTime:function(){x.current.focus()},scroll:function(){p.current.scrollIntoView(!1)}}}));var v="".concat(function(e,t){var n=e.split(":").map((function(e){return Number(e)})),c=Object(N.a)(n,2),r=c[0],s=c[1],a=t.split(":").map((function(e){return Number(e)})),i=Object(N.a)(a,2),o=i[0]-r,l=i[1]-s;return l<0&&(o--,l+=60),(o?"".concat(o,"h "):"")+"".concat(l,"m")}(i,o)).concat(a?", active":""),g=ee(Le,u),S=te(Le,u),k={active:Object(f.jsx)(we,{variant:"outline-dark",size:"sm",onClick:h,children:"Stop"}),stable:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(we,{variant:"outline-secondary",size:"sm",onClick:function(){return O(Ce.EDITING)},children:"Edit"}),Object(f.jsx)(we,{variant:"outline-danger",size:"sm",onClick:b,children:"Delete"})]}),editing:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(we,{onClick:d,variant:"success",size:"sm",type:"submit",children:"Save"}),Object(f.jsx)(we,{onClick:function(){return O(Ce.STABLE)},variant:"danger",size:"sm",children:"Cancel"})]}),loading:Object(f.jsx)(m,{iconOnly:!0,children:"Saving..."}),deleting:"",success:Object(f.jsx)(De,{}),failure:"Submit failed."},T=B()("session-item",(n={},Object(ke.a)(n,c,!0),Object(ke.a)(n,"active",a),Object(ke.a)(n,"project",s),n));return Object(f.jsxs)(ye.a,Object(E.a)(Object(E.a)({as:"a"},s&&{onClick:h}),{},{className:T,children:[Object(f.jsxs)("div",{ref:p,className:"session-item-content",children:[s&&Object(f.jsx)("strong",{className:"session-item-title",children:r}),s?Object(f.jsx)("span",{className:"text-muted",children:"Click to start tracking"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"session-item-date",children:[Object(f.jsx)("strong",{children:g}),Object(f.jsx)("span",{className:"text-muted",children:S})]}),Object(f.jsx)("div",{className:"session-item-time",children:c===Ce.EDITING?Object(f.jsxs)("form",{children:[Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("label",{htmlFor:"start",children:"Start"}),Object(f.jsx)("input",{ref:x,id:"start",type:"time",onChange:j,value:i})]}),Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("label",{htmlFor:"end",children:"End"}),Object(f.jsx)("input",{id:"end",type:"time",onChange:j,value:o}),Object(f.jsxs)("span",{className:"text-muted",children:["(",v,")"]})]})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("span",{children:[q(i)," to ",q(o)]}),Object(f.jsxs)("span",{className:"text-muted",children:["(",v,")"]})]})})]})]}),Object(f.jsx)("div",{className:"session-item-status ".concat(c),children:k[c]})]}))}var _e=Me=Object(l.forwardRef)(Me);function Ie(e){var t=e.id,n=e.start_time,c=e.end_time,r=e.checkListDelete,s=e.title,a=void 0===s?"":s,i=Object(l.useContext)(A),o=Object(l.useContext)(y),u=Object(l.useState)(Ce.NEW),j=Object(N.a)(u,2),d=j[0],b=j[1],O=D({start:$(n),end:$(c)}),h=Object(N.a)(O,3),m=h[0],p=h[1],x=h[2],v=Object(l.useRef)(null),g=n&&!c,S=!n&&!c;Object(l.useEffect)((function(){var e=g?setTimeout((function(){return b(Ce.ACTIVE)}),500):setTimeout((function(){return b(Ce.STABLE)}),500);return function(){clearTimeout(e)}}),[g]),Object(l.useEffect)((function(){x({start:$(n),end:$(c)}),c&&d!==Ce.SUCCESS&&b(Ce.STABLE)}),[n,c]),Object(l.useEffect)((function(){document.activeElement.blur(),d===Ce.EDITING&&v.current.focusTime()}),[d]);return Object(f.jsx)(_e,{status:d,title:a,active:g,project:S,refDay:n,start:m.start,end:m.end,onChange:p,submit:function(e){return function(e,t){e.preventDefault();var c=m.start.split(":"),r=Object(N.a)(c,2),s=r[0],a=r[1],i=m.end.split(":"),l=Object(N.a)(i,2),u=l[0],j=l[1],d=new Date(n),O=new Date(n);d.setHours(s,a),O.setHours(u,j),d<O&&(b((function(){return Ce.LOADING})),o.data.editSession(t,d.toISOString(),O.toISOString()).then((function(){return v.current.scroll()})).then((function(){return b(Ce.SUCCESS)})).then((function(){return Ae((function(){return b(Ce.STABLE)}),2500)})).catch((function(){return b(Ce.ERROR)})))}(e,t)},deleteItem:function(e){return function(e,t){e.preventDefault(),b(Ce.DELETING),r(),Ae((function(){return o.data.deleteSession(t)})).catch((function(){return b(Ce.ERROR)}))}(e,t)},handleToggle:function(e){e.preventDefault(),S&&(o.data.toggleSession(t),b(Ce.DELETING)),g&&(o.data.toggleSession(i.trackedSession.project_id),b(Ce.STABLE))},setStatus:b,ref:v})}function Re(e){var t=e.title,n=e.sessions,c=Object(l.useState)(),r=Object(N.a)(c,2),s=r[0],a=r[1],i=function(){1===n.length&&a(Ce.DELETING)},o=n.map((function(e){return Object(l.createElement)(Ie,Object(E.a)(Object(E.a)({},e),{},{key:e.id,checkListDelete:i}))})),u=B()("session-item","header",Object(ke.a)({},s,!0));return Object(f.jsxs)(Te.a,{className:"session-list",children:[Object(f.jsx)(Te.a.Item,{className:u,children:t}),o]})}function Pe(e,t){return t.filter((function(t){return t.project_id===e.id})).length>0}n(123);function Ue(){var e=Object(l.useContext)(A),t=Object(l.useContext)(y),n=e.projects,c=e.sessions,r=e.day,s=function(e,t){return Object.values(e).filter((function(e){return Pe(e,t)}))}(n,c).map((function(e){return Object(f.jsx)(Re,{title:e.title,sessions:c.filter((function(t){return t.project_id===e.id}))},e.id)})),a=function(e,t){return Object.values(e).filter((function(e){return!Pe(e,t)}))}(n,c);return Object(f.jsxs)("section",{className:"sessions",children:[Object(f.jsx)(P,{nav:!0,back:t.date.lastWeek,forward:t.date.nextWeek,title:"Sessions",subtitle:ne("EN-US",r)}),Object(f.jsxs)("article",{children:[s,a.length>0&&Object(f.jsx)(Re,{title:"Untracked Projects",sessions:a})]})]})}n(124),n(71),n(125);function Be(e){var t=e.color,n=e.style,c=e.percent,r=e.overfilled,s=t.clone();s.alpha=.25;var a={backgroundColor:"".concat(s.toString())},i={backgroundColor:t.toString(),width:c};return Object(f.jsx)("div",{className:"progressbar-outer ".concat(n," ").concat(r),style:a,children:Object(f.jsx)("div",{className:"progressbar-inner ".concat(n," ").concat(r),style:i})})}var Ge=n(41),He={RED:new Ge.a("#ff0000"),GREEN:new Ge.a("#00ff00"),BLUE:new Ge.a("#0000ff"),PURPLE:new Ge.a("#ff00ff"),EGYPT_BLUE:new Ge.a("#1034A6")};function Fe(e,t){var n=e/t*100;return Math.round(10*n)/10}function We(e){var t,n=e.color,c=void 0===n?He.EGYPT_BLUE:n,r=e.title,s=e.progress,a=e.goal,i=c.lightness>30?"light":"dark",o=s>a,l=o?"overfilled":"",u=o?Fe(a,s):Fe(s,a),j="".concat((t=u)<1?1:100===t?101:t,"%"),d=o?j:"100%",b=o?"100%":j,O={backgroundColor:c.toString()};return Object(f.jsxs)("div",{className:"report-item ".concat(i," ").concat(l),children:[Object(f.jsxs)("div",{className:"report-item-header",style:{width:d},children:[Object(f.jsx)("p",{className:"report-item-project ".concat(i),style:O,children:Object(f.jsx)("strong",{children:r})}),Object(f.jsx)("p",{className:"report-item-goal",children:Object(f.jsxs)("small",{children:[Object(f.jsx)("strong",{children:"Goal:"})," ",a," hours"]})})]}),Object(f.jsx)(Be,{color:c,overfilled:l,style:i,percent:j}),Object(f.jsx)("p",{className:"report-item-footer",style:{width:b},children:Object(f.jsxs)("small",{children:[Object(f.jsx)("strong",{children:"Tracked:"})," ",Math.round(100*s)/100," hours"]})})]})}function Je(){var e=Object(l.useContext)(A),t=Object(l.useContext)(y),n=e.loaded,c=e.day,r=e.reports,s=e.projects,a=!n.data.reports,i=!r.length,o=r.map((function(e){var t=e.project_id,n=e.sessions_total,c=e.blocks_total,r=s[t]&&s[t].title,a=1/3600,i=n*a||0,o=c*a||0;return Object(f.jsx)(We,{title:r,progress:i,goal:o},t)}));return Object(f.jsxs)("div",{className:"report",children:[Object(f.jsx)(P,{nav:!0,back:t.date.lastWeek,forward:t.date.nextWeek,title:"Report",subtitle:"".concat(ne("EN-US",c),", ").concat(c.getFullYear())}),a&&Object(f.jsx)(m,{children:"Loading report..."}),!a&&!i>0&&Object(f.jsx)("ul",{children:o}),!a&&i&&Object(f.jsx)("div",{className:"report-empty",children:Object(f.jsx)("p",{children:"You don't have anything scheduled this week!"})})]})}n(126);var Ve="https://github.com/itspladd/capensis";function Ze(){return Object(f.jsxs)("div",{id:"footer",children:[Object(f.jsxs)("p",{children:["Created by ",Object(f.jsx)("a",{href:"https://pladd.dev",children:"Paul Ladd"})]}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["Hosted on ",Object(f.jsx)("a",{href:Ve,children:"Github"})]}),Object(f.jsx)("a",{href:Ve,children:Object(f.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII=",alt:"GitHub logo"})})]})]})}function Ye(){var e=Object(l.useContext)(A),t=e.loaded.user,n=e.user;return Object(f.jsxs)("div",{className:"App",children:[!t&&Object(f.jsx)(m,{children:"Loading..."}),t&&!n&&Object(f.jsx)(I,{}),n&&Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(b.BrowserRouter,{basename:"/capensis",children:[Object(f.jsx)(C,{}),Object(f.jsx)(w,{}),Object(f.jsx)("div",{className:"App-body",children:Object(f.jsxs)(O.g,{children:[Object(f.jsx)(O.d,{exact:!0,path:["/","/schedule"],children:Object(f.jsx)(ge,{})}),Object(f.jsx)(O.d,{exact:!0,path:"/week",children:Object(f.jsx)(Se,{})}),Object(f.jsx)(O.d,{exact:!0,path:"/projects",children:Object(f.jsx)(Ne,{})}),Object(f.jsx)(O.d,{exact:!0,path:"/sessions",children:Object(f.jsx)(Ue,{})}),Object(f.jsx)(O.d,{exact:!0,path:"/reports",children:Object(f.jsx)(Je,{})})]})})]})}),Object(f.jsx)(Ze,{})]})}var ze=n(46),Qe=n.n(ze);function Xe(e){return Qe()(e).then((function(e){return e.data}))}var Ke={get:function(e,t){return Xe({method:"get",url:e,data:t})},post:function(e,t){return Xe({method:"post",url:e,data:t})},patch:function(e,t){return Xe({method:"patch",url:e,data:t})},del:function(e,t){return Xe({method:"delete",url:e,data:t})}};function qe(){return Ke.post("/api/auth")}function $e(e,t){return Ke.post("/api/auth/login",{username:e,rawPassword:t})}function et(){return Ke.post("/api/auth/logout")}function tt(e,t){return Ke.post("/api/users",{username:e,rawPassword:t})}function nt(){return Ke.get("/api/blocks/week")}function ct(e){return Ke.get("/api/blocks/week?date=".concat(e.toISOString()))}function rt(e){return Ke.post("/api/blocks",e)}function st(e){return Ke.patch("/api/blocks/".concat(e.id),e)}function at(e){return Ke.del("/api/blocks/".concat(e))}function it(){return Ke.get("/api/sessions/week")}function ot(e){return Ke.get("/api/sessions/week?date=".concat(e.toISOString()))}function lt(){return Ke.get("/api/sessions/current")}function ut(e){return Ke.post("/api/sessions",{project_id:e})}function jt(e){return Ke.patch("/api/sessions",{id:e})}function dt(e){return Ke.patch("/api/sessions/".concat(e.id),e)}function bt(e){return Ke.del("/api/sessions/".concat(e))}function Ot(){return Ke.get("/api/projects")}function ht(e){return Ke.post("/api/projects",{project:e})}function ft(e){return Ke.patch("/api/projects/".concat(e.id),{project:e})}function mt(){return Ke.get("/api/reports/week")}function pt(e){return Ke.get("/api/reports/week?date=".concat(e.toISOString()))}var xt,vt={auth:c,users:r,blocks:s,sessions:a,projects:i,reports:o},gt=n(18),St="SET_APP_DATA",Et={SET:"SET_DAY"},Nt={SET:"SET_LOADED",SET_WEEKLY_STATUS:"SET_WEEKLY_LOADING",SET_DATA_STATUS:"SET_DATA_LOADING"},kt={SET:"SET_USER",CLEAR:"CLEAR_USER"},Tt={SET:"SET_PROJECT",DELETE:"DELETE_PROJECT"},At={SET_ALL:"SET_BLOCKS",SET:"SET_BLOCK",DELETE:"DELETE_BLOCK"},yt={SET_ALL:"SET_SESSIONS",SET:"SET_SESSION",DELETE:"DELETE_SESSION"},Ct={SET:"SET_REPORT"},wt={SET:"SET_TRACKING"},Dt={loaded:{user:!1,data:{projects:!1,sessions:!1,blocks:!1,reports:!1,tracking:!1}},day:(xt=new Date,xt.setHours(12),xt.setMinutes(0),xt.setSeconds(0),xt.setMilliseconds(0),xt),trackedSession:null,user:null,projects:{},blocks:[],sessions:[],reports:[]};function Lt(e,t){var n;return(n={},Object(ke.a)(n,St,(function(t){var n=t.projectsArr,c=t.blocks,r=t.sessions,s=t.trackedSession,a=t.reports,i={};return n.forEach((function(e){return i[e.id]=e})),Object(E.a)(Object(E.a)({},e),{},{projects:i,blocks:c,sessions:r,trackedSession:s,reports:a})})),Object(ke.a)(n,Et.SET,(function(t){var n=t.day;return Object(E.a)(Object(E.a)({},e),{},{day:n})})),Object(ke.a)(n,Nt.SET,(function(t){var n=t.payload;for(var c in n)if(void 0===e.loaded[c])throw new Error("setLoaded called with invalid data type:",c);var r=Object(E.a)(Object(E.a)({},e.loaded),n);return Object(E.a)(Object(E.a)({},e),{},{loaded:r})})),Object(ke.a)(n,Nt.SET_WEEKLY_STATUS,(function(t){var n=t.status,c=n,r=n,s=n,a=Object(E.a)(Object(E.a)({},e.loaded.data),{},{sessions:c,blocks:r,reports:s});return Object(E.a)(Object(E.a)({},e),{},{loaded:Object(E.a)(Object(E.a)({},e.loaded),{},{data:a})})})),Object(ke.a)(n,Nt.SET_DATA_STATUS,(function(t){var n=t.status,c=Object(E.a)({},e.loaded.data);for(var r in c)c[r]=n;return Object(E.a)(Object(E.a)({},e),{},{loaded:Object(E.a)(Object(E.a)({},e.loaded),{},{data:c})})})),Object(ke.a)(n,kt.SET,(function(t){var n=t.user;return n?Object(E.a)(Object(E.a)({},e),{},{user:Object(E.a)({},n),loaded:Object(E.a)(Object(E.a)({},e.loaded),{},{user:!0})}):Object(E.a)(Object(E.a)({},e),{},{user:null})})),Object(ke.a)(n,kt.CLEAR,(function(){return Object(E.a)(Object(E.a)({},e),{},{user:null})})),Object(ke.a)(n,Tt.SET,(function(t){var n=t.project,c=Object(E.a)({},e.projects);return c[n.id]=n,Object(E.a)(Object(E.a)({},e),{},{projects:c})})),Object(ke.a)(n,Tt.DELETE,(function(t){var n=t.id,c=Object(E.a)({},e.projects);return delete c[n],Object(E.a)(Object(E.a)({},e),{},{projects:c})})),Object(ke.a)(n,At.SET_ALL,(function(t){var n=t.blocks;return Object(E.a)(Object(E.a)({},e),{},{blocks:n})})),Object(ke.a)(n,At.SET,(function(t){var n=t.block,c=Object(gt.a)(e.blocks),r=c.findIndex((function(e){return e.id===n.id}));return n.title=e.projects[n.project_id].title,-1===r?(c.push(Object(E.a)({},n)),c.sort((function(e,t){return Q(e.start_time,t.start_time)})),Object(E.a)(Object(E.a)({},e),{},{blocks:c})):(c[r]=Object(E.a)({},n),Object(E.a)(Object(E.a)({},e),{},{blocks:c}))})),Object(ke.a)(n,At.DELETE,(function(t){var n=t.id,c=e.blocks.filter((function(e){return e.id!==n}));return Object(E.a)(Object(E.a)({},e),{},{blocks:c})})),Object(ke.a)(n,yt.SET_ALL,(function(t){var n=t.sessions;return Object(E.a)(Object(E.a)({},e),{},{sessions:n})})),Object(ke.a)(n,yt.SET,(function(t){var n=t.session;Array.isArray(n)||(n=[n]);var c=Object(gt.a)(e.sessions);return n.forEach((function(t){var n=c.findIndex((function(e){return e.id===t.id}));if(-1===n)return c.push(Object(E.a)({},t)),c.sort((function(e,t){return Q(e.start_time,t.start_time)})),Object(E.a)(Object(E.a)({},e),{},{sessions:c});c[n]=Object(E.a)({},t)})),Object(E.a)(Object(E.a)({},e),{},{sessions:c})})),Object(ke.a)(n,yt.DELETE,(function(t){var n=t.id,c=e.sessions.filter((function(e){return e.id!==n}));return Object(E.a)(Object(E.a)({},e),{},{sessions:c})})),Object(ke.a)(n,Ct.SET,(function(t){var n=t.reports;return Object(E.a)(Object(E.a)({},e),{},{reports:n})})),Object(ke.a)(n,wt.SET,(function(t){var n=t.trackedSession;return Object(E.a)(Object(E.a)({},e),{},{trackedSession:n})})),n)[t.type](Object(E.a)({},t))}function Mt(){var e=Object(l.useReducer)(Lt,Dt),t=Object(N.a)(e,2),n=t[0],c=t[1],r=function(e){var t,r=864e5*e,s=new Date(n.day.valueOf()+r),a=H(n.day),i=H(s);a.getDate()!==i.getDate()&&(t=i,c({type:Nt.SET_WEEKLY_STATUS,status:!1}),Promise.all([vt.blocks.getWeek(t),vt.sessions.getWeek(t),vt.reports.getWeek(t)]).then((function(e){var t=Object(N.a)(e,3),n=t[0],r=t[1],s=t[2];c({type:At.SET_ALL,blocks:n}),c({type:yt.SET_ALL,sessions:r}),c({type:Ct.SET,reports:s}),c({type:Nt.SET_WEEKLY_STATUS,status:!0})}))),c({type:Et.SET,day:s})},s={changeDay:r,yesterday:function(){return r(-1)},tomorrow:function(){return r(1)},lastWeek:function(){return r(-7)},nextWeek:function(){return r(7)}},a={register:function(e,t){return vt.users.add(e,t).then((function(e){return c({type:kt.SET,user:e})}))},login:function(e,t){return vt.auth.login(e,t).then((function(e){return c({type:kt.SET,user:e})}))},logout:function(){return vt.auth.logout().then((function(){return c({type:kt.CLEAR})}))}},i=function(){return n.user?Promise.all([vt.projects.get(),vt.blocks.get(),vt.sessions.get(),vt.sessions.getActive(),vt.reports.get()]).then((function(e){var t=Object(N.a)(e,5),n=t[0],r=t[1],s=t[2],a=t[3],i=t[4];c({type:St,projectsArr:n,blocks:r,sessions:s,trackedSession:a,reports:i})})).then((function(){return c({type:Nt.SET_DATA_STATUS,status:!0})})):c({type:Nt.SET_DATA_STATUS,status:!0})};var o={load:i,addProject:function(e){return vt.projects.add(e).then((function(e){return c({type:Tt.SET,project:e})}))},updateProject:function(e){return vt.projects.edit(e).then((function(e){return c({type:Tt.SET,project:e})}))},scheduleBlock:function(e){return vt.blocks.add(e).then((function(e){return c({type:At.SET,block:e})}))},editBlock:function(e){return vt.blocks.edit(e).then((function(e){return c({type:At.SET,block:e})}))},deleteBlock:function(e){return vt.blocks.del(e).then((function(e){return c({type:At.DELETE,id:e.id})}))},toggleSession:function(e){var t=n.trackedSession,r=[],s=!t||t.project_id!==e;return t&&r.push(vt.sessions.stop(t.id)),s&&r.push(vt.sessions.add(e)),Promise.all(r).then((function(e){var t=s?e[e.length-1]:null;c({type:wt.SET,trackedSession:t}),c({type:yt.SET,session:e})}))},editSession:function(e,t,n){return vt.sessions.edit({id:e,start_time:t,end_time:n}).then((function(e){return c({type:yt.SET,session:e})}))},deleteSession:function(e){return vt.sessions.del(e).then((function(e){var t=e.id;return c({type:yt.DELETE,id:t})}))},getWeeklyReport:function(e){return vt.reports.getWeek(e)}},u={date:s,data:o,auth:a};return Object(l.useEffect)((function(){return vt.auth.check().then((function(e){c({type:kt.SET,user:e})}))}),[]),Object(l.useEffect)(i,[n.user]),{state:n,actions:u,dateActions:s,authActions:a,dataActions:o}}function _t(){var e=Mt(),t=e.state,n=e.actions;return Object(f.jsx)(A.Provider,{value:t,children:Object(f.jsx)(y.Provider,{value:n,children:Object(f.jsx)(Ye,{})})})}Qe.a.defaults.baseURL="https://capensis-api.herokuapp.com",Qe.a.defaults.withCredentials=!0,d.a.render(Object(f.jsx)(u.a.StrictMode,{children:Object(f.jsx)(_t,{})}),document.getElementById("root"))},71:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){}},[[146,1,2]]]);
//# sourceMappingURL=main.8e690620.chunk.js.map