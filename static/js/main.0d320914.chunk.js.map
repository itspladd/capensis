{"version":3,"sources":["components/Loading.jsx","components/Header.jsx","components/StatusBar.jsx","hooks/useControlledForms.js","components/Login.jsx","components/Register.jsx","components/Authentication.jsx","helpers/timeHelpers.js","constants/settings.js","helpers/stringHelpers.js","constants/strings/languages/EN-US.js","constants/strings/index.js","components/NewBlockForm.jsx","hooks/useNewBlockValidation.js","components/Block.jsx","components/BlockList.jsx","components/ScheduleBar.jsx","components/DaySchedule.jsx","components/WeekSchedule.jsx","components/ProjectListItem.jsx","components/ProjectList.jsx","components/Reports.jsx","components/Footer.jsx","hooks/useWeeklyBlocks.js","components/App.jsx","hooks/useAuthentication.js","hooks/useSessionTracking.js","hooks/usePopupModal.js","index.js"],"names":["Loading","className","Spinner","animation","variant","role","Header","props","username","handleLogout","currentSession","to","type","id","onClick","StatusBar","projects","loading","tracking","project_id","title","useControlledForms","fields","useState","formValues","setFormValues","event","preventDefault","prev","newVals","target","value","Login","login","formLoginUsername","formLoginPassword","handleFormChange","Form","Group","controlId","Label","Control","onChange","placeholder","Button","axios","post","rawPassword","then","res","data","Register","formRegisterUsername","formRegisterPassword","Authentication","showLogin","setShowLogin","authComponent","switchMsg","buttonMsg","size","document","activeElement","blur","getLastSunday","date","msSinceSunday","getDay","lastSundayMs","valueOf","Date","minutesSinceMidnight","hours","minutes","getBoundaryMinutes","values","block","startHours","Number","startHour","startAMPM","startMinutes","startMinute","endHours","endHour","endAMPM","endMinutes","endMinute","getFormValuesBoundaryMinutes","start","start_time","end","end_time","getHours","getMinutes","getBlockBoundaryMinutes","blockIsOnDay","day","getDate","SETTINGS","LANGUAGES","EN_US","makeTimeString","time","toLocaleTimeString","hour","minute","STRINGS","TAG","NEW_BLOCK_VALIDATION","conflict","startStr","endStr","noProject","endBeforeStart","NewBlockForm","show","handleClose","currentDay","blocks","refreshBlocks","project","handleChange","errors","setErrors","formIsValid","setFormIsValid","useEffect","newBlockStart","newBlockEnd","filter","map","blockStartMins","blockEndMins","newErrors","valid","Object","length","useNewBlockValidation","showErrors","setShowErrors","LANG","currentDateText","toDateString","projectOptions","reverse","hoursOptions","optionsList","push","errorList","keys","errorType","handleSubmit","a","startMins","endMins","startDateMs","endDateMs","startTime","toISOString","endTime","Modal","onHide","closeButton","Title","Body","onSubmit","htmlFor","name","Footer","Block","startTimeStr","endTimeStr","blockClass","backgroundClass","style","height","projectid","BlockList","blocksForDay","key","ScheduleBar","ScheduleBarSection","am","Array","fill","undefined","e","index","DaySchedule","lang","goToTomorrow","goToYesterday","showForm","blocksWithPlaceholders","setBlocksWithPlaceholders","dayString","toLocaleDateString","weekday","dateString","month","year","makeDateString","newBlocks","currentTime","setHours","forEach","blockDate","placeholderBlock","setMinutes","WeekSchedule","ProjectListItem","selected","onEditClick","onCancelClick","formValue","ProjectList","setProjects","selectedProject","setSelectedProject","setFormValue","showNewProjectForm","setShowNewProjectForm","newProjectFormValue","setNewProjectFormValue","handleCancel","projectItems","newProject","patch","projectTitle","Reports","reportData","setReportData","get","report","sessions_total","blocks_total","projectName","secondsToHours","sessionHours","blockHours","toPrecision","useWeeklyBlocks","today","setSeconds","setMilliseconds","setCurrentDay","setBlocks","days","deltaMs","newDay","current","currentSunday","newSunday","checkForNewWeek","App","setLoading","setUsername","console","log","useAuthentication","logout","changeDay","setCurrentSession","closest","projectId","getAttribute","session_id","useSessionTracking","toggleSession","setShow","usePopupModal","closeForm","projectList","basename","handleShow","exact","path","defaults","baseURL","process","withCredentials","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0d320914.chunk.js","sourcesContent":["import '../styles/Loading.css'\n\nimport Spinner from 'react-bootstrap/Spinner'\n\nexport default function Loading() {\n  return (\n    <div className=\"loading\">\n      <Spinner animation=\"border\" variant=\"primary\" role=\"status\">\n        <span className=\"visually-hidden\">Loading...</span>\n      </Spinner>\n      <p>Loading...</p>\n    </div>\n  )\n}","// Router components\nimport { Link, NavLink } from \"react-router-dom\";\n\nimport '../styles/Header.css';\n\nexport default function Header(props) {\n  const { username, handleLogout, currentSession } = props;\n\n  return(\n    <div className=\"Header navbar navbar-expand-sm navbar-light bg-info\">\n      <div className=\"container-fluid\">\n        <Link className=\"navbar-brand\" to=\"/\">Capensis</Link>\n        <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span className=\"navbar-toggler-icon\"></span>\n        </button>\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n            <li className=\"nav-item\">\n              <NavLink className=\"nav-link\" to=\"/schedule\">Schedule</NavLink>\n            </li>\n            {/* <li className=\"nav-item\">\n              <NavLink className=\"nav-link\" to=\"/week\">Week</NavLink>\n            </li> */}\n            <li className=\"nav-item\">\n              <NavLink to=\"/projects\" className=\"nav-link\">Projects</NavLink>\n            </li>\n            <li className=\"nav-item\">\n              <NavLink className=\"nav-link\" to=\"/reports\">Reports</NavLink>\n            </li>\n          </ul>\n        </div>\n        <div className=\"d-flex\">\n          <span className=\"navbar-text me-2\">Logged in as {username}</span>\n          <button className=\"btn btn-outline-dark\" onClick={handleLogout}>Logout</button>\n        </div>\n      </div>\n    </div>\n  )\n}","import '../styles/StatusBar.css';\n\nexport default function StatusBar(props) {\n  const { currentSession, projects} = props;\n\n  const loading = !projects;\n  const tracking = currentSession && projects && projects[currentSession.project_id]\n\n  const bgColor = () => {\n    if (tracking) return 'bg-success text-light';\n    if (!tracking) return 'bg-secondary text-light';\n  }\n\n  return (\n    <div className={`statusBar mb-2 border-top border-info ${bgColor()}`}>\n      { loading &&\n        `Loading...`\n      }\n      { tracking &&\n        `Currently tracking ${projects[currentSession.project_id].title}`\n      }\n      { currentSession && !projects[currentSession.project_id] &&\n        `ERROR: Trying to track project ID ${currentSession.project_id}, but it was not found.`\n      }\n      { !currentSession &&\n        `Not currently tracking`\n      }\n    </div>\n  )\n}","import { useState } from 'react';\n\nexport default function useControlledForms(fields) {\n  const [formValues, setFormValues] = useState(fields)\n\n  const handleFormChange = event => {\n    event.preventDefault();\n    setFormValues(prev => {\n      const newVals = {...prev};\n      newVals[event.target.id] = event.target.value;\n      return newVals;\n    })\n  }\n\n  return [formValues, handleFormChange]\n}","import axios from 'axios';\nimport useControlledForms from '../hooks/useControlledForms';\n\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Card from 'react-bootstrap/Card'\n\nexport default function Login(props) {\n\n  const { login } = props;\n\n  const [formValues, handleFormChange] = useControlledForms({\n    formLoginUsername: \"\",\n    formLoginPassword: \"\"\n  });\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const { formLoginUsername, formLoginPassword } = formValues;\n    axios.post(`/api/login`, {username: formLoginUsername, rawPassword:formLoginPassword})\n         .then(res => login(res.data.username))\n  }\n\n  return (\n    <Form className=\"loginForm\" >\n      <h4>Login</h4>\n      <Form.Group className=\"mb-3\" controlId=\"formLoginUsername\">\n        <Form.Label>Username</Form.Label>\n        <Form.Control onChange={handleFormChange} type=\"text\" placeholder=\"Username\" />\n      </Form.Group>\n      <Form.Group className=\"mb-3\" controlId=\"formLoginPassword\">\n        <Form.Label>Password</Form.Label>\n        <Form.Control onChange={handleFormChange} type=\"password\" placeholder=\"Password\" />\n      </Form.Group>\n      <Button variant=\"success\" type=\"submit\" onClick={handleSubmit}>\n        Submit\n      </Button>\n    </Form>\n  )\n}","import axios from 'axios';\nimport useControlledForms from '../hooks/useControlledForms';\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\n\nexport default function Register(props) {\n\n  const { login } = props;\n\n  const [formValues, handleFormChange] = useControlledForms({\n    formRegisterUsername: \"\",\n    formRegisterPassword: \"\"\n  });\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const { formRegisterUsername, formRegisterPassword } = formValues;\n    axios.post(`/api/users`, {username: formRegisterUsername, rawPassword: formRegisterPassword})\n         .then(res => login(res.data.username))\n  }\n\n  return (\n    <Form className=\"registerForm\">\n      <h4>Register</h4>\n      <Form.Group className=\"mb-3\" controlId=\"formRegisterUsername\">\n        <Form.Label>Username</Form.Label>\n        <Form.Control onChange={handleFormChange} type=\"text\" placeholder=\"Username\" />\n      </Form.Group>\n      <Form.Group className=\"mb-3\" controlId=\"formRegisterPassword\">\n        <Form.Label>Password</Form.Label>\n        <Form.Control onChange={handleFormChange} type=\"password\" placeholder=\"Password\" />\n      </Form.Group>\n      <Button variant=\"success\" type=\"submit\" onClick={handleSubmit}>\n        Create account\n      </Button>\n    </Form>\n  )\n}","import { useState } from 'react'\nimport Button from 'react-bootstrap/Button'\n\nimport Login from './Login'\nimport Register from './Register'\n\nimport '../styles/Authentication.css';\n\nexport default function Authentication(props) {\n  const {login} = props\n\n  const [showLogin, setShowLogin] = useState(true)\n  \n  const authComponent = showLogin ? <Login login={login} /> : <Register login={login} />;\n  const switchMsg = showLogin ? \"Don't have an account yet?\" : \"Already have a Capensis account?\";\n  const buttonMsg = showLogin ? \"Sign up\" : \"Sign in\";\n\n  const handleSwitch = event => {\n    event.preventDefault();\n    document.activeElement.blur(); // Clear focus from the button\n    setShowLogin(!showLogin)\n  }\n\n  return (\n    <div className=\"Authentication\">\n      <div id=\"Authentication_background\">\n        <div id=\"Authentication_welcome\">\n          <p className=\"appName\">Capensis</p>\n          <p className=\"welcomeMessage\">A super simple scheduler and time-tracker.</p>\n        </div>\n\n        { authComponent }\n\n        <div className=\"Authentication_switch\">\n          <p>{switchMsg}</p>\n          <Button\n            variant=\"primary\"\n            size=\"sm\"\n            onClick={handleSwitch}\n          >{buttonMsg}</Button>\n        </div>\n      </div>\n    </div>\n  )\n}","\nconst msDayMultiplier = 1000*60*60*24;\n\n// Given a Date object, return a Date object of the last Sunday.\nexport function getLastSunday(date) {\n// Get Sunday for this week.\nconst daysSinceSunday = date.getDay(); // Returns 0 for sunday, 1 for Monday, etc\nconst msSinceSunday = msDayMultiplier * daysSinceSunday;\nconst lastSundayMs = date.valueOf() - msSinceSunday;\nreturn new Date(lastSundayMs);\n}\n\n// Set h/min/s/ms of a given date to 0.\nexport function makeZeroDate(date) {\n  date.setHours(0);\n  date.setMinutes(0);\n  date.setSeconds(0);\n  date.setMilliseconds(0);\n}\n\nexport function minutesSinceMidnight (hours, minutes) {\n  return (hours * 60) + minutes;\n}\n\n// Internal helper function to allow getBoundaryMinutes to handle different options\nfunction getFormValuesBoundaryMinutes(values) {\n  const startHours = Number(values.startHour) + Number(values.startAMPM);\n  const startMinutes = Number(values.startMinute)\n  const endHours = Number(values.endHour) + Number(values.endAMPM);\n  const endMinutes = Number(values.endMinute)\n  const startMins = minutesSinceMidnight(startHours, startMinutes);\n  const endMins = minutesSinceMidnight(endHours, endMinutes);\n  return [startMins, endMins]\n}\n\nfunction getBlockBoundaryMinutes(block) {\n  const start = new Date(block.start_time);\n  const end = new Date(block.end_time);\n  const startMins = minutesSinceMidnight(start.getHours(), start.getMinutes())\n  const endMins = minutesSinceMidnight(end.getHours(), end.getMinutes())\n  return [startMins, endMins]\n}\n\nexport function getBoundaryMinutes({values, block}) {\n  if (values) return getFormValuesBoundaryMinutes(values);\n  if (block) return getBlockBoundaryMinutes(block)\n}\n\nexport function getFifteenMinuteUnits(start, end) {\n  const lengthMs = new Date(end) - new Date(start);\n  const lengthMins = lengthMs / 1000 / 60;\n  const fifteenMinuteUnits = lengthMins / 15;\n  return fifteenMinuteUnits;\n}\n\n// Determines if a block's start_time date matches the input date.\nexport function blockIsOnDay(block, day) {\n  return new Date(block.start_time).getDate() === day.getDate();\n}","const SETTINGS = {\n  LANGUAGES: {\n    EN_US: \"EN_US\"\n  }\n}\n\nexport default SETTINGS;","export function makeTimeString(time) {\n  return new Date(time).toLocaleTimeString([], { hour: 'numeric', minute: '2-digit'});\n}\n\nexport function makeWeekDayString(lang, time) {\n  if (!lang || !time) {\n    return \"\";\n  }\n  return new Date(time).toLocaleDateString(lang, { weekday: 'long' });\n}\n\nexport function makeDateString(lang, time) {\n  if (!lang || !time) {\n    return \"\";\n  }\n  return new Date(time).toLocaleDateString(lang, { month: 'long', year: 'numeric', day:'numeric' });\n}","import { makeTimeString } from '../../../helpers/stringHelpers'\n\nconst EN_US = {\n  TAG: \"EN-US\",\n  NEW_BLOCK_VALIDATION: {\n    conflict: ({block}) => {\n      const {title, start_time, end_time} = block;\n      const startStr = makeTimeString(start_time)\n      const endStr = makeTimeString(end_time)\n      return `This time conflicts with another block: ${title}, ${startStr} - ${endStr}`\n    },\n    noProject: () => \"You must select a project.\",\n    endBeforeStart: () => \"That block would end on or before its start time.\"\n  }\n}\n\nexport default EN_US;","import EN_US from './languages/EN-US'\n\nconst STRINGS = {\n  EN_US,\n}\n\nexport default STRINGS;","import { useEffect, useState, useCallback } from 'react';\nimport axios from 'axios';\n\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\nimport useControlledForms from '../hooks/useControlledForms';\nimport useNewBlockValidation from '../hooks/useNewBlockValidation';\n\nimport SETTINGS from '../constants/settings'\nimport STRINGS from '../constants/strings'\n\nimport { getBoundaryMinutes } from '../helpers/timeHelpers'\n\nexport default function NewBlockForm(props) {\n  const { show, handleClose, currentDay, projects, blocks, refreshBlocks } = props;\n\n  const [values, handleChange] = useControlledForms({\n    project: \"\",\n    startHour: \"6\",\n    startMinute: \"00\",\n    startAMPM: \"0\",\n    endHour: \"6\",\n    endMinute: \"00\",\n    endAMPM: \"0\"\n  });\n\n  const [errors, formIsValid] = useNewBlockValidation(values, blocks, currentDay)\n  const [showErrors, setShowErrors] = useState(false);\n\n  const LANG = SETTINGS.LANGUAGES.EN_US;\n  const currentDateText = currentDay && currentDay.toDateString();\n\n  // Make the options lists for the form <select> tags\n  const projectOptions = projects && Object.values(projects).reverse().map(project => (\n    <option value={project.id} key={project.id}>{project.title}</option>\n  ));\n\n  // Note that hoursOptions creates an anonymous function and then\n  // runs it immediately.\n  const hoursOptions = function() {\n    const optionsList = [];\n    for(let hour = 1; hour <= 12; hour++) {\n      // The 12 hour should display as 12, but has a value of 0 for time calculations.\n      // The PM value accounts for the 12-hour offset for noon.\n      // (i.e. 12:00 AM is 00:00 (0 hours for '12' + 0 hours for 'AM'\n      //  and 12:00 PM is 12:00 (0 hours for '12', 12 hours for 'PM'))\n      optionsList.push(\n        <option\n          value={hour === 12 ? 0 : hour}\n          key={hour === 12 ? 0 : hour}\n        >\n            {hour}\n        </option>)\n    }\n    return optionsList;\n  }()\n\n  const makeErrorItem = (errorType) => {\n    return (\n        <li key={errorType}>\n          {STRINGS[LANG].NEW_BLOCK_VALIDATION[errorType](errors[errorType])}\n        </li>\n    )\n  }\n\n  const errorList = Object.keys(errors)\n                          .map(makeErrorItem)\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!formIsValid) {\n      setShowErrors(true);\n    } else {\n      setShowErrors(false);\n      // Turn the raw values into ISO strings to send\n      const [startMins, endMins] = getBoundaryMinutes({values});\n      const startDateMs = currentDay.valueOf() + (startMins * 60 * 1000);\n      const endDateMs = currentDay.valueOf() + (endMins * 60 * 1000);\n      const startTime = new Date(startDateMs).toISOString();\n      const endTime = new Date(endDateMs).toISOString();\n      axios.post('/api/blocks', { startTime, endTime, project: values.project})\n           .then(refreshBlocks)\n           .then(handleClose)\n    }\n  }\n\n  return (\n    <>\n      <Modal show={show} onHide={handleClose}>\n        <Modal.Header closeButton>\n          <Modal.Title>Schedule a new Block</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          Date: <strong>{currentDateText}</strong>\n        <form onSubmit={handleSubmit}>\n          <div className=\"row row-cols-sm-auto g-5 align-items-center\">\n            <label htmlFor=\"project\">Project</label>\n            <div className=\"col-12\">\n              <select className=\"form-select\" name=\"project\" id=\"project\" value={values.project} onChange={handleChange}>\n                <option value=\"\">Select a project</option>\n                {projectOptions}\n              </select>\n            </div>\n          </div>\n          <div className=\"row row-cols-lg-auto g-2 mt-1 align-items-center\">\n            <label htmlFor=\"startHour\">Starting at:</label>\n            <div className=\"col-12\">\n              <select className=\"form-select\" name=\"startHour\" id=\"startHour\" value={values.startHour} onChange={handleChange}>\n                {hoursOptions}\n              </select>\n            </div>\n            <div className=\"col-12\">\n              <select className=\"form-select\" name=\"startMinute\" id=\"startMinute\" value={values.startMinute} onChange={handleChange}>\n                <option>00</option>\n                <option>15</option>\n                <option>30</option>\n                <option>45</option>\n              </select>\n            </div>\n            <div className=\"col-12\">\n              <select className=\"form-select\" name=\"startAMPM\" id=\"startAMPM\" value={values.startAMPM} onChange={handleChange}>\n                <option value=\"0\">AM</option>\n                <option value=\"12\">PM</option>\n              </select>\n            </div>\n            {showErrors && errors.conflict && errors.conflict.start &&\n             (<small id=\"passwordHelpBlock\" className=\"form-text text-muted\">\n             That start time conflicts with an existing Block!\n             </small>)}\n          </div>\n          <div className=\"row row-cols-lg-auto g-2 mt-1 align-items-center\">\n            <label>Ending at:</label>\n            <div className=\"col-12\">\n              <select className=\"form-select\" name=\"endHour\" id=\"endHour\" value={values.endHour} onChange={handleChange}>\n                {hoursOptions}\n              </select>\n            </div>\n            <div className=\"col-12\">\n              <select className=\"form-select\" name=\"endMinute\" id=\"endMinute\" value={values.endMinute} onChange={handleChange}>\n                <option>00</option>\n                <option>15</option>\n                <option>30</option>\n                <option>45</option>\n              </select>\n            </div>\n            <div className=\"col-12\">\n              <select className=\"form-select\" name=\"endAMPM\" id=\"endAMPM\" value={values.endAMPM} onChange={handleChange}>\n                <option value=\"0\">AM</option>\n                <option value=\"12\">PM</option>\n              </select>\n            </div>\n            {showErrors && errors.conflict && errors.conflict.end &&\n             (<small id=\"passwordHelpBlock\" className=\"form-text text-muted\">\n             That end time conflicts with an existing Block!\n             </small>)}\n          </div>\n        </form>\n        </Modal.Body>\n          {showErrors && errorList.length !== 0 && (\n            <Modal.Footer><ul>{errorList}</ul></Modal.Footer>\n          )}\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>\n            Close\n          </Button>\n          <Button\n            variant=\"primary\"\n            onClick={handleSubmit}>\n            Submit\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nimport { blockIsOnDay, getBoundaryMinutes } from '../helpers/timeHelpers'\n\n\nexport default function useNewBlockValidation(values, blocks, currentDay) {\n\n  const [errors, setErrors] = useState({})\n  const [formIsValid, setFormIsValid] = useState(false)\n\n  // If the values, blocks, or current day change, re-validate everything.\n  useEffect(() => {\n    const [newBlockStart, newBlockEnd] = getBoundaryMinutes({values})\n\n    /* Turns a block into an object as follows:\n    { block: the block in question,\n      start: bool, true if block conflicts with start time value\n      end: bool, true if block conflicts with end time value\n    }\n    */\n    const makeConflictObject = block => {\n      const [blockStartMins, blockEndMins] = getBoundaryMinutes({block});\n      const badStart = (newBlockStart >= blockStartMins &&\n                        newBlockStart < blockEndMins)\n      const badEnd =   (newBlockEnd > blockStartMins &&\n                        newBlockEnd <= blockEndMins);\n      return {block, start: badStart, end: badEnd};\n    }\n\n    // Get a single conflict object (if it exists)\n    // See previous function for object structure\n    const conflict = blocks && blocks.filter(block => blockIsOnDay(block, currentDay))\n    .map(makeConflictObject)\n    .filter(conflict => conflict.start || conflict.end)\n    [0];\n\n    // If there are any validation errors, store them in an object.\n    const newErrors = {};\n    if (!values.project)              newErrors.noProject = true;\n    if (newBlockStart >= newBlockEnd) newErrors.endBeforeStart = true;\n    if (conflict)                     newErrors.conflict = conflict;\n\n    setErrors(newErrors)\n  }, [values, blocks, currentDay])\n\n  useEffect(() => {\n    const valid = Object.values(errors).length === 0;\n    setFormIsValid(valid);\n  }, [errors])\n\n\n  return [errors, formIsValid]\n}","import '../styles/Block.css'\nimport { makeTimeString } from '../helpers/stringHelpers'\n\nexport default function Block(props) {\n  const { title, project_id, length, start_time, end_time } = props;\n\n  const startTimeStr = makeTimeString(start_time)\n  const endTimeStr = makeTimeString(end_time)\n\n  // Is this block a placeholder?\n  const placeholder = project_id === -1;\n\n  const blockClass = placeholder ? \"block_placeholder\" : \"block\"\n  const backgroundClass = placeholder ? \"block_placeholder_background\" : \"block_background\"\n\n  return(\n    <li className={\"list-group-item \" + backgroundClass}\n      style={{height: length + \"rem\"}}\n    >\n      <div\n        className={blockClass}\n        projectid={project_id}\n      >\n        {!placeholder && <h5>{title}</h5>}\n        {startTimeStr} to {endTimeStr}\n      </div>\n    </li>\n  )\n}","import '../styles/BlockList.css'\nimport Block from './Block'\n\nimport { getFifteenMinuteUnits } from '../helpers/timeHelpers'\n\nexport default function BlockList(props) {\n  const { blocks, day } = props;\n\n  const blocksForDay = blocks && day &&\n    blocks\n    .map(block => (\n      <Block\n        {...block}\n        key={block.id}\n        length={getFifteenMinuteUnits(block.start_time, block.end_time)}\n      />\n    ))\n\n  return (\n    <ul className=\"blockList list-group list-group-flush\">\n      { blocksForDay }\n    </ul>\n  )\n}","import '../styles/ScheduleBar.css'\n\nexport default function ScheduleBar(props) {\n\n  const startHour = 6;\n  const endHour = 20;\n\n  const ScheduleBarSection = props => {\n    const { hour } = props;\n    const am = hour < 12;\n    return (\n      <li className=\"ScheduleBarSection list-group-item\"\n        key={hour}>\n        { am || hour === 12 ? hour : hour-12 } { am ? \"AM\" : \"PM\"}\n      </li>\n    )\n  }\n\n  /* Creates the divs that show time of day for a schedule.\n  start: int, first hour of the schedule\n  end: int, last hour of the schedule\n  */\n  const  makeScheduleElements = (start, end) => {\n    const numSections = end - start;\n    const sections = new Array(numSections)\n      .fill(undefined) // Gotta do this first, or .map won't actually do anything\n      .map((e, index) => <ScheduleBarSection hour={start + index} />);\n    return sections;\n  }\n\n  return (\n    <ul className=\"ScheduleBar list-group list-group-flush\">\n      {makeScheduleElements(startHour, endHour)}\n    </ul>\n  )\n}","import '../styles/DaySchedule.css';\n\nimport Button from 'react-bootstrap/Button';\nimport BlockList from './BlockList'\nimport ScheduleBar from './ScheduleBar'\nimport { useEffect, useState } from 'react';\n\n// Helpers\nimport { \n  makeTimeString,\n  makeWeekDayString,\n  makeDateString } from '../helpers/stringHelpers'\n\n// Constants\nimport SETTINGS from '../constants/settings'\nimport STRINGS from '../constants/strings'\n\nexport default function DaySchedule(props) {\n  const LANG = STRINGS[SETTINGS.LANGUAGES.EN_US].TAG;\n\n  // Props:\n  // blocks is an array of Block components.\n  const { blocks, day, goToTomorrow, goToYesterday, showForm } = props;\n\n  const [blocksWithPlaceholders, setBlocksWithPlaceholders] = useState([]);\n\n  const dayString = makeWeekDayString(LANG, day)\n  const dateString = makeDateString(LANG, day)\n  const earliestHour = 6;\n  const latestHour = 20;\n\n  // Generate placeholder blocks for this day, for padding out the schedule\n  useEffect(() => {\n    const newBlocks = [];\n    let currentTime = new Date(day);\n    currentTime.setHours(earliestHour)\n\n    // Create all placeholder blocks that occur before the current Block\n    blocks.forEach(block => {\n      const blockDate = new Date(block.start_time);\n\n      while(currentTime < blockDate) {\n        // Make the placeholder block data\n        const placeholderBlock = {\n          id: `p${currentTime.getHours()}${currentTime.getMinutes() || \"00\"}`,\n          title: makeTimeString(currentTime),\n          project_id: -1,\n          start_time: currentTime.toISOString()\n        }\n        // Advance the time by 15 minutes\n        currentTime.setMinutes(currentTime.getMinutes() + 15);\n        // Add the ending time to the placeholder block\n        placeholderBlock.end_time = currentTime.toISOString();\n        // Add placeholder to newBlocks\n        newBlocks.push(placeholderBlock);\n      }\n\n      // Put the current Block in newBlocks in its spot\n      newBlocks.push(block)\n      // Update the currentTime to be the end of the current block\n      currentTime = new Date(block.end_time)\n    })\n\n    // Finally, fill in any placeholders that go after the final block of the day\n    while(currentTime.getHours() < latestHour) {\n      // Make the placeholder block data\n      const placeholderBlock = {\n        id: `p${currentTime.getHours()}${currentTime.getMinutes() || \"00\"}`,\n        title: makeTimeString(currentTime),\n        project_id: -1,\n        start_time: currentTime.toISOString()\n      }\n      // Advance the time by 15 minutes\n      currentTime.setMinutes(currentTime.getMinutes() + 15);\n      // Add the ending time to the placeholder block\n      placeholderBlock.end_time = currentTime.toISOString();\n      // Add placeholder to newBlocks\n      newBlocks.push(placeholderBlock);\n    }\n\n    setBlocksWithPlaceholders(newBlocks)\n  }, [blocks, day])\n\n  return(\n    <div className=\"daySchedule\">\n      <div className=\"dayScheduleHeader\">\n        <div className=\"dayScheduleHeader_internal\">\n          <Button\n            variant=\"info\"\n            onClick={goToYesterday}>\n            {`<`}\n          </Button>\n          <Button\n            variant=\"info\"\n            onClick={goToTomorrow}>\n            {`>`}\n          </Button>\n          <div className=\"dayScheduleHeader_date\">\n            <h3>{dayString}</h3>\n            <small className=\"text-muted\">{dateString}</small>\n          </div>\n        </div>\n        <Button variant=\"primary\" onClick={showForm}>\n            New Block\n          </Button>\n      </div>\n      <div className=\"dayScheduleInternal mt-1\">\n        <ScheduleBar />\n        <BlockList\n          blocks={blocksWithPlaceholders}\n          day={day}\n        />\n      </div>\n    </div>\n  )\n}","export default function WeekSchedule(props) {\n\n  return (\n    <div>\n      <p>WeekSchedule component</p>\n    </div>\n  )\n}","export default function ProjectListItem(props) {\n  const { id, title, selected, onEditClick, onCancelClick, onSubmit, formValue, handleChange } = props;\n\n  return (\n    <li key={id} className=\"list-group-item d-flex justify-content-between bg-light\">\n      <span><strong>{title}</strong></span>\n      { selected &&\n        <form className=\"row row-cols-sm-auto g-3 align-items-center\" onSubmit={onSubmit}>\n          <div className=\"col-12\">\n            <label className=\"visually-hidden\" htmlFor=\"newName\">New name: </label>\n            <input\n              type=\"text\"\n              className=\"form-control form-control-sm\"\n              id=\"newName\"\n              value={formValue}\n              onChange={handleChange}\n            ></input>\n          </div>\n          <div className=\"col-12\">\n          <button className=\"btn btn-sm btn-secondary\">Submit</button>\n          </div>\n          <div className=\"col-12\">\n              <button className=\"btn btn-sm btn-danger\" onClick={onCancelClick}>Cancel</button>\n            </div>\n        </form>\n      }\n      { !selected &&\n        <button\n          className=\"btn btn-sm btn-info\" onClick={onEditClick}>Rename</button>\n      }\n    </li>\n  )\n}","import axios from 'axios';\nimport { useState } from 'react'\n\nimport ProjectListItem from './ProjectListItem'\n\nexport default function ProjectList(props) {\n  const { projects, setProjects } = props;\n\n  const [selectedProject, setSelectedProject] = useState(null);\n  const [formValue, setFormValue] = useState(null);\n  const [showNewProjectForm, setShowNewProjectForm] = useState(false);\n  const [newProjectFormValue, setNewProjectFormValue] = useState(\"\");\n\n  const handleSubmit = (event, id) => {\n    event.preventDefault();\n    const title = formValue !== null ? formValue : projects[id].title;\n    setSelectedProject(null);\n    setFormValue(null);\n    const newProject = {...projects[id], title};\n    setProjects(prev => ({\n      ...prev,\n      [id]: newProject\n    }))\n    axios.patch(`/api/projects/${id}`, { title })\n  }\n\n  const handleCancel = event => {\n    event.preventDefault();\n    setSelectedProject(null);\n  }\n\n  const handleChange = event => {\n    setFormValue(event.target.value);\n  }\n\n  const handleNewProjectFormChange = event => {\n    setNewProjectFormValue(event.target.value);\n  }\n\n  const handleNewProjectSubmit = event => {\n    event.preventDefault();\n    axios.post(`/api/projects`, { projectTitle: newProjectFormValue })\n         .then(res => {\n           const newProject = res.data;\n           setProjects(prev => ({\n             ...prev,\n             [newProject.id]: newProject\n           }))\n         })\n         .then(() => {\n          setNewProjectFormValue(\"\");\n          setShowNewProjectForm(false)\n         })\n  }\n\n  const handleNewProjectCancel = event => {\n    event.preventDefault();\n    setNewProjectFormValue(\"\");\n    setShowNewProjectForm(false)\n  }\n\n  const projectItems = projects && Object.values(projects).map(project => (\n    <ProjectListItem\n      {...project}\n      selected={ project.id === selectedProject}\n      onEditClick={() => setSelectedProject(project.id)}\n      onCancelClick={handleCancel}\n      onSubmit={(event) => handleSubmit(event, project.id)}\n      handleChange={handleChange}\n      formValue={formValue === null ? project.title : formValue}\n    />\n  ))\n\n  return (\n    <div className=\"container\">\n      <h3>My Projects</h3>\n\n      <ul className=\"list-group\">\n        {projectItems}\n      </ul>\n      <div className=\"newProject\">\n        { !showNewProjectForm &&\n          <button\n            className=\"btn btn-primary\"\n            onClick={() => setShowNewProjectForm(true)}\n          >\n              Add a Project\n          </button>\n        }\n        { showNewProjectForm &&\n          <form className=\"row row-cols-lg-auto g-3\" onSubmit={handleNewProjectSubmit}>\n            <div className=\"col-12\">\n              <label className=\"visually-hidden\" htmlFor=\"newProject\">New project name:</label>\n              <input\n                className=\"form-control\"\n                type=\"text\"\n                id=\"newProject\"\n                value={newProjectFormValue}\n                onChange={handleNewProjectFormChange}\n              ></input>\n            </div>\n            <div className=\"col-12\">\n              <button className=\"btn btn-success\" type=\"submit\">Submit</button>\n            </div>\n            <div className=\"col-12\">\n              <button className=\"btn btn-danger\" type=\"button\" onClick={handleNewProjectCancel}>Cancel</button>\n            </div>\n          </form>\n        }\n      </div>\n    </div>\n\n  )\n}","import axios from \"axios\"\nimport { useEffect, useState } from \"react\"\n\nexport default function Reports(props) {\n  const { projects } = props;\n\n  const [reportData, setReportData] = useState([]);\n\n  useEffect(() => {\n    axios.get(`/api/reports/week`)\n         .then(res => setReportData(res.data))\n\n  }, [projects])\n\n  const report = reportData.map(project => {\n    // Totals are returned in seconds.\n    const { project_id, sessions_total, blocks_total } = project\n    const projectName = projects[project_id].title;\n    const secondsToHours = 1/(60*60);\n    const sessionHours = (sessions_total * secondsToHours) || 0\n    const blockHours = (blocks_total * secondsToHours) || 0\n    return (\n    <li key={project_id}>\n      {projectName}: {sessionHours.toPrecision(1)} / {blockHours} hours\n    </li>\n    )\n  })\n\n  return (\n    <div className=\"reports\">\n      <ul>\n        {report}\n      </ul>\n    </div>\n  )\n}","export default function Footer() {\n  return(\n    <div className=\"Footer\">\n      Created by Pladd\n    </div>\n  )\n}","import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nimport { getLastSunday, makeZeroDate } from '../helpers/timeHelpers'\n\n// Ensures that the app always has the Blocks for the current week.\nexport default function useWeeklyBlocks(username) {\n  const today = new Date();\n  makeZeroDate(today);\n  const sunday = getLastSunday(today);\n\n  const [currentDay, setCurrentDay] = useState(today);\n  const [blocks, setBlocks] = useState([]);\n\n  // Uses an array of block objects from the API to create Block components.\n\n\n  // A function to load blocks from the API and store them in state.\n  const loadUserBlocks = () => {\n    axios.get(`/api/blocks/week`)\n    .then(res => setBlocks(res.data))\n  }\n\n  // Compares two input days. If one is in a different week than the other,\n  // return true.\n  const checkForNewWeek = (current, newDay) => {\n    const currentSunday = getLastSunday(current);\n    const newSunday = getLastSunday(newDay);\n    if (currentSunday.getDate() !== newSunday.getDate()) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Load the current week's blocks any time the username changes\n  useEffect(loadUserBlocks, [username]);\n\n  // Change currentDay by given number of days\n  // i.e. days = 1 gives next day, days = -1 gives prev day\n  // Check for new week and load new blocks if necessary.\n  const changeDay = days => {\n    const msDayMultiplier = 1000*60*60*24;\n    const deltaMs = msDayMultiplier*days;\n    const newDay = new Date(currentDay.valueOf() + deltaMs);\n    const newWeek = checkForNewWeek(currentDay, newDay)\n    if (newWeek) {\n      axios.get(`/api/blocks/week?date=${newDay.toISOString()}`)\n      .then(res => setBlocks(res.data))\n    }\n    setCurrentDay(newDay)\n  }\n\n  const refreshBlocks = () => {\n    axios.get(`/api/blocks/week?date=${currentDay.toISOString()}`)\n      .then(res => setBlocks(res.data))\n  }\n\n  return [blocks, refreshBlocks, currentDay, changeDay];\n}","import '../styles/App.css';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// Router components\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\n// Custom components\nimport Loading from './Loading'\nimport Header from './Header';\nimport StatusBar from './StatusBar';\nimport Authentication from './Authentication'\n\nimport NewBlockForm from './NewBlockForm';\nimport DaySchedule from './DaySchedule';\nimport WeekSchedule from './WeekSchedule';\nimport ProjectList from './ProjectList';\nimport Reports from './Reports';\nimport Footer from './Footer';\n\n// Custom hooks\nimport useAuthentication from '../hooks/useAuthentication'\nimport useWeeklyBlocks from '../hooks/useWeeklyBlocks';\nimport useSessionTracking from '../hooks/useSessionTracking';\nimport usePopupModal from '../hooks/usePopupModal';\n\n// Helper functions\nimport { blockIsOnDay } from '../helpers/timeHelpers';\n\nexport default function App() {\n\n\n  const [loading, username, login, logout] = useAuthentication();\n  const [blocks, refreshBlocks, currentDay, changeDay] = useWeeklyBlocks(username);\n  const [currentSession, toggleSession] = useSessionTracking(username);\n  const [showForm, closeForm, show] = usePopupModal();\n  const [projects, setProjects] = useState({})\n\n  // Load new projects when the username changes\n  useEffect(() => {\n    axios.get('/api/projects')\n         .then(res => {\n           const projectList = {};\n           res.data.projects.forEach(project => projectList[project.id] = project)\n           setProjects(projectList)\n         })\n  }, [username])\n\n  return (\n    <div className=\"App\"\n      onClick={toggleSession}\n    >\n      {/* If we haven't finished trying to log in: */}\n      {loading && <Loading />}\n\n      {/* If there's no valid login: */}\n      {!loading && !username &&\n        <Authentication login={login} />\n      }\n\n      {/* If we've successfully logged in: */}\n      {!loading && username &&\n        <>\n          <Router basename=\"/capensis\">\n            <Header username={username} handleLogout={logout} currentSession={currentSession} />\n            <StatusBar currentSession={currentSession} projects={projects} />\n            <NewBlockForm \n              show={show}\n              handleShow={showForm}\n              handleClose={closeForm}\n              currentDay={currentDay}\n              projects={projects}\n              blocks={blocks}\n              refreshBlocks={refreshBlocks}\n            />\n            <div className=\"App-body\">\n              <Switch>\n                <Route exact path={[\"/\", \"/schedule\"]}>\n                  <DaySchedule\n                    blocks={blocks.filter(block => blockIsOnDay(block, currentDay))}\n                    day={currentDay}\n                    goToTomorrow={() => changeDay(1)}\n                    goToYesterday={() => changeDay(-1)}\n                    showForm={showForm}\n                  />\n                </Route>\n                <Route exact path=\"/week\" >\n                  <WeekSchedule />\n                </Route>\n                <Route exact path=\"/projects\" >\n                  <ProjectList projects={projects} setProjects={setProjects} />\n                </Route>\n                <Route exact path=\"/reports\" >\n                  <Reports projects={projects} />\n                </Route>\n              </Switch>\n            </div>\n          </Router>\n        </>\n      }\n      <Footer />\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport default function useAuthentication() {\n  const [loading, setLoading] = useState(true);\n  const [username, setUsername] = useState(null);\n\n  // Attempt to authenticate the user if they've logged in previously.\n  useEffect(() => {\n    console.log('authenticating')\n    axios.post('/api/authenticate')\n      .then(res => {\n        setUsername(res.data.username)\n        setLoading(false);\n      })\n  }, []);\n\n  const login = username => {\n    setUsername(username);\n  }\n\n  const logout = event => {\n    event.preventDefault();\n    axios.post(`/api/logout`)\n         .then(res => setUsername(res.data.username))\n  }\n\n  return [loading, username, login, logout];\n}\n","import axios from 'axios';\nimport { useState, useEffect } from 'react';\n\nexport default function useSessionTracking(username) {\n  const [currentSession, setCurrentSession] = useState(null);\n\n  useEffect(() => {\n    // When the username changes, ping the server to see if there's an open session.\n    // If there is, load it into the state.\n    axios.get(`/api/sessions/current`)\n         .then(res => {\n           if(res.data[0]) setCurrentSession(res.data[0]);\n         })\n  }, [username])\n\n  const toggleSession = event => {\n    // Try to find the nearest \"block\" class element.\n    const block = event.target.closest('.block')\n\n    // If there is one, then the user clicked on a block.\n    if (block) {\n      // Get the project ID from the block. Cast it to a number for comparison later.\n      const projectId = Number(block.getAttribute('projectid'))\n      // If we have a session running already, ping the API to stop it.\n      if (currentSession) {\n        axios.patch(`/api/sessions`, { session_id: currentSession.id })\n      }\n\n      // If the input matches the currently-tracked session, just stop\n      // the current session without starting a new one.\n      if (currentSession && projectId === currentSession.project_id) {\n        setCurrentSession(null);\n      } else {\n        // Otherwise, ping the API to start a new session and start tracking.\n        axios.post(`/api/sessions`, { project_id: projectId })\n            .then(res => setCurrentSession(res.data))\n      }\n    }\n\n  }\n\n  return [currentSession, toggleSession];\n}","import { useState } from 'react'\n\nexport default function usePopupModal() {\n\n  const [show, setShow] = useState(false);\n\n  const closeForm = () => setShow(false);\n  const showForm = () => setShow(true);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    // Submit the form and close it\n    setShow(false);\n  }\n\n  return [showForm, closeForm, show]\n}","import 'bootstrap/dist/css/bootstrap.min.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport axios from 'axios';\n\nif (process.env.REACT_APP_API_URL) {\n  axios.defaults.baseURL = process.env.REACT_APP_API_URL;\n  axios.defaults.withCredentials = true;\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}