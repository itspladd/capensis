{"version":3,"sources":["components/Header.jsx","components/StatusBar.jsx","hooks/useControlledForms.js","components/NewBlockForm.jsx","components/LoginRegister.jsx","components/Block.jsx","components/BlockList.jsx","components/DaySchedule.jsx","components/WeekSchedule.jsx","components/ProjectListItem.jsx","components/ProjectList.jsx","components/Reports.jsx","helpers/dayHelpers.js","hooks/useWeeklyBlocks.js","components/App.jsx","hooks/useAuthentication.js","hooks/useSessionTracking.js","hooks/usePopupModal.js","index.js"],"names":["Header","props","username","handleLogout","currentSession","className","to","type","id","onClick","StatusBar","projects","tracking","undefined","projectTitle","project_id","title","useControlledForms","fields","useState","formValues","setFormValues","event","preventDefault","prev","newVals","target","name","value","console","log","NewBlockForm","show","handleClose","handleShow","currentDay","blocks","refreshBlocks","badStart","setBadStart","badEnd","setBadEnd","valid","msg","submitStatus","setSubmitStatus","date","toISOString","split","project","startHour","startMinute","startAMPM","endHour","endMinute","endAMPM","values","handleChange","currentDateText","toDateString","minutesSinceMidnight","hours","minutes","getBoundaryMinutes","useCallback","startHours","Number","startMinutes","endHours","endMinutes","handleSubmit","a","startMins","endMins","startDateMs","Date","valueOf","endDateMs","startTime","endTime","axios","post","then","res","useEffect","filter","block","start_time","getDate","forEach","blockStart","blockEnd","end_time","blockStartMins","getHours","getMinutes","blockEndMins","projectOptions","Object","reverse","map","hoursOptions","optionsList","i","push","Modal","onHide","closeButton","Title","Body","onSubmit","class","for","onChange","Footer","Button","variant","LoginRegister","setUsername","loginUsername","loginPass","registerUsername","registerPass","handleFormChange","rawPassword","data","htmlFor","Block","length","day","startTimeStr","toTimeString","endTimeStr","projectid","BlockList","blocksForDay","start","end","DaySchedule","tomorrow","yesterday","showForm","WeekSchedule","ProjectListItem","selected","onEditClick","onCancelClick","formValue","ProjectList","setProjects","selectedProject","setSelectedProject","setFormValue","showNewProjectForm","setShowNewProjectForm","newProjectFormValue","setNewProjectFormValue","handleCancel","projectItems","newProject","patch","Reports","reportData","setReportData","get","report","sessions_total","blocks_total","projectName","secondsToHours","sessionHours","blockHours","toPrecision","getLastSunday","msSinceSunday","getDay","lastSundayMs","useWeeklyBlocks","today","setHours","setMinutes","setSeconds","setMilliseconds","setCurrentDay","setBlocks","days","deltaMs","newDay","current","currentSunday","newSunday","checkForNewWeek","App","loading","setLoading","useAuthentication","logout","changeDay","setCurrentSession","closest","projectId","getAttribute","session_id","useSessionTracking","toggleSession","setShow","usePopupModal","closeForm","projectList","basename","exact","path","process","defaults","baseURL","withCredentials","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"iUAGe,SAASA,EAAOC,GAC7B,IAAQC,EAA2CD,EAA3CC,SAAUC,EAAiCF,EAAjCE,aAAiCF,EAAnBG,eAEhC,OACE,qBAAKC,UAAU,+CAAf,SACE,sBAAKA,UAAU,kBAAf,UACE,cAAC,IAAD,CAAMA,UAAU,eAAeC,GAAG,IAAlC,wBACA,wBAAQD,UAAU,iBAAiBE,KAAK,SAAS,iBAAe,WAAW,iBAAe,0BAA0B,gBAAc,yBAAyB,gBAAc,QAAQ,aAAW,oBAA5L,SACE,sBAAMF,UAAU,0BAElB,qBAAKA,UAAU,2BAA2BG,GAAG,yBAA7C,SACE,qBAAIH,UAAU,kCAAd,UACE,oBAAIA,UAAU,WAAd,SACE,cAAC,IAAD,CAASA,UAAU,WAAWC,GAAG,OAAjC,mBAEF,oBAAID,UAAU,WAAd,SACE,cAAC,IAAD,CAASA,UAAU,WAAWC,GAAG,QAAjC,oBAEF,oBAAID,UAAU,WAAd,SACE,cAAC,IAAD,CAASC,GAAG,YAAYD,UAAU,WAAlC,wBAEF,oBAAIA,UAAU,WAAd,SACE,cAAC,IAAD,CAASA,UAAU,WAAWC,GAAG,WAAjC,4BAIN,sBAAKD,UAAU,SAAf,UACE,uBAAMA,UAAU,mBAAhB,0BAAiDH,KACjD,wBAAQG,UAAU,uBAAuBI,QAASN,EAAlD,4B,MC7BK,SAASO,EAAUT,GAChC,IAAQG,EAA4BH,EAA5BG,eAAgBO,EAAYV,EAAZU,SAElBC,OAAiCC,IAAtBT,EAAeI,GAC1BM,EAAeF,GAAYD,EAASP,EAAeW,YAAYC,MAErE,OACE,sBAAKX,UAAS,kDACVO,EAAW,aAAe,WAD9B,UAEIR,EAAeI,IAAf,6BACsBM,IAErBV,EAAeI,IAAhB,4B,oDCZO,SAASS,EAAmBC,GACzC,MAAoCC,mBAASD,GAA7C,mBAAOE,EAAP,KAAmBC,EAAnB,KAYA,MAAO,CAACD,EAViB,SAAAE,GACvBA,EAAMC,iBACNF,GAAc,SAAAG,GACZ,IAAMC,EAAO,eAAOD,GAGpB,OAFAC,EAAQH,EAAMI,OAAOC,MAAQL,EAAMI,OAAOE,MAC1CC,QAAQC,IAAIL,GACLA,OCHE,SAASM,EAAa9B,GACnC,IAAQ+B,EAA+E/B,EAA/E+B,KAAkBC,GAA6DhC,EAAzEiC,WAAyEjC,EAA7DgC,aAAaE,EAAgDlC,EAAhDkC,WAAYxB,EAAoCV,EAApCU,SAAUyB,EAA0BnC,EAA1BmC,OAAQC,EAAkBpC,EAAlBoC,cAErE,EAAgClB,oBAAS,GAAzC,mBAAOmB,EAAP,KAAiBC,EAAjB,KACA,EAA4BpB,oBAAS,GAArC,mBAAOqB,EAAP,KAAeC,EAAf,KACA,EAAwCtB,mBAAS,CAC/CuB,OAAO,EACPC,IAAK,KAFP,mBAAOC,EAAP,KAAqBC,EAArB,KAIA,EAA+B5B,EAAmB,CAChD6B,KAAMX,EAAWY,cAAcC,MAAM,KAAK,GAC1CC,QAAS,GACTC,UAAW,IACXC,YAAa,KACbC,UAAW,IACXC,QAAS,IACTC,UAAW,KACXC,QAAS,MARX,mBAAOC,EAAP,KAAeC,EAAf,KAWMC,EAAkBvB,EAAWwB,eAE7BC,EAAuB,SAACC,EAAOC,GAAR,OAA6B,GAARD,EAAcC,GAE1DC,EAAqBC,uBAAY,SAAAR,GACrC,IAAMS,EAAaC,OAAOV,EAAON,WAAagB,OAAOV,EAAOJ,WACtDe,EAAeD,OAAOV,EAAOL,aAC7BiB,EAAWF,OAAOV,EAAOH,SAAWa,OAAOV,EAAOD,SAClDc,EAAaH,OAAOV,EAAOF,WAIjC,MAAO,CAHWM,EAAqBK,EAAYE,GACnCP,EAAqBQ,EAAUC,MAG9C,IAEGC,EAAY,uCAAG,WAAMhD,GAAN,iCAAAiD,EAAA,sDACnBjD,EAAMC,iBADa,EAEUwC,EAAmBP,GAF7B,mBAEZgB,EAFY,KAEDC,EAFC,KAIfD,EAAYC,GACd/B,GAAQ,EACRC,EAAM,0DACGL,GAAYE,GACrBE,GAAQ,EACRC,EAAM,4EACsB,KAAnBa,EAAOP,SAChBP,GAAQ,EACRC,EAAM,4CAEND,GAAQ,EACRC,EAAM,qCAEA+B,EAAc,IAAIC,KAAKnB,EAAOV,MAAM8B,UAAyB,GAAZJ,EAAiB,IAClEK,EAAY,IAAIF,KAAKnB,EAAOV,MAAM8B,UAAuB,GAAVH,EAAe,IAC9DK,EAAY,IAAIH,KAAKD,GAAa3B,cAClCgC,EAAU,IAAIJ,KAAKE,GAAW9B,cAEpCiC,IAAMC,KAAK,cAAe,CAAEH,YAAWC,UAAS9B,QAASO,EAAOP,UAC1DiC,MAAK,SAAAC,GACJtD,QAAQC,IAAIqD,GACZ9C,OAEPJ,KAEFY,EAAgB,CAAEH,QAAOC,QA7BN,2CAAH,sDAiClByC,qBAAU,WAER7C,GAAY,GACZE,GAAU,GACV,MAAmCsB,EAAmBP,GAAtD,mBAAOW,EAAP,KAAqBE,EAArB,KACkBjC,EAAOiD,QAAO,SAAAC,GAAK,OAAI,IAAIX,KAAKW,EAAMC,YAAYC,YAAcrD,EAAWqD,aACnFC,SAAQ,SAAAH,GAChB,IAAMI,EAAa,IAAIf,KAAKW,EAAMC,YAC5BI,EAAW,IAAIhB,KAAKW,EAAMM,UAC1BC,EAAiBjC,EAAqB8B,EAAWI,WAAYJ,EAAWK,cACxEC,EAAepC,EAAqB+B,EAASG,WAAYH,EAASI,cAEpE5B,GAAgB0B,GAClB1B,EAAe6B,GACXzD,GAAY,GAGd8B,EAAawB,GACfxB,GAAc2B,GACZvD,GAAU,QAGf,CAACe,EAAQrB,EAAYC,EAAQ2B,IAGhC,IAAMkC,EAAiBC,OAAO1C,OAAO7C,GAAUwF,UAAUC,KAAI,SAAAnD,GAAO,OAClE,wBAAQrB,MAAOqB,EAAQzC,GAAvB,SAA4ByC,EAAQjC,WAGhCqF,EAAe,WAEnB,IADA,IAAMC,EAAc,GACZC,EAAI,EAAGA,GAAK,GAAIA,IACtBD,EAAYE,KAAK,iCAASD,KAE5B,OAAOD,EALY,GAQrB,OACE,mCACE,eAACG,EAAA,EAAD,CAAOzE,KAAMA,EAAM0E,OAAQzE,EAA3B,UACE,cAACwE,EAAA,EAAMzG,OAAP,CAAc2G,aAAW,EAAzB,SACE,cAACF,EAAA,EAAMG,MAAP,sCAEF,eAACH,EAAA,EAAMI,KAAP,oBACQ,iCAASnD,IACjB,uBAAMoD,SAAUxC,EAAhB,UACE,8BACE,uBAAO/D,KAAK,SAASwG,MAAM,eAAevG,GAAG,OAAOoB,MAAO4B,EAAOV,SAEpE,sBAAKzC,UAAU,8CAAf,UACE,uBAAO2G,IAAI,UAAX,qBACA,qBAAKD,MAAM,SAAX,SACE,yBAAQA,MAAM,cAAcpF,KAAK,UAAUnB,GAAG,UAAUoB,MAAO4B,EAAOP,QAASgE,SAAUxD,EAAzF,UACE,wBAAQ7B,MAAM,GAAd,8BACCqE,UAIP,sBAAK5F,UAAU,mDAAf,UACE,uBAAO2G,IAAI,YAAX,0BACA,qBAAK3G,UAAU,SAAf,SACE,wBAAQA,UAAU,cAAcsB,KAAK,YAAYnB,GAAG,YAAYoB,MAAO4B,EAAON,UAAW+D,SAAUxD,EAAnG,SACG4C,MAGL,qBAAKhG,UAAU,SAAf,SACE,yBAAQ0G,MAAM,cAAcpF,KAAK,cAAcnB,GAAG,cAAcoB,MAAO4B,EAAOL,YAAa8D,SAAUxD,EAArG,UACE,wCACA,wCACA,wCACA,6CAGJ,qBAAKpD,UAAU,SAAf,SACE,yBAAQ0G,MAAM,cAAcpF,KAAK,YAAYnB,GAAG,YAAYoB,MAAO4B,EAAOJ,UAAW6D,SAAUxD,EAA/F,UACE,wBAAQ7B,MAAM,IAAd,gBACA,wBAAQA,MAAM,KAAd,qBAGHU,GACC,uBAAO9B,GAAG,oBAAoBuG,MAAM,uBAApC,kEAIJ,sBAAK1G,UAAU,mDAAf,UACE,+CACA,qBAAKA,UAAU,SAAf,SACE,wBAAQ0G,MAAM,cAAcpF,KAAK,UAAUnB,GAAG,UAAUoB,MAAO4B,EAAOH,QAAS4D,SAAUxD,EAAzF,SACG4C,MAGL,qBAAKhG,UAAU,SAAf,SACE,yBAAQ0G,MAAM,cAAcpF,KAAK,YAAYnB,GAAG,YAAYoB,MAAO4B,EAAOF,UAAW2D,SAAUxD,EAA/F,UACE,wCACA,wCACA,wCACA,6CAGJ,qBAAKpD,UAAU,SAAf,SACE,yBAAQ0G,MAAM,cAAcpF,KAAK,UAAUnB,GAAG,UAAUoB,MAAO4B,EAAOD,QAAS0D,SAAUxD,EAAzF,UACE,wBAAQ7B,MAAM,IAAd,gBACA,wBAAQA,MAAM,KAAd,qBAGHY,GACC,uBAAOhC,GAAG,oBAAoBuG,MAAM,uBAApC,uEAMFnE,EAAaF,OACb,cAAC+D,EAAA,EAAMS,OAAP,UAAetE,EAAaD,MAEhC,eAAC8D,EAAA,EAAMS,OAAP,WACE,cAACC,EAAA,EAAD,CAAQC,QAAQ,YAAY3G,QAASwB,EAArC,mBAGA,cAACkF,EAAA,EAAD,CAAQC,QAAQ,UAAU3G,QAAS6D,EAAnC,4BChMK,SAAS+C,EAAcpH,GAEpC,IAAQqH,EAAgBrH,EAAhBqH,YAER,EAAuCrG,EAAmB,CACxDsG,cAAe,GACfC,UAAW,GACXC,iBAAkB,GAClBC,aAAc,KAJhB,mBAAOtG,EAAP,KAAmBuG,EAAnB,KAwBA,OACE,sBAAKtH,UAAU,iBAAf,UACE,qBAAKA,UAAU,QAAf,SACE,uBAAMyG,SApBQ,SAAAxF,GAClBA,EAAMC,iBACN,IAAQgG,EAA6BnG,EAA7BmG,cAAeC,EAAcpG,EAAdoG,UACvB3F,QAAQC,IAAR,oCAAyCyF,EAAzC,0BAAwEC,IACxExC,IAAMC,KAAN,aAAyB,CAAC/E,SAAUqH,EAAeK,YAAaJ,IAC1DtC,MAAK,SAAAC,GAAG,OAAImC,EAAYnC,EAAI0C,KAAK3H,cAenC,UACE,uBAAO4H,QAAQ,gBAAf,wBACA,uBAAOnG,KAAK,gBAAgBpB,KAAK,OAAOqB,MAAOR,EAAWmG,cAAeN,SAAUU,IAEnF,uBAAOG,QAAQ,YAAf,wBACA,uBAAOnG,KAAK,YAAYpB,KAAK,WAAWqB,MAAOR,EAAWoG,UAAWP,SAAUU,IAE/E,gDAGJ,qBAAKtH,UAAU,WAAf,SACE,uBAAMyG,SAvBW,SAAAxF,GACrBA,EAAMC,iBACN,IAAQkG,EAAmCrG,EAAnCqG,iBAAkBC,EAAiBtG,EAAjBsG,aAC1B7F,QAAQC,IAAR,gDAAqD2F,EAArD,0BAAuFC,IACvF1C,IAAMC,KAAN,aAAyB,CAAC/E,SAAUuH,EAAkBG,YAAaF,IAC7DxC,MAAK,SAAAC,GAAG,OAAImC,EAAYnC,EAAI0C,KAAK3H,cAkBnC,UACE,uBAAO4H,QAAQ,mBAAf,wBACA,uBAAOnG,KAAK,mBAAmBpB,KAAK,OAAOqB,MAAOR,EAAWqG,iBAAkBR,SAAUU,IAEzF,uBAAOG,QAAQ,eAAf,wBACA,uBAAOnG,KAAK,eAAepB,KAAK,WAAWqB,MAAOR,EAAWsG,aAAcT,SAAUU,IAErF,sD,YCjDK,SAASI,EAAM9H,GAC5B,IAAQe,EAAyDf,EAAzDe,MAAOD,EAAkDd,EAAlDc,WAAYiH,EAAsC/H,EAAtC+H,OAAazC,GAAyBtF,EAA9BgI,IAA8BhI,EAAzBsF,YAAYK,EAAa3F,EAAb2F,SAE9CsC,EAAe,IAAIvD,KAAKY,GAAY4C,eACpCC,EAAa,IAAIzD,KAAKiB,GAAUuC,eAEtC,OACE,sBAAK9H,UAAU,QACbgI,UAAWtH,EADb,UAGE,6BAAKC,IACL,+BACE,wCAAWkH,EAAX,OAA6BE,KAC7B,0CAAaJ,WCdN,SAASM,EAAUrI,GAChC,IAAQmC,EAAgBnC,EAAhBmC,OAAQ6F,EAAQhI,EAARgI,IASVM,EAAenG,EAAOiD,QAAO,SAAAC,GACjC,OAAO,IAAIX,KAAKW,EAAMC,YAAYC,YAAcyC,EAAIzC,aAEnDY,KAAI,SAAAd,GAAK,OACR,cAAC,EAAD,2BACMA,GADN,IAEE2C,IAAK,IAAItD,KAAKW,EAAMC,YACpByC,QAdyBQ,EAcKlD,EAAMC,WAdJkD,EAcgBnD,EAAMM,UAbzC,IAAIjB,KAAK8D,GAAO,IAAI9D,KAAK6D,IACZ,IAAO,GACG,OAHZ,IAACA,EAAOC,KAkBtC,OACE,qBAAKpI,UAAU,YAAf,SACIkI,ICpBO,SAASG,EAAYzI,GAIlC,IAAQmC,EAA+CnC,EAA/CmC,OAAQ6F,EAAuChI,EAAvCgI,IAAKU,EAAkC1I,EAAlC0I,SAAUC,EAAwB3I,EAAxB2I,UAAWC,EAAa5I,EAAb4I,SAW1C,OACE,sBAAKxI,UAAU,cAAf,UACE,6BAAK4H,EAAItE,iBACT,cAACwD,EAAA,EAAD,CAAQC,QAAQ,UAAU3G,QAASoI,EAAnC,8BAGE,sBAAKxI,UAAU,sBAAf,UACE,wBACEA,UAAU,kBACVI,QAASmI,EAFX,iBAGA,cAACN,EAAD,CACElG,OAAQA,EACR6F,IAAKA,IAEP,wBACE5H,UAAU,kBACVI,QAASkI,EAFX,0BClCK,SAASG,EAAa7I,GAEnC,OACE,8BACE,yD,YCJS,SAAS8I,EAAgB9I,GACtC,IAAQO,EAAuFP,EAAvFO,GAAIQ,EAAmFf,EAAnFe,MAAOgI,EAA4E/I,EAA5E+I,SAAUC,EAAkEhJ,EAAlEgJ,YAAaC,EAAqDjJ,EAArDiJ,cAAepC,EAAsC7G,EAAtC6G,SAAUqC,EAA4BlJ,EAA5BkJ,UAAW1F,EAAiBxD,EAAjBwD,aAE9E,OACE,qBAAapD,UAAU,iDAAvB,UACE,+BAAM,iCAASW,MACbgI,GACA,uBAAM3I,UAAU,8CAA8CyG,SAAUA,EAAxE,UACE,sBAAKzG,UAAU,SAAf,UACE,uBAAOA,UAAU,kBAAkByH,QAAQ,UAA3C,wBACA,uBACEvH,KAAK,OACLF,UAAU,+BACVG,GAAG,UACHoB,MAAOuH,EACPlC,SAAUxD,OAGd,qBAAKpD,UAAU,SAAf,SACA,wBAAQA,UAAU,2BAAlB,sBAEA,qBAAKA,UAAU,SAAf,SACI,wBAAQA,UAAU,wBAAwBI,QAASyI,EAAnD,0BAILF,GACD,wBACE3I,UAAU,sBAAsBI,QAASwI,EAD3C,sBAvBKzI,GCCE,SAAS4I,EAAYnJ,GAClC,IAAQU,EAA0BV,EAA1BU,SAAU0I,EAAgBpJ,EAAhBoJ,YAElB,EAA8ClI,mBAAS,MAAvD,mBAAOmI,EAAP,KAAwBC,EAAxB,KACA,EAAkCpI,mBAAS,MAA3C,mBAAOgI,EAAP,KAAkBK,EAAlB,KACA,EAAoDrI,oBAAS,GAA7D,mBAAOsI,EAAP,KAA2BC,EAA3B,KACA,EAAsDvI,mBAAS,IAA/D,mBAAOwI,EAAP,KAA4BC,EAA5B,KAgBMC,EAAe,SAAAvI,GACnBA,EAAMC,iBACNgI,EAAmB,OAGf9F,EAAe,SAAAnC,GACnBkI,EAAalI,EAAMI,OAAOE,QA6BtBkI,EAAe5D,OAAO1C,OAAO7C,GAAUyF,KAAI,SAAAnD,GAAO,OACtD,cAAC8F,EAAD,2BACM9F,GADN,IAEE+F,SAAW/F,EAAQzC,KAAO8I,EAC1BL,YAAa,kBAAMM,EAAmBtG,EAAQzC,KAC9C0I,cAAeW,EACf/C,SAAU,SAACxF,GAAD,OAvDO,SAACA,EAAOd,GAC3Bc,EAAMC,iBACN,IAAMP,EAAsB,OAAdmI,EAAqBA,EAAYxI,EAASH,GAAIQ,MAC5DuI,EAAmB,MACnBC,EAAa,MACb,IAAMO,EAAU,2BAAOpJ,EAASH,IAAhB,IAAqBQ,UACrCqI,GAAY,SAAA7H,GAAI,kCACXA,GADW,kBAEbhB,EAAKuJ,OAER/E,IAAMgF,MAAN,wBAA6BxJ,GAAM,CAAEQ,UAC/BkE,MAAK,SAAAC,GAAG,OAAItD,QAAQC,IAAIqD,MA4CPb,CAAahD,EAAO2B,EAAQzC,KACjDiD,aAAcA,EACd0F,UAAyB,OAAdA,EAAqBlG,EAAQjC,MAAQmI,QAIpD,OACE,sBAAK9I,UAAU,YAAf,UACE,6CAEA,oBAAIA,UAAU,aAAd,SACGyJ,IAEH,sBAAKzJ,UAAU,aAAf,WACKoJ,GACD,wBACEpJ,UAAU,kBACVI,QAAS,kBAAMiJ,GAAsB,IAFvC,2BAOAD,GACA,uBAAMpJ,UAAU,2BAA2ByG,SAnDpB,SAAAxF,GAC7BA,EAAMC,iBACNyD,IAAMC,KAAN,gBAA4B,CAAEnE,aAAc6I,IACtCzE,MAAK,SAAAC,GACJ,IAAM4E,EAAa5E,EAAI0C,KACvBwB,GAAY,SAAA7H,GAAI,kCACXA,GADW,kBAEbuI,EAAWvJ,GAAKuJ,UAGpB7E,MAAK,WACL0E,EAAuB,IACvBF,GAAsB,OAuCtB,UACE,sBAAKrJ,UAAU,SAAf,UACE,uBAAOA,UAAU,kBAAkByH,QAAQ,aAA3C,+BACA,uBACEzH,UAAU,eACVE,KAAK,OACLC,GAAG,aACHoB,MAAO+H,EACP1C,SA/DqB,SAAA3F,GACjCsI,EAAuBtI,EAAMI,OAAOE,aAiE5B,qBAAKvB,UAAU,SAAf,SACE,wBAAQA,UAAU,kBAAkBE,KAAK,SAAzC,sBAEF,qBAAKF,UAAU,SAAf,SACE,wBAAQA,UAAU,iBAAiBE,KAAK,SAASE,QAlD9B,SAAAa,GAC7BA,EAAMC,iBACNqI,EAAuB,IACvBF,GAAsB,IA+CZ,+BCvGC,SAASO,EAAQhK,GAC9B,IAAQU,EAAaV,EAAbU,SAER,EAAoCQ,mBAAS,IAA7C,mBAAO+I,EAAP,KAAmBC,EAAnB,KAEA/E,qBAAU,WACRJ,IAAMoF,IAAN,qBACMlF,MAAK,SAAAC,GAAG,OAAIgF,EAAchF,EAAI0C,WAEnC,CAAClH,IAEJ,IAAM0J,EAASH,EAAW9D,KAAI,SAAAnD,GAE5B,IAAQlC,EAA6CkC,EAA7ClC,WAAYuJ,EAAiCrH,EAAjCqH,eAAgBC,EAAiBtH,EAAjBsH,aAC9BC,EAAc7J,EAASI,GAAYC,MACnCyJ,EAAiB,EAAE,KACnBC,EAAgBJ,EAAiBG,GAAmB,EACpDE,EAAcJ,EAAeE,GAAmB,EACtD,OACA,+BACGD,EADH,KACkBE,EAAaE,YAAY,GAD3C,MACkDD,EADlD,WAAS5J,MAMX,OACE,qBAAKV,UAAU,UAAf,SACE,6BACGgK,MC3BF,SAASQ,EAAc/H,GAE9B,IACMgI,EANkB,MAKAhI,EAAKiI,SAEvBC,EAAelI,EAAK8B,UAAYkG,EACtC,OAAO,IAAInG,KAAKqG,GCDD,SAASC,EAAgB/K,GACtC,IDI2B4C,ECJrBoI,EAAQ,IAAIvG,MDIS7B,ECHdoI,GDIRC,SAAS,GACdrI,EAAKsI,WAAW,GAChBtI,EAAKuI,WAAW,GAChBvI,EAAKwI,gBAAgB,GCNNT,EAAcK,GAA7B,IAEA,EAAoC/J,mBAAS+J,GAA7C,mBAAO/I,EAAP,KAAmBoJ,EAAnB,KACA,EAA4BpK,mBAAS,IAArC,mBAAOiB,EAAP,KAAeoJ,EAAf,KAwBApG,qBAlBuB,WACrBJ,IAAMoF,IAAN,oBACClF,MAAK,SAAAC,GAAG,OAAIqG,EAAUrG,EAAI0C,WAgBH,CAAC3H,IAsB3B,MAAO,CAACkC,EALc,WACpB4C,IAAMoF,IAAN,gCAAmCjI,EAAWY,gBAC3CmC,MAAK,SAAAC,GAAG,OAAIqG,EAAUrG,EAAI0C,UAGA1F,EAjBb,SAAAsJ,GAChB,IACMC,EADkB,MACQD,EAC1BE,EAAS,IAAIhH,KAAKxC,EAAWyC,UAAY8G,IAnBzB,SAACE,EAASD,GAChC,IAAME,EAAgBhB,EAAce,GAC9BE,EAAYjB,EAAcc,GAChC,OAAIE,EAAcrG,YAAcsG,EAAUtG,WAiB1BuG,CAAgB5J,EAAYwJ,IAE1C3G,IAAMoF,IAAN,gCAAmCuB,EAAO5I,gBACzCmC,MAAK,SAAAC,GAAG,OAAIqG,EAAUrG,EAAI0C,SAE7B0D,EAAcI,KCxBH,SAASK,IAGtB,MC5Ba,WACb,MAA8B7K,oBAAS,GAAvC,mBAAO8K,EAAP,KAAgBC,EAAhB,KACA,EAAgC/K,mBAAS,MAAzC,mBAAOjB,EAAP,KAAiBoH,EAAjB,KAiBA,OAdAlC,qBAAU,WACRJ,IAAMC,KAAK,qBACRC,MAAK,SAAAC,GACJmC,EAAYnC,EAAI0C,KAAK3H,UACrBgM,GAAW,QAEd,IAQI,CAACD,EAAS/L,EAAUoH,EANZ,SAAAhG,GACbA,EAAMC,iBACNyD,IAAMC,KAAN,eACMC,MAAK,SAAAC,GAAG,OAAImC,EAAYnC,EAAI0C,KAAK3H,eDYQiM,GAAjD,mBAAOF,EAAP,KAAgB/L,EAAhB,KAA0BoH,EAA1B,KAAuC8E,EAAvC,KACA,EAAuDnB,EAAgB/K,GAAvE,mBAAOkC,EAAP,KAAeC,EAAf,KAA8BF,EAA9B,KAA0CkK,EAA1C,KACA,EE9Ba,SAA4BnM,GACzC,MAA4CiB,mBAAS,IAArD,mBAAOf,EAAP,KAAuBkM,EAAvB,KAmCA,OAjCAlH,qBAAU,cAGP,CAAClF,IA8BG,CAACE,EA5Bc,SAAAkB,GAEpB,IAAMgE,EAAQhE,EAAMI,OAAO6K,QAAQ,UAGnC,GAAIjH,EAAO,CAET,IAAMkH,EAAYtI,OAAOoB,EAAMmH,aAAa,cAExCrM,EAAeI,IACjBwE,IAAMgF,MAAN,gBAA6B,CAAE0C,WAAYtM,EAAeI,KACrD0E,MAAK,SAAAC,GAAG,OAAItD,QAAQC,IAAI,mBAAoBqD,EAAI0C,SAKvDhG,QAAQC,IAAR,mBAAwB0K,EAAxB,eAAwCpM,EAAeW,WAAvD,qBAA8EyL,IAAcpM,EAAeW,aACvGyL,IAAcpM,EAAeW,WAC/BuL,EAAkB,IAGlBtH,IAAMC,KAAN,gBAA4B,CAAElE,WAAYyL,IACrCtH,MAAK,SAAAC,GAAG,OAAImH,EAAkBnH,EAAI0C,YFAL8E,CAAmBzM,GAA3D,mBAAOE,EAAP,KAAuBwM,EAAvB,KACA,EGhCa,WAEb,MAAwBzL,oBAAS,GAAjC,mBAAOa,EAAP,KAAa6K,EAAb,KAYA,MAAO,CATU,kBAAMA,GAAQ,IADb,kBAAMA,GAAQ,IAUH7K,GHkBO8K,GAApC,mBAAOjE,EAAP,KAAiBkE,EAAjB,KAA4B/K,EAA5B,KACA,EAAgCb,mBAAS,IAAzC,mBAAOR,EAAP,KAAiB0I,EAAjB,KAWA,OATAjE,qBAAU,WACRJ,IAAMoF,IAAI,iBACJlF,MAAK,SAAAC,GACJ,IAAM6H,EAAc,GACpB7H,EAAI0C,KAAKlH,SAAS8E,SAAQ,SAAAxC,GAAO,OAAI+J,EAAY/J,EAAQzC,IAAMyC,KAC/DoG,EAAY2D,QAElB,CAAC9M,IAGF,sBAAKG,UAAU,MACbI,QAASmM,EADX,UAIGX,GAAW,sDAGVA,IAAY/L,GACZ,cAACmH,EAAD,CAAeC,YAAaA,KAI5B2E,GAAW/L,GACX,mCACE,eAAC,IAAD,CAAQ+M,SAAS,cAAjB,UACE,cAACjN,EAAD,CAAQE,SAAUA,EAAUC,aAAciM,EAAQhM,eAAgBA,IAClE,cAAC,EAAD,CAAWA,eAAgBA,EAAgBO,SAAUA,IACrD,cAACoB,EAAD,CACEC,KAAMA,EACNE,WAAY2G,EACZ5G,YAAa8K,EACb5K,WAAYA,EACZxB,SAAUA,EACVyB,OAAQA,EACRC,cAAeA,IAEjB,eAAC,IAAD,WACE,cAAC,IAAD,CAAO6K,OAAK,EAACC,KAAM,CAAC,IAAK,QAAzB,SACE,cAAC,EAAD,CACE/K,OAAQA,EACR6F,IAAK9F,EACLwG,SAAU,kBAAM0D,EAAU,IAC1BzD,UAAW,kBAAMyD,GAAW,IAC5BxD,SAAUA,MAGd,cAAC,IAAD,CAAOqE,OAAK,EAACC,KAAK,QAAlB,SACE,cAACrE,EAAD,MAEF,cAAC,IAAD,CAAOoE,OAAK,EAACC,KAAK,YAAlB,SACE,cAAC/D,EAAD,CAAazI,SAAUA,EAAU0I,YAAaA,MAEhD,cAAC,IAAD,CAAO6D,OAAK,EAACC,KAAK,WAAlB,SACE,cAAClD,EAAD,CAAStJ,SAAUA,iBIlFjCkB,QAAQC,IAAI,oBAAqBsL,sCACjCpI,IAAMqI,SAASC,QAAUF,qCACzBpI,IAAMqI,SAASE,iBAAkB,EAGnCC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.c4a33726.chunk.js","sourcesContent":["// Router components\nimport { Link, NavLink } from \"react-router-dom\";\n\nexport default function Header(props) {\n  const { username, handleLogout, currentSession } = props;\n\n  return(\n    <div className=\"navbar navbar-expand-sm navbar-light bg-info\">\n      <div className=\"container-fluid\">\n        <Link className=\"navbar-brand\" to=\"/\">Timekeeper</Link>\n        <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span className=\"navbar-toggler-icon\"></span>\n        </button>\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n            <li className=\"nav-item\">\n              <NavLink className=\"nav-link\" to=\"/day\">Day</NavLink>\n            </li>\n            <li className=\"nav-item\">\n              <NavLink className=\"nav-link\" to=\"/week\">Week</NavLink>\n            </li>\n            <li className=\"nav-item\">\n              <NavLink to=\"/projects\" className=\"nav-link\">Projects</NavLink>\n            </li>\n            <li className=\"nav-item\">\n              <NavLink className=\"nav-link\" to=\"/reports\">Reports</NavLink>\n            </li>\n          </ul>\n        </div>\n        <div className=\"d-flex\">\n          <span className=\"navbar-text me-2\">Logged in as {username}</span>\n          <button className=\"btn btn-outline-dark\" onClick={handleLogout}>Logout</button>\n        </div>\n      </div>\n    </div>\n  )\n}","import '../styles/StatusBar.css';\n\nexport default function StatusBar(props) {\n  const { currentSession, projects} = props;\n\n  const tracking = currentSession.id !== undefined;\n  const projectTitle = tracking && projects[currentSession.project_id].title\n\n  return (\n    <div className={`statusBar border-top border-info\n      ${tracking ? 'bg-warning' : 'bg-info'}`}>\n      { currentSession.id &&\n        `Currently tracking ${projectTitle}`\n      }\n      { !currentSession.id &&\n        `Not currently tracking`\n      }\n    </div>\n  )\n}","import { useState } from 'react';\n\nexport default function useControlledForms(fields) {\n  const [formValues, setFormValues] = useState(fields)\n\n  const handleFormChange = event => {\n    event.preventDefault();\n    setFormValues(prev => {\n      const newVals = {...prev};\n      newVals[event.target.name] = event.target.value;\n      console.log(newVals)\n      return newVals;\n    })\n  }\n\n  return [formValues, handleFormChange]\n}","import { useEffect, useState, useCallback } from 'react';\nimport axios from 'axios';\n\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\nimport useControlledForms from '../hooks/useControlledForms';\n\nexport default function NewBlockForm(props) {\n  const { show, handleShow, handleClose, currentDay, projects, blocks, refreshBlocks } = props;\n\n  const [badStart, setBadStart] = useState(false);\n  const [badEnd, setBadEnd] = useState(false);\n  const [submitStatus, setSubmitStatus] = useState({\n    valid: true,\n    msg: \"\"\n  })\n  const [values, handleChange] = useControlledForms({\n    date: currentDay.toISOString().split('T')[0],\n    project: \"\",\n    startHour: \"6\",\n    startMinute: \"00\",\n    startAMPM: \"0\",\n    endHour: \"6\",\n    endMinute: \"00\",\n    endAMPM: \"0\"\n  });\n\n  const currentDateText = currentDay.toDateString();\n\n  const minutesSinceMidnight = (hours, minutes) => (hours * 60) + minutes;\n\n  const getBoundaryMinutes = useCallback(values => {\n    const startHours = Number(values.startHour) + Number(values.startAMPM);\n    const startMinutes = Number(values.startMinute)\n    const endHours = Number(values.endHour) + Number(values.endAMPM);\n    const endMinutes = Number(values.endMinute)\n    const startMins = minutesSinceMidnight(startHours, startMinutes);\n    const endMins = minutesSinceMidnight(endHours, endMinutes);\n\n    return [startMins, endMins]\n  }, [])\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const [startMins, endMins] = getBoundaryMinutes(values);\n    let valid, msg;\n    if (startMins > endMins) {\n      valid = false;\n      msg = \"Submit failed - that block starts before its end time!\";\n    } else if (badStart || badEnd) {\n      valid = false;\n      msg = \"Submit failed - your start or end time conflicts with an existing block.\"\n    } else if (values.project === \"\") {\n      valid = false;\n      msg = \"Submit failed - select a project first!\"\n    } else {\n      valid = true;\n      msg = \"Validation successful, submitting!\"\n      // Turn the raw values into ISO strings to send\n      const startDateMs = new Date(values.date).valueOf() + (startMins * 60 * 1000);\n      const endDateMs = new Date(values.date).valueOf() + (endMins * 60 * 1000);\n      const startTime = new Date(startDateMs).toISOString();\n      const endTime = new Date(endDateMs).toISOString();\n\n      axios.post('/api/blocks', { startTime, endTime, project: values.project})\n           .then(res => {\n             console.log(res);\n             refreshBlocks()\n           })\n      handleClose();\n    }\n    setSubmitStatus({ valid, msg });\n  }\n\n  // Check to see if the start/end times conflict with existing blocks\n  useEffect(() => {\n\n    setBadStart(false);\n    setBadEnd(false);\n    const [startMinutes, endMinutes] = getBoundaryMinutes(values);\n    const dayBlocks = blocks.filter(block => new Date(block.start_time).getDate() === currentDay.getDate())\n    dayBlocks.forEach(block => {\n      const blockStart = new Date(block.start_time);\n      const blockEnd = new Date(block.end_time);\n      const blockStartMins = minutesSinceMidnight(blockStart.getHours(), blockStart.getMinutes())\n      const blockEndMins = minutesSinceMidnight(blockEnd.getHours(), blockEnd.getMinutes())\n\n      if (startMinutes >= blockStartMins &&\n        startMinutes < blockEndMins) {\n            setBadStart(true);\n      }\n\n      if (endMinutes > blockStartMins &&\n        endMinutes <= blockEndMins) {\n          setBadEnd(true);\n      }\n    })\n  }, [values, currentDay, blocks, getBoundaryMinutes])\n\n  // Make the options lists for the form <select> tags\n  const projectOptions = Object.values(projects).reverse().map(project => (\n    <option value={project.id}>{project.title}</option>\n  ));\n\n  const hoursOptions = function() {\n    const optionsList = [];\n    for(let i = 1; i <= 12; i++) {\n      optionsList.push(<option>{i}</option>)\n    }\n    return optionsList;\n  }()\n\n  return (\n    <>\n      <Modal show={show} onHide={handleClose}>\n        <Modal.Header closeButton>\n          <Modal.Title>Schedule a new Block </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          Date: <strong>{currentDateText}</strong>\n        <form onSubmit={handleSubmit}>\n          <div>\n            <input type=\"hidden\" class=\"form-control\" id=\"date\" value={values.date}/>\n          </div>\n          <div className=\"row row-cols-lg-auto g-5 align-items-center\">\n            <label for=\"project\">Project</label>\n            <div class=\"col-12\">\n              <select class=\"form-select\" name=\"project\" id=\"project\" value={values.project} onChange={handleChange}>\n                <option value=\"\">Select a project</option>\n                {projectOptions}\n              </select>\n            </div>\n          </div>\n          <div className=\"row row-cols-lg-auto g-2 mt-1 align-items-center\">\n            <label for=\"startHour\">Starting at:</label>\n            <div className=\"col-12\">\n              <select className=\"form-select\" name=\"startHour\" id=\"startHour\" value={values.startHour} onChange={handleChange}>\n                {hoursOptions}\n              </select>\n            </div>\n            <div className=\"col-12\">\n              <select class=\"form-select\" name=\"startMinute\" id=\"startMinute\" value={values.startMinute} onChange={handleChange}>\n                <option>00</option>\n                <option>15</option>\n                <option>30</option>\n                <option>45</option>\n              </select>\n            </div>\n            <div className=\"col-12\">\n              <select class=\"form-select\" name=\"startAMPM\" id=\"startAMPM\" value={values.startAMPM} onChange={handleChange}>\n                <option value=\"0\">AM</option>\n                <option value=\"12\">PM</option>\n              </select>\n            </div>\n            {badStart &&\n             (<small id=\"passwordHelpBlock\" class=\"form-text text-muted\">\n             That start time conflicts with an existing Block!\n             </small>)}\n          </div>\n          <div className=\"row row-cols-lg-auto g-2 mt-1 align-items-center\">\n            <label>Ending at:</label>\n            <div className=\"col-12\">\n              <select class=\"form-select\" name=\"endHour\" id=\"endHour\" value={values.endHour} onChange={handleChange}>\n                {hoursOptions}\n              </select>\n            </div>\n            <div className=\"col-12\">\n              <select class=\"form-select\" name=\"endMinute\" id=\"endMinute\" value={values.endMinute} onChange={handleChange}>\n                <option>00</option>\n                <option>15</option>\n                <option>30</option>\n                <option>45</option>\n              </select>\n            </div>\n            <div className=\"col-12\">\n              <select class=\"form-select\" name=\"endAMPM\" id=\"endAMPM\" value={values.endAMPM} onChange={handleChange}>\n                <option value=\"0\">AM</option>\n                <option value=\"12\">PM</option>\n              </select>\n            </div>\n            {badEnd &&\n             (<small id=\"passwordHelpBlock\" class=\"form-text text-muted\">\n             That end time conflicts with an existing Block!\n             </small>)}\n          </div>\n        </form>\n        </Modal.Body>\n          {!submitStatus.valid && (\n            <Modal.Footer>{submitStatus.msg}</Modal.Footer>\n          )}\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>\n            Close\n          </Button>\n          <Button variant=\"primary\" onClick={handleSubmit}>\n            Submit\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n}\n","import axios from 'axios';\nimport useControlledForms from '../hooks/useControlledForms';\n\nexport default function LoginRegister(props) {\n\n  const { setUsername } = props;\n\n  const [formValues, handleFormChange] = useControlledForms({\n    loginUsername: \"\",\n    loginPass: \"\",\n    registerUsername: \"\",\n    registerPass: \"\"\n  });\n\n  const handleLogin = event => {\n    event.preventDefault();\n    const { loginUsername, loginPass } = formValues;\n    console.log(`Logging in with username: ${loginUsername} and password: ${loginPass}`);\n    axios.post(`/api/login`, {username: loginUsername, rawPassword: loginPass})\n         .then(res => setUsername(res.data.username))\n  }\n\n  const handleRegister = event => {\n    event.preventDefault();\n    const { registerUsername, registerPass } = formValues;\n    console.log(`Registering a new user with username: ${registerUsername} and password: ${registerPass}`);\n    axios.post(`/api/users`, {username: registerUsername, rawPassword: registerPass})\n         .then(res => setUsername(res.data.username))\n  }\n\n\n  return (\n    <div className=\"login-register\">\n      <div className=\"login\">\n        <form onSubmit={handleLogin}>\n          <label htmlFor=\"loginUsername\">Username: </label>\n          <input name=\"loginUsername\" type=\"text\" value={formValues.loginUsername} onChange={handleFormChange}></input>\n\n          <label htmlFor=\"loginPass\">Password: </label>\n          <input name=\"loginPass\" type=\"password\" value={formValues.loginPass} onChange={handleFormChange}></input>\n\n          <button>Login</button>\n        </form>\n      </div>\n      <div className=\"register\">\n        <form onSubmit={handleRegister}>\n          <label htmlFor=\"registerUsername\">Username: </label>\n          <input name=\"registerUsername\" type=\"text\" value={formValues.registerUsername} onChange={handleFormChange}></input>\n\n          <label htmlFor=\"registerPass\">Password: </label>\n          <input name=\"registerPass\" type=\"password\" value={formValues.registerPass} onChange={handleFormChange}></input>\n\n          <button>Register</button>\n        </form>\n      </div>\n    </div>\n  )\n}","import axios from 'axios';\nimport '../styles/Block.css'\n\nexport default function Block(props) {\n  const { title, project_id, length, day, start_time, end_time } = props;\n\n  const startTimeStr = new Date(start_time).toTimeString();\n  const endTimeStr = new Date(end_time).toTimeString();\n\n  return(\n    <div className=\"block\"\n      projectid={project_id}\n    >\n      <h5>{title}</h5>\n      <ul>\n        <li>From: {startTimeStr} to {endTimeStr}</li>\n        <li>Length: {length}</li>\n      </ul>\n    </div>\n  )\n}","import Block from './Block'\n\nexport default function BlockList(props) {\n  const { blocks, day } = props;\n\n  const getFifteenMinuteUnits = (start, end) => {\n    const lengthMs = new Date(end) - new Date(start);\n    const lengthMins = lengthMs / 1000 / 60;\n    const fifteenMinuteUnits = lengthMins / 15;\n    return fifteenMinuteUnits;\n  }\n\n  const blocksForDay = blocks.filter(block => {\n    return new Date(block.start_time).getDate() === day.getDate();\n    })\n    .map(block => (\n      <Block\n        {...block}\n        day={new Date(block.start_time)}\n        length={getFifteenMinuteUnits(block.start_time, block.end_time)}\n      />\n    ))\n\n  return (\n    <div className=\"blockList\">\n      { blocksForDay }\n    </div>\n  )\n}","import '../styles/DaySchedule.css';\n\nimport Button from 'react-bootstrap/Button';\nimport BlockList from './BlockList'\n\nexport default function DaySchedule(props) {\n\n  // Props:\n  // blocks is an array of Block components.\n  const { blocks, day, tomorrow, yesterday, showForm } = props;\n  const dayMap = {\n    0: \"Sunday\",\n    1: \"Monday\",\n    2: \"Tuesday\",\n    3: \"Wednesday\",\n    4: \"Thursday\",\n    5: \"Friday\",\n    6: \"Saturday\"\n  }\n\n  return(\n    <div className=\"daySchedule\">\n      <h3>{day.toDateString()}</h3>\n      <Button variant=\"primary\" onClick={showForm}>\n        Make a new block\n      </Button>\n        <div className=\"dayScheduleInternal\">\n          <button \n            className=\"btn btn-primary\"\n            onClick={yesterday}>{`<--`}</button>\n          <BlockList \n            blocks={blocks}\n            day={day}\n          />\n          <button \n            className=\"btn btn-primary\"\n            onClick={tomorrow}>\n              {`-->`}\n          </button>\n      </div>\n    </div>\n  )\n}","export default function WeekSchedule(props) {\n\n  return (\n    <div>\n      <p>WeekSchedule component</p>\n    </div>\n  )\n}","export default function ProjectListItem(props) {\n  const { id, title, selected, onEditClick, onCancelClick, onSubmit, formValue, handleChange } = props;\n\n  return (\n    <li key={id} className=\"list-group-item d-flex justify-content-between\">\n      <span><strong>{title}</strong></span>\n      { selected &&\n        <form className=\"row row-cols-sm-auto g-3 align-items-center\" onSubmit={onSubmit}>\n          <div className=\"col-12\">\n            <label className=\"visually-hidden\" htmlFor=\"newName\">New name: </label>\n            <input\n              type=\"text\"\n              className=\"form-control form-control-sm\"\n              id=\"newName\"\n              value={formValue}\n              onChange={handleChange}\n            ></input>\n          </div>\n          <div className=\"col-12\">\n          <button className=\"btn btn-sm btn-secondary\">Submit</button>\n          </div>\n          <div className=\"col-12\">\n              <button className=\"btn btn-sm btn-danger\" onClick={onCancelClick}>Cancel</button>\n            </div>\n        </form>\n      }\n      { !selected &&\n        <button\n          className=\"btn btn-sm btn-info\" onClick={onEditClick}>Rename</button>\n      }\n    </li>\n  )\n}","import axios from 'axios';\nimport { useState } from 'react'\n\nimport ProjectListItem from './ProjectListItem'\n\nexport default function ProjectList(props) {\n  const { projects, setProjects } = props;\n\n  const [selectedProject, setSelectedProject] = useState(null);\n  const [formValue, setFormValue] = useState(null);\n  const [showNewProjectForm, setShowNewProjectForm] = useState(false);\n  const [newProjectFormValue, setNewProjectFormValue] = useState(\"\");\n\n  const handleSubmit = (event, id) => {\n    event.preventDefault();\n    const title = formValue !== null ? formValue : projects[id].title;\n    setSelectedProject(null);\n    setFormValue(null);\n    const newProject = {...projects[id], title};\n    setProjects(prev => ({\n      ...prev,\n      [id]: newProject\n    }))\n    axios.patch(`/api/projects/${id}`, { title })\n         .then(res => console.log(res))\n  }\n\n  const handleCancel = event => {\n    event.preventDefault();\n    setSelectedProject(null);\n  }\n\n  const handleChange = event => {\n    setFormValue(event.target.value);\n  }\n\n  const handleNewProjectFormChange = event => {\n    setNewProjectFormValue(event.target.value);\n  }\n\n  const handleNewProjectSubmit = event => {\n    event.preventDefault();\n    axios.post(`/api/projects`, { projectTitle: newProjectFormValue })\n         .then(res => {\n           const newProject = res.data;\n           setProjects(prev => ({\n             ...prev,\n             [newProject.id]: newProject\n           }))\n         })\n         .then(() => {\n          setNewProjectFormValue(\"\");\n          setShowNewProjectForm(false)\n         })\n  }\n\n  const handleNewProjectCancel = event => {\n    event.preventDefault();\n    setNewProjectFormValue(\"\");\n    setShowNewProjectForm(false)\n  }\n\n  const projectItems = Object.values(projects).map(project => (\n    <ProjectListItem\n      {...project}\n      selected={ project.id === selectedProject}\n      onEditClick={() => setSelectedProject(project.id)}\n      onCancelClick={handleCancel}\n      onSubmit={(event) => handleSubmit(event, project.id)}\n      handleChange={handleChange}\n      formValue={formValue === null ? project.title : formValue}\n    />\n  ))\n\n  return (\n    <div className=\"container\">\n      <h3>My Projects</h3>\n\n      <ul className=\"list-group\">\n        {projectItems}\n      </ul>\n      <div className=\"newProject\">\n        { !showNewProjectForm &&\n          <button\n            className=\"btn btn-primary\"\n            onClick={() => setShowNewProjectForm(true)}\n          >\n              Add a Project\n          </button>\n        }\n        { showNewProjectForm &&\n          <form className=\"row row-cols-lg-auto g-3\" onSubmit={handleNewProjectSubmit}>\n            <div className=\"col-12\">\n              <label className=\"visually-hidden\" htmlFor=\"newProject\">New project name:</label>\n              <input\n                className=\"form-control\"\n                type=\"text\"\n                id=\"newProject\"\n                value={newProjectFormValue}\n                onChange={handleNewProjectFormChange}\n              ></input>\n            </div>\n            <div className=\"col-12\">\n              <button className=\"btn btn-success\" type=\"submit\">Submit</button>\n            </div>\n            <div className=\"col-12\">\n              <button className=\"btn btn-danger\" type=\"button\" onClick={handleNewProjectCancel}>Cancel</button>\n            </div>\n          </form>\n        }\n      </div>\n    </div>\n\n  )\n}","import axios from \"axios\"\nimport { useEffect, useState } from \"react\"\n\nexport default function Reports(props) {\n  const { projects } = props;\n\n  const [reportData, setReportData] = useState([]);\n\n  useEffect(() => {\n    axios.get(`/api/reports/week`)\n         .then(res => setReportData(res.data))\n\n  }, [projects])\n\n  const report = reportData.map(project => {\n    // Totals are returned in seconds.\n    const { project_id, sessions_total, blocks_total } = project\n    const projectName = projects[project_id].title;\n    const secondsToHours = 1/(60*60);\n    const sessionHours = (sessions_total * secondsToHours) || 0\n    const blockHours = (blocks_total * secondsToHours) || 0\n    return (\n    <li key={project_id}>\n      {projectName}: {sessionHours.toPrecision(1)} / {blockHours} hours\n    </li>\n    )\n  })\n\n  return (\n    <div className=\"reports\">\n      <ul>\n        {report}\n      </ul>\n    </div>\n  )\n}","\nconst msDayMultiplier = 1000*60*60*24;\n\n// Given a Date object, return a Date object of the last Sunday.\nexport function getLastSunday(date) {\n// Get Sunday for this week.\nconst daysSinceSunday = date.getDay(); // Returns 0 for sunday, 1 for Monday, etc\nconst msSinceSunday = msDayMultiplier * daysSinceSunday;\nconst lastSundayMs = date.valueOf() - msSinceSunday;\nreturn new Date(lastSundayMs);\n}\n\n// Set h/min/s/ms of a given date to 0.\nexport function makeZeroDate(date) {\n  date.setHours(0);\n  date.setMinutes(0);\n  date.setSeconds(0);\n  date.setMilliseconds(0);\n}\n","import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nimport Block from '../components/Block';\n\nimport { getLastSunday, makeZeroDate } from '../helpers/dayHelpers'\n\n// Ensures that the app always has the Blocks for the current week.\nexport default function useWeeklyBlocks(username) {\n  const today = new Date();\n  makeZeroDate(today);\n  const sunday = getLastSunday(today);\n\n  const [currentDay, setCurrentDay] = useState(today);\n  const [blocks, setBlocks] = useState([]);\n\n  // Uses an array of block objects from the API to create Block components.\n\n\n  // Loads blocks from the API, generates Block components, and sets state.\n  const loadUserBlocks = () => {\n    axios.get(`/api/blocks/week`)\n    .then(res => setBlocks(res.data))\n  }\n\n  // Compare two input days. If one is in a different week than the other,\n  // return true.\n  const checkForNewWeek = (current, newDay) => {\n    const currentSunday = getLastSunday(current);\n    const newSunday = getLastSunday(newDay);\n    if (currentSunday.getDate() !== newSunday.getDate()) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Load the current week's blocks any time the username changes\n  useEffect(loadUserBlocks, [username]);\n\n  // Change currentDay by given number of days\n  // i.e. days = 1 gives next day, days = -1 gives prev day\n  // Check for new week and load new blocks if necessary.\n  const changeDay = days => {\n    const msDayMultiplier = 1000*60*60*24;\n    const deltaMs = msDayMultiplier*days;\n    const newDay = new Date(currentDay.valueOf() + deltaMs);\n    const newWeek = checkForNewWeek(currentDay, newDay)\n    if (newWeek) {\n      axios.get(`/api/blocks/week?date=${newDay.toISOString()}`)\n      .then(res => setBlocks(res.data))\n    }\n    setCurrentDay(newDay)\n  }\n\n  const refreshBlocks = () => {\n    axios.get(`/api/blocks/week?date=${currentDay.toISOString()}`)\n      .then(res => setBlocks(res.data))\n  }\n\n  return [blocks, refreshBlocks, currentDay, changeDay];\n}","import '../styles/App.css';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// Router components\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\n// Custom components\nimport Header from './Header';\nimport StatusBar from './StatusBar';\nimport NewBlockForm from './NewBlockForm';\nimport LoginRegister from './LoginRegister';\nimport DaySchedule from './DaySchedule';\nimport WeekSchedule from './WeekSchedule';\nimport ProjectList from './ProjectList';\nimport Reports from './Reports';\n\n// Custom hooks\nimport useAuthentication from '../hooks/useAuthentication'\nimport useWeeklyBlocks from '../hooks/useWeeklyBlocks';\nimport useSessionTracking from '../hooks/useSessionTracking';\nimport usePopupModal from '../hooks/usePopupModal';\n\nexport default function App() {\n\n\n  const [loading, username, setUsername, logout] = useAuthentication();\n  const [blocks, refreshBlocks, currentDay, changeDay] = useWeeklyBlocks(username);\n  const [currentSession, toggleSession] = useSessionTracking(username);\n  const [showForm, closeForm, show] = usePopupModal();\n  const [projects, setProjects] = useState({})\n\n  useEffect(() => {\n    axios.get('/api/projects')\n         .then(res => {\n           const projectList = {};\n           res.data.projects.forEach(project => projectList[project.id] = project)\n           setProjects(projectList)\n         })\n  }, [username])\n\n  return (\n    <div className=\"App\"\n      onClick={toggleSession}\n    >\n      {/* If we haven't finished trying to log in: */}\n      {loading && <p>Currently loading...</p>}\n\n      {/* If there's no valid login: */}\n      {!loading && !username &&\n        <LoginRegister setUsername={setUsername} />\n      }\n\n      {/* If we've successfully logged in: */}\n      {!loading && username &&\n        <>\n          <Router basename=\"/timekeeper\">\n            <Header username={username} handleLogout={logout} currentSession={currentSession} />\n            <StatusBar currentSession={currentSession} projects={projects} />\n            <NewBlockForm \n              show={show}\n              handleShow={showForm}\n              handleClose={closeForm}\n              currentDay={currentDay}\n              projects={projects}\n              blocks={blocks}\n              refreshBlocks={refreshBlocks}\n            />\n            <Switch>\n              <Route exact path={[\"/\", \"/day\"]}>\n                <DaySchedule\n                  blocks={blocks}\n                  day={currentDay}\n                  tomorrow={() => changeDay(1)}\n                  yesterday={() => changeDay(-1)}\n                  showForm={showForm}\n                />\n              </Route>\n              <Route exact path=\"/week\" >\n                <WeekSchedule />\n              </Route>\n              <Route exact path=\"/projects\" >\n                <ProjectList projects={projects} setProjects={setProjects} />\n              </Route>\n              <Route exact path=\"/reports\" >\n                <Reports projects={projects} />\n              </Route>\n            </Switch>\n          </Router>\n        </>\n      }\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport default function useAuthentication() {\n  const [loading, setLoading] = useState(true);\n  const [username, setUsername] = useState(null);\n\n  // Attempt to authenticate the user if they've logged in previously.\n  useEffect(() => {\n    axios.post('/api/authenticate')\n      .then(res => {\n        setUsername(res.data.username)\n        setLoading(false);\n      })\n  }, []);\n\n  const logout = event => {\n    event.preventDefault();\n    axios.post(`/api/logout`)\n         .then(res => setUsername(res.data.username))\n  }\n\n  return [loading, username, setUsername, logout];\n}\n","import axios from 'axios';\nimport { useState, useEffect } from 'react';\n\nexport default function useSessionTracking(username) {\n  const [currentSession, setCurrentSession] = useState({});\n\n  useEffect(() => {\n    // When the username changes, ping the server to see if there's an open session.\n    // If there is, load it into the state.\n  }, [username])\n\n  const toggleSession = event => {\n    // Try to find the nearest \"block\" class element.\n    const block = event.target.closest('.block')\n\n    // If there is one, then the user clicked on a block.\n    if (block) {\n      // Get the project ID from the block. Cast it to a number for comparison later.\n      const projectId = Number(block.getAttribute('projectid'))\n      // If we have a session running already, ping the API to stop it.\n      if (currentSession.id) {\n        axios.patch(`/api/sessions`, { session_id: currentSession.id })\n            .then(res => console.log('stopped session:', res.data))\n      }\n\n      // If the input matches the currently-tracked session, then we should just stop\n      // the current session without starting a new one.\n      console.log(`checking ${projectId} vs ${currentSession.project_id}, result: ${projectId === currentSession.project_id}`)\n      if (projectId === currentSession.project_id) {\n        setCurrentSession({});\n      } else {\n        // Otherwise, ping the API to start a new session and start tracking.\n        axios.post(`/api/sessions`, { project_id: projectId })\n            .then(res => setCurrentSession(res.data))\n      }\n    }\n\n  }\n\n  return [currentSession, toggleSession];\n}","import { useState } from 'react'\n\nexport default function usePopupModal() {\n\n  const [show, setShow] = useState(false);\n\n  const closeForm = () => setShow(false);\n  const showForm = () => setShow(true);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(event)\n    // Submit the form and close it\n    setShow(false);\n  }\n\n  return [showForm, closeForm, show]\n}","import 'bootstrap/dist/css/bootstrap.min.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport axios from 'axios';\n\nif (process.env.REACT_APP_API_URL) {\n  console.log('found a variable:', process.env.REACT_APP_API_URL)\n  axios.defaults.baseURL = process.env.REACT_APP_API_URL;\n  axios.defaults.withCredentials = true;\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}